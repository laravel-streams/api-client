{"mappings":"AEAA;;CAEC,GACM,MAAM;IACT,OAAO,OAAO,SAAS,EAAE,EAAE;QACvB,IAAI,OAAO;QACX,MAAM,WAAW;QACjB,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,IACxB,QAAQ,SAAS,MAAM,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,SAAS,MAAM;QAEtE,OAAO;IACX;IAEA,OAAO,WAAW,GAAG,EAAE,IAAI,EAAE;QACzB,IAAI,CAAC,IAAI,UAAU,CAAC,OAChB,OAAO,OAAO;QAElB,OAAO;IACX;IAEA,OAAO,YAAY,GAAG,EAAE,KAAK,EAAE;QAC3B,IAAI,CAAC,IAAI,QAAQ,CAAC,QACd,OAAO,MAAM;QAEjB,OAAO;IACX;IAEA,OAAO,UAAU,GAAG,EAAE,IAAI,EAAE;QACxB,IAAI,IAAI,UAAU,CAAC,OACf,OAAO,IAAI,SAAS,CAAC,KAAK,MAAM;QAEpC,OAAO;IACX;IAEA,OAAO,WAAW,GAAG,EAAE,KAAK,EAAE;QAC1B,IAAI,IAAI,QAAQ,CAAC,QACb,OAAO,IAAI,SAAS,CAAC,GAAG,IAAI,MAAM,GAAG,MAAM,MAAM;QAErD,OAAO;IACX;IAEA,OAAO,QAAQ,MAAM,EAAE;QACnB,OAAO,MAAM,CAAC,EAAE,CAAC,WAAW,KAAK,OAAO,KAAK,CAAC;IAClD;IAEA,OAAO,QAAQ,MAAM,EAAE;QACnB,OAAO,MAAM,CAAC,EAAE,CAAC,WAAW,KAAK,OAAO,KAAK,CAAC;IAClD;IAEA,OAAO,WAAW,GAAG,EAAE,MAAM,EAAE;QAC3B,OAAO,OAAO,CAAC,QAAQ,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;YACxC,MAAM,IAAI,OAAO,CAAC,IAAI,OAAO,MAAM,KAAK,MAAM;QAClD;QACA,OAAO;IACX;AACJ;AAKO,MAAM,4CAAY,CAAC,KAAK,CAAC,GAAG,EAAE,GAAM,CAAA;QAAE,GAAG,GAAG;QAAE,CAAC,EAAE,EAAE;IAAE,CAAA;AAKrD,SAAS,0CAAoB,MAAM;IACtC,OAAO,mBAAmB,KAAK,KAAK,SAAS,CAAC;AAClD;AAKO,MAAM,4CAAe,CAAC,QAAQ,GAAG;IACpC,IAAI,CAAC,QAAQ,MAAM,EACf,OAAO;IAEX,MAAM,SAAS,QAAQ,KAAK;IAC5B,IAAI,WAAW,WACX,OAAO;IAGX,IAAI,wCAAkB,WAAW,wCAAkB,SAC/C,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,SAAU,GAAG;QACrC,IAAI,wCAAkB,MAAM,CAAC,IAAI,GAAG;YAChC,IAAI,CAAC,MAAM,CAAC,IAAI,EACZ,MAAM,CAAC,IAAI,GAAG,CAAC;YAEnB,0CAAa,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI;QACzC,OACI,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI;IAEjC;IAGJ,OAAO,0CAAa,WAAW;AACnC;AAKO,MAAM,4CAAW,CAAC;IACrB,OAAO,SAAS,QAAQ,OAAO,SAAS;AAC5C;AAEA;;CAEC,GACD,MAAM,0CAAoB,CAAC;IACvB,OAAO,0CAAS,SAAS,CAAC,MAAM,OAAO,CAAC;AAC5C;AAKO,SAAS,0CAAgB,MAAM,CAAC,CAAC;IACpC,MAAM,MAAM,IAAK,cAAc;QAC3B,WAAW;YACP,OAAO,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,IACzB,GAAG,CAAC,CAAA,KAAM;oBAAC,EAAE,CAAC,EAAE;oBAAE,EAAE,CAAC,EAAE;iBAAC,EACxB,MAAM,CAAC,2CAAW,CAAC;QAC5B;QAEA,SAAS;YACL,OAAO,MAAM,IAAI,CAAC,IAAI,CAAC,IAAI;QAC/B;QAEA,MAAM,GAAG,EAAE;YACP,MAAM,0CAAa,IAAI,CAAC,QAAQ,IAAI;YACpC,OAAO,OAAO,CAAC,KAAK,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,GAAK,IAAI,CAAC,GAAG,CAAC,GAAG;YACpD,OAAO,IAAI;QACf;QAEA,QAAQ;YACJ,OAAO,IAAI,CAAC,IAAI,KAAK;QACzB;IACJ;IAEA,IAAI,KAAK,CAAC;IACV,OAAO;AACX;AAKO,SAAS,0CAAU,GAAG,EAAE,UAAU,CAAC,CAAC;IACvC,MAAM,mBAAmB,QAAQ,gBAAgB,KAAK;IAEtD,MAAM,SAAS,CAAC;QACZ,IAAI,kBACA,OAAO,OAAO;QAElB,OAAO,mBAAmB;IAC9B;IAEA,MAAM,cAAc,CAAC,QAAQ;QACzB,IAAI,UAAU,QAAQ,UAAU,WAC5B,OAAO;QAGX,IAAI,MAAM,OAAO,CAAC,QACd,OAAO,MAAM,GAAG,CAAC,CAAC,GAAG,IAAM,YAAY,GAAG,OAAO,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,IAAI,IAAI,CAAC;QAGvE,IAAI,OAAO,UAAU,UACjB,OAAO,OAAO,IAAI,CAAC,OACd,GAAG,CAAC,CAAA,MAAO,YAAY,GAAG,OAAO,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,IAAI,GACtD,IAAI,CAAC;QAGd,OAAO,GAAG,OAAO,CAAC,EAAE,OAAO,QAAQ;IACvC;IAEA,OAAO,OAAO,IAAI,CAAC,KACd,GAAG,CAAC,CAAA;QACD,MAAM,QAAQ,GAAG,CAAC,IAAI;QACtB,IAAI,UAAU,QAAQ,UAAU,WAC5B,OAAO;QAEX,IAAI,MAAM,OAAO,CAAC,UAAU,OAAO,UAAU,UACzC,OAAO,YAAY,KAAK;QAE5B,OAAO,GAAG,IAAI,CAAC,EAAE,OAAO,QAAQ;IACpC,GACC,MAAM,CAAC,SACP,IAAI,CAAC;AACd;;;AEzLA;;CAEC,GACM,MAAM;IACT,YAAY,MAAM,CAAE;QAChB,IAAI,CAAC,MAAM,GAAG;IAClB;AACJ;;;ADFO,MAAM,kDAAgB,CAAA,GAAA,yCAAO;IAChC,MAAM,IAAI,SAAS,CAAC,CAAC,EAAE;QACnB,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,YAAY;IAClD;IAEA,MAAM,KAAK,MAAM,EAAE,SAAS,CAAC,CAAC,EAAE;QAC5B,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,EAAE,QAAQ,EAAE;IAC5D;IAEA,MAAM,KAAK,IAAI,EAAE,SAAS,CAAC,CAAC,EAAE;QAC1B,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,YAAY;IACnD;IAEA,MAAM,MAAM,SAAS,CAAC,CAAC,EAAE;QACrB,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,YAAY;IACpD;IAEA,MAAM,IAAI,SAAS,CAAC,CAAC,EAAE;QACnB,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,YAAY;IAClD;IAEA,MAAM,OAAO,MAAM,EAAE,SAAS,CAAC,CAAC,EAAE;QAC9B,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,EAAE,QAAQ,EAAE;IAC/D;AACJ;;;;AExBO,MAAM,kDAAgB,CAAA,GAAA,yCAAO;IAChC,MAAM,IAAI,MAAM,EAAE,SAAS,CAAC,CAAC,EAAE;QAC3B,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,QAAQ,CAAC,EAAE;IACpE;IAEA,MAAM,KAAK,MAAM,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC,EAAE;QACnC,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,SAAS,EAAE,OAAO,EAAE;IAC7E;IAEA,MAAM,KAAK,MAAM,EAAE,IAAI,EAAE,SAAS,CAAC,CAAC,EAAE;QAClC,OAAO,IAAI,GAAG;QACd,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,EAAE,OAAO,QAAQ,CAAC,EAAE;IACrE;IAEA,MAAM,MAAM,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,SAAS,CAAC,CAAC,EAAE;QAC1C,OAAO,IAAI,GAAG;QACd,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,SAAS,EAAE,OAAO,SAAS,EAAE,OAAO,EAAE;IAC/E;IAEA,MAAM,IAAI,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,SAAS,CAAC,CAAC,EAAE;QACxC,OAAO,IAAI,GAAG;QACd,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,SAAS,EAAE,OAAO,EAAE;IAC7E;IAEA,MAAM,OAAO,MAAM,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC,EAAE;QACrC,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,EAAE,OAAO,SAAS,EAAE,OAAO,EAAE;IAChF;AACJ;;;;AE3BO,MAAM,kDAAqB;IAC9B,YAAY,IAAI,CAAE;QACd,KAAK,CAAC,QAAQ,gBAAgB,4CAAe,KAAK,QAAQ,KAAK;IACnE;IAEA,OAAO,IAAI,EAAE;QACT,IAAI,CAAC,GAAG,CAAC,UAAU;QACnB,OAAO,IAAI;IACf;IAEA,YAAY,IAAI,EAAE;QACd,IAAI,CAAC,GAAG,CAAC,gBAAgB;QACzB,OAAO,IAAI;IACf;IAEA,YAAY,IAAI,EAAE;QACd,IAAI,CAAC,GAAG,CAAC,iBAAiB;QAC1B,OAAO,IAAI;IACf;IAEA,MAAM,GAAG,IAAI,EAAE;QACX,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS,IAAI,CAAC,EAAE,KAAK,YAAY,IAAI,CAAC,EAAE,GAAG,KAAK,IAAI,CAAC,EAAE,GAAG,MAAM,IAAI,CAAC,EAAE;IACrG;IAEA,OAAO,KAAK,EAAE;QACV,OAAO,IAAI,CAAC,aAAa,CAAC,UAAU;IACxC;IAEA,cAAc,GAAG,EAAE,KAAK,EAAE;QACtB,IAAI,CAAC,GAAG,CAAC,iBAAiB,MAAM,MAAM;QACtC,OAAO,IAAI;IACf;IAEA,WAAW;QACP,MAAM,SAAS,CAAC;QAChB,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO;YACjB,MAAM,CAAC,IAAI,GAAG;QAClB;QACA,OAAO;IACX;AACJ;;;;ADvCO,MAAM,kDAAqB;IAC9B,YAAY,KAAK,EAAE,OAAO,CAAC,CAAC,CAAE;QAC1B,KAAK,CAAC,OAAO;QAEb,IAAI,CAAC,YAAY,GAAG,KAAK,YAAY,IAAI;QACzC,IAAI,CAAC,KAAK,GAAG,CAAA,GAAA,yCAAc,EAAE,KAAK,KAAK,IAAI,CAAC;QAC5C,IAAI,CAAC,QAAQ,GAAG,KAAK,QAAQ;QAC7B,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;QACrB,IAAI,CAAC,QAAQ,GAAG;QAEhB,wBAAwB;QACxB,OAAO,cAAc,CAAC,IAAI,EAAE,WAAW;YACnC,OAAO,IAAI,CAAA,GAAA,yCAAW,EAAE,KAAK,OAAO;YACpC,UAAU;QACd;IACJ;IAEA,eAAe,YAAY,EAAE;QACzB,OAAO,IAAI,CAAC,YAAY,KAAK;IACjC;IAEA,MAAM,QAAQ;QACV,MAAM,WAAW,MAAM,MAAM,IAAI,CAAC,GAAG,EAAE,IAAI;QAC3C,IAAI,CAAC,QAAQ,GAAG;QAChB,SAAS,OAAO,GAAG,IAAI;QACvB,OAAO,IAAI;IACf;IAEA,OAAO,GAAG,EAAE;QACR,OAAO,cAAc,CAAC,IAAI,EAAE,OAAO;YAAE,OAAO;YAAK,UAAU;QAAM;QACjE,OAAO,IAAI;IACf;AACJ;;;AEtCA;;CAEC,GACM,MAAM,kDAAmB;IAC5B,YAAY,OAAO,CAAE;QACjB,KAAK,CAAC,CAAC,KAAK,EAAE,QAAQ,QAAQ,CAAC,MAAM,CAAC,UAAU,EAAE,QAAQ,QAAQ,CAAC,UAAU,EAAE;QAC/E,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,MAAM,GAAG,QAAQ,QAAQ,CAAC,MAAM;QACrC,IAAI,CAAC,UAAU,GAAG,QAAQ,QAAQ,CAAC,UAAU;QAC7C,IAAI,CAAC,GAAG,GAAG,QAAQ,QAAQ,CAAC,GAAG;IACnC;IAEA,IAAI,WAAW;QACX,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ;IAChC;AACJ;;;;AEVO,MAAM;IACT,OAAO,iBAAiB;QACpB,UAAU;YACN,SAAS;YACT,UAAU;YACV,OAAO;QACX;IACJ,EAAE;IAEF,YAAY,UAAU,CAAC,CAAC,CAAE;QACtB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAW,EAAE;IACxE;IAEA;;KAEC,GACD,OAAO,IAAI,WAAW,EAAE,IAAI,EAAE;QAC1B,OAAO,YACF,MAAM,CAAC,CAAA,aAAc,OAAO,UAAU,CAAC,KAAK,KAAK,YACjD,IAAI,CAAC,CAAC,GAAG;YACN,OAAO,EAAE,OAAO,CAAC,QAAQ,CAAC,KAAK,GAAG,EAAE,OAAO,CAAC,QAAQ,CAAC,KAAK;QAC9D;IACR;IAEA;;KAEC,GACD,aAAa,IAAI,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE;QACnC,MAAM,cAAc,0CAAW,GAAG,CAAC,OAAO,WAAW,EAAE;QACvD,KAAK,MAAM,cAAc,YACrB,SAAS,MAAM,UAAU,CAAC,KAAK,CAAC,QAAQ;QAE5C,OAAO;IACX;IAEA;;KAEC,GACD,OAAO,kBAAkB,CAAC,EAAE,UAAU,CAAC,CAAC,EAAE;QACtC,IAAI,CAAA,GAAA,yCAAO,EAAE,EAAE,cAAc,GACzB,UAAU,CAAA,GAAA,yCAAW,EAAE,EAAE,cAAc,EAAE;QAE7C,IAAI,SAAS,OAAO,cAAc,CAAC;QACnC,IAAI,UAAU,CAAA,GAAA,yCAAO,EAAE,OAAO,cAAc,GACxC,UAAU,IAAI,CAAC,iBAAiB,CAAC,QAAQ;QAE7C,OAAO;IACX;IAEA;;KAEC,GACD,SAAS,QAAQ,EAAE,OAAO,KAAK,EAAE;QAC7B,IAAI,QAAQ;YAAC;YAAW;YAAY;SAAQ;QAC5C,OAAO,SAAS,aAAa,MAAM,QAAQ,CAAC,MAAM,cAAc,OAAO;QAEvE,IAAI,CAAC,MACD,MAAM,OAAO,CAAC,CAAA,OAAQ,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG;aAE3C,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG;QAEzB,OAAO,IAAI;IACf;AAMJ;;;;ACpEO,MAAM,kDAAgC,CAAA,GAAA,yCAAS;IAClD,YAAY,UAAU,CAAC,CAAC,CAAE;QACtB,KAAK,CAAC;QACN,IAAI,CAAC,KAAK,GAAG,QAAQ,KAAK,IAAI;QAC9B,IAAI,CAAC,IAAI,GAAG,QAAQ,IAAI,IAAI;IAChC;IAEA,MAAM,QAAQ,OAAO,EAAE,MAAM,EAAE;QAC3B,IAAI,IAAI,CAAC,KAAK,EACV,QAAQ,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK;QAEvD,OAAO;IACX;IAEA,SAAS,KAAK,EAAE,OAAO,QAAQ,EAAE;QAC7B,IAAI,CAAC,KAAK,GAAG;QACb,IAAI,CAAC,IAAI,GAAG;QACZ,OAAO,IAAI;IACf;AACJ;;;;ACnBO,MAAM,kDAA2B,CAAA,GAAA,yCAAS;IAC7C,OAAO,iBAAiB;QACpB,UAAU;YACN,SAAS;QACb;IACJ,EAAE;IAEF,MAAM,QAAQ,OAAO,EAAE,MAAM,EAAE;QAC3B,IAAI,QAAQ,QAAQ,EAAE;YAClB,MAAM,WAAW,QAAQ,QAAQ;YACjC,QAAQ,KAAK,CAAC,KAAK,CAAC,SAAS,qBAAqB;QACtD;QACA,OAAO;IACX;AACJ;;;;ACdO,MAAM,kDAAuB,CAAA,GAAA,yCAAS;IACzC,OAAO,iBAAiB,CAAC,EAAE;IAE3B,MAAM,QAAQ,OAAO,EAAE,MAAM,EAAE;QAC3B,iCAAiC;QACjC,OAAO;IACX;IAEA,MAAM,SAAS,QAAQ,EAAE,MAAM,EAAE;QAC7B,iCAAiC;QACjC,OAAO;IACX;AACJ;;;;;;ACVO,MAAM,kDAAwB,CAAA,GAAA,yCAAS;IAC1C,OAAO,iBAAiB;QACpB,WAAW;YACP,kBAAkB;QACtB;IACJ,EAAE;IAEF,MAAM,QAAQ,OAAO,EAAE,MAAM,EAAE;QAC3B,IAAI,CAAC,QAAQ,KAAK,CAAC,KAAK,IAAI;YACxB,MAAM,cAAc,CAAA,GAAA,yCAAQ,EAAE,QAAQ,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS;YAC9E,MAAM,MAAM,QAAQ,GAAG,GAAG,MAAM;YAChC,UAAU,IAAI,CAAA,GAAA,yCAAW,EAAE,KAAK;QACpC;QACA,OAAO;IACX;AACJ;;;;;AChBO,MAAM,kDAA8B,CAAA,GAAA,yCAAS;IAChD,OAAO,iBAAiB,CAAC,EAAE;IAE3B,MAAM,QAAQ,OAAO,EAAE,MAAM,EAAE;QAC3B,IAAI,QAAQ,IAAI,EACZ,UAAU,IAAI,CAAA,GAAA,yCAAW,EAAE,SAAS;YAChC,MAAM,KAAK,SAAS,CAAC,QAAQ,IAAI;QACrC;QAEJ,OAAO;IACX;AACJ;;;;ACZO,MAAM,kDAA+B,CAAA,GAAA,yCAAS;IACjD,OAAO,iBAAiB,CAAC,EAAE;IAE3B,MAAM,SAAS,QAAQ,EAAE,MAAM,EAAE;QAC7B,MAAM,UAAU,SAAS,OAAO;QAEhC,IAAI,QAAQ,cAAc,CAAC,gBACvB,SAAS,IAAI,GAAG,MAAM,SAAS,WAAW;aACvC,IAAI,QAAQ,cAAc,CAAC,SAC9B,SAAS,IAAI,GAAG,MAAM,SAAS,IAAI;aAChC,IAAI,QAAQ,cAAc,CAAC,aAC9B,SAAS,IAAI,GAAG,MAAM,SAAS,QAAQ;aACpC,IAAI,QAAQ,cAAc,CAAC,SAC9B,SAAS,IAAI,GAAG,MAAM,SAAS,IAAI;aAChC,IAAI,QAAQ,cAAc,CAAC,WAC9B,SAAS,IAAI,GAAG,MAAM,SAAS,IAAI;aAChC,IAAI,QAAQ,cAAc,CAAC,SAC9B,SAAS,IAAI,GAAG,MAAM,SAAS,IAAI;QAGvC,OAAO;IACX;AACJ;;;;;AfXO,MAAM;IACT,YAAY,OAAO,CAAE;QACjB,UAAU;YACN,aAAa,EAAE;YACf,oBAAoB;gBAChB,IAAI,CAAA,GAAA,yCAAoB;gBACxB,IAAI,CAAA,GAAA,yCAAiB;gBACrB,IAAI,CAAA,GAAA,yCAAc;gBAClB,IAAI,CAAA,GAAA,yCAAqB;aAC5B;YACD,GAAG,OAAO;QACd;QAEA,IAAI,CAAC,OAAO,GAAG;YACX,SAAS;YACT,SAAS;gBACL,MAAM;gBACN,SAAS;oBACL,oBAAoB;gBACxB;YACJ;QACJ;QAEA,MAAM,eAAE,WAAW,sBAAE,kBAAkB,EAAE,GAAG,MAAM,GAAG;QACrD,IAAI,CAAC,OAAO,GAAG,CAAA,GAAA,yCAAW,EAAE,IAAI,CAAC,OAAO,EAAE;QAC1C,IAAI,CAAC,WAAW,GAAG,mBAAmB,MAAM,CAAC;QAC7C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAA,GAAA,yCAAM,EAAE,IAAI;QAC/B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAA,GAAA,yCAAM,EAAE,IAAI;IACnC;IAEA;;KAEC,GACD,IAAI,UAAU,EAAE;QACZ,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;IAC1B;IAEA;;KAEC,GACD,MAAM,QAAQ,MAAM,EAAE,GAAG,EAAE,SAAS,CAAC,CAAC,EAAE;QACpC,IAAI,MAAM,CAAA,GAAA,yCAAE,EAAE,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAA,GAAA,yCAAE,EAAE,SAAS,CAAC,KAAK;QAC1E,OAAO,MAAM,GAAG;QAChB,SAAS,CAAA,GAAA,yCAAW,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;QAE5C,IAAI,UAAU,IAAI,CAAA,GAAA,yCAAW,EAAE,KAAK;QACpC,UAAU,MAAM,CAAA,GAAA,yCAAS,EAAE,GAAG,CAAC,IAAI,EAAE,SAAS;QAE9C,OAAO,QACF,KAAK,GACL,IAAI,CAAC,OAAO;YACT,IAAI,CAAC,QAAQ,QAAQ,CAAC,EAAE,EACpB,MAAM,IAAI,CAAA,GAAA,yCAAS,EAAE;YAEzB,QAAQ,QAAQ,GAAG,MAAM,CAAA,GAAA,yCAAS,EAAE,GAAG,CAAC,IAAI,EAAE,QAAQ,QAAQ,EAAE;YAChE,OAAO,QAAQ,QAAQ;QAC3B,GACC,KAAK,CAAC,OAAM;YACT,QAAQ,MAAM,CAAA,GAAA,yCAAS,EAAE,GAAG,CAAC,IAAI,EAAE,OAAO;YAC1C,MAAM;QACV;IACR;AACJ;;;;AgBzEO,MAAM,4CAAsB;IAAC;IAAK;IAAK;IAAM;IAAM;IAAM;IAAM;IAAM;IAAM;CAAK;AAKhF,MAAM,4CAAmB;IAAC;IAAW;IAAU;IAAM;IAAO;IAAO;IAAM;IAAO;IAAO;IAAQ;IAAW;CAAS;AAKnH,MAAM,4CAAY,EAAE,CAAC,MAAM,CAAC,2CAAqB,MAAM,CAAC;AAE/D;;CAEC,GACD,MAAM,mCAAa,CAAC,QAAU,0CAAU,QAAQ,CAAC;AAK1C,MAAM;IACT,aAAc;QACV,IAAI,CAAC,UAAU,GAAG,EAAE;IACxB;IAEA,OAAO,OAAO;QACV,OAAO,IAAI,IAAI;IACnB;IAEA;;KAEC,GACD,KAAK,EAAE,EAAE;QACL,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,KAAK;IACrC;IAEA;;KAEC,GACD,QAAQ;QACJ,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB;IAEA;;KAEC,GACD,QAAQ,GAAG,EAAE,YAAY,MAAM,EAAE;QAC7B,IAAI,CAAC,YAAY,CAAC,WAAW;YAAC;YAAK;SAAU;QAC7C,OAAO,IAAI;IACf;IAEA;;KAEC,GACD,MAAM,KAAK,EAAE;QACT,IAAI,CAAC,YAAY,CAAC,SAAS;QAC3B,OAAO,IAAI;IACf;IAEA;;;;;;KAMC,GACD,MAAM,GAAG,IAAI,EAAE;QACX,IAAI,KAAK,UAAU,OAAO,SAAS;QAEnC,IAAI,KAAK,MAAM,KAAK,GAAG;YACnB,MAAM,IAAI,CAAC,EAAE;YACb,WAAW;YACX,QAAQ,IAAI,CAAC,EAAE;QACnB,OAAO,IAAI,KAAK,MAAM,KAAK,GAAG;YAC1B,MAAM,IAAI,CAAC,EAAE;YACb,WAAW,IAAI,CAAC,EAAE;YAClB,QAAQ,IAAI,CAAC,EAAE;QACnB,OAAO,IAAI,KAAK,MAAM,KAAK,GAAG;YAC1B,MAAM,IAAI,CAAC,EAAE;YACb,WAAW,IAAI,CAAC,EAAE;YAClB,QAAQ,IAAI,CAAC,EAAE;YACf,SAAS,IAAI,CAAC,EAAE;QACpB;QAEA,IAAI,CAAC,iCAAW,WACZ,MAAM,IAAI,MAAM,CAAC,2BAA2B,EAAE,SAAS,WAAW,CAAC;QAGvE,IAAI,CAAC,YAAY,CAAC,SAAS;YAAC;YAAK;YAAU;YAAO;SAAO;QACzD,OAAO,IAAI;IACf;IAEA;;KAEC,GACD,QAAQ,GAAG,IAAI,EAAE;QACb,IAAI,KAAK,UAAU;QAEnB,IAAI,KAAK,MAAM,KAAK,GAAG;YACnB,MAAM,IAAI,CAAC,EAAE;YACb,WAAW;YACX,QAAQ,IAAI,CAAC,EAAE;QACnB,OAAO;YACH,MAAM,IAAI,CAAC,EAAE;YACb,WAAW,IAAI,CAAC,EAAE;YAClB,QAAQ,IAAI,CAAC,EAAE;QACnB;QAEA,IAAI,CAAC,iCAAW,WACZ,MAAM,IAAI,MAAM,CAAC,6BAA6B,EAAE,SAAS,WAAW,CAAC;QAGzE,IAAI,CAAC,YAAY,CAAC,SAAS;YAAC;YAAK;YAAU;YAAO;SAAK;QACvD,OAAO,IAAI;IACf;IAEA;;KAEC,GACD,SAAS,WAAW,GAAG,EAAE,OAAO,CAAC,EAAE;QAC/B,IAAI,CAAC,YAAY,CAAC,YAAY;QAC9B,IAAI,CAAC,YAAY,CAAC,YAAY;QAC9B,IAAI,CAAC,YAAY,CAAC,QAAQ;QAC1B,OAAO,IAAI;IACf;IAEA;;KAEC,GACD,gBAAgB;QACZ,OAAO,IAAI,CAAC,UAAU;IAC1B;IAEA;;KAEC,GACD,cAAc,UAAU,EAAE;QACtB,IAAI,CAAC,UAAU,GAAG;QAClB,OAAO,IAAI;IACf;IAEA;;KAEC,GACD,aAAa,IAAI,EAAE,KAAK,EAAE;QACtB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;kBAAE;mBAAM;QAAM;QACnC,OAAO,IAAI;IACf;IAEA;;KAEC,GACD,wBAAwB;QACpB,OAAO,IAAI,CAAC,UAAU,CACjB,GAAG,CAAC,CAAA,KAAM;gBAAC,EAAE,CAAC,OAAO;gBAAE,EAAE,CAAC,QAAQ;aAAC,EACnC,MAAM,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,EAAE,GAAG;YACrB,IAAI,MAAM,OAAO,CAAC,IACd,KAAK,KAAK,GAAG,MAAM,CAAC,CAAA,KAAM,EAAE,CAAC,OAAO,KAAK;YAE7C,OAAO;gBAAE,GAAG,GAAG;gBAAE,CAAC,EAAE,EAAE;YAAE;QAC5B,GAAG,CAAC;IACZ;IAEA;;KAEC,GACD,UAAU;QACN,OAAO,CAAA,GAAA,yCAAkB,EAAE,IAAI,CAAC,qBAAqB;IACzD;AACJ;;;;;;;;;;AjB3JA,wCAAwC;AACxC,IAAI,OAAO,WAAW,aAClB,OAAO,WAAW,GAAG;YACjB;cACA;aACA;gBACA;kBACA;kBACA;cACA;aACA;6BACA;wBACA;oBACA;gBACA;qBACA;2BACA;4BACA;AACJ","sources":["src/index.js","src/Client.js","src/utils.js","src/Streams.js","src/Resource.js","src/Entries.js","src/FetchRequest.js","src/FetchHeaders.js","src/FetchError.js","src/middleware/index.js","src/middleware/Middleware.js","src/middleware/AuthorizationMiddleware.js","src/middleware/CriteriaMiddleware.js","src/middleware/ETagMiddleware.js","src/middleware/QueryMiddleware.js","src/middleware/RequestDataMiddleware.js","src/middleware/ResponseDataMiddleware.js","src/Criteria.js"],"sourcesContent":["export { Client } from './Client.js';\nexport { Criteria } from './Criteria.js';\nexport { Entries } from './Entries.js';\nexport { FetchError } from './FetchError.js';\nexport { FetchHeaders } from './FetchHeaders.js';\nexport { FetchRequest } from './FetchRequest.js';\nexport { Resource } from './Resource.js';\nexport { Streams } from './Streams.js';\n\nexport {\n    AuthorizationMiddleware,\n    CriteriaMiddleware,\n    ETagMiddleware,\n    Middleware,\n    QueryMiddleware,\n    RequestDataMiddleware,\n    ResponseDataMiddleware,\n} from './middleware/index.js';\n\n// Make available globally if in browser\nif (typeof window !== 'undefined') {\n    window.streams_api = {\n        Client,\n        Criteria,\n        Entries,\n        FetchError,\n        FetchHeaders,\n        FetchRequest,\n        Resource,\n        Streams,\n        AuthorizationMiddleware,\n        CriteriaMiddleware,\n        ETagMiddleware,\n        Middleware,\n        QueryMiddleware,\n        RequestDataMiddleware,\n        ResponseDataMiddleware,\n    };\n}\n","import { mergeObjects, Str } from './utils.js';\nimport { Streams } from './Streams.js';\nimport { Entries } from './Entries.js';\nimport { FetchRequest } from './FetchRequest.js';\nimport { FetchError } from './FetchError.js';\nimport {\n    CriteriaMiddleware,\n    Middleware,\n    QueryMiddleware,\n    RequestDataMiddleware,\n    ResponseDataMiddleware\n} from './middleware/index.js';\n\n/**\n * Main API Client class\n */\nexport class Client {\n    constructor(options) {\n        options = {\n            middlewares: [],\n            defaultMiddlewares: [\n                new RequestDataMiddleware(),\n                new CriteriaMiddleware(),\n                new QueryMiddleware(),\n                new ResponseDataMiddleware(),\n            ],\n            ...options,\n        };\n\n        this.options = {\n            baseURL: '',\n            request: {\n                mode: 'cors',\n                headers: {\n                    'X-Requested-With': 'XMLHttpRequest',\n                },\n            },\n        };\n\n        const { middlewares, defaultMiddlewares, ...opts } = options;\n        this.options = mergeObjects(this.options, opts);\n        this.middlewares = defaultMiddlewares.concat(middlewares);\n        this.streams = new Streams(this);\n        this.entries = new Entries(this);\n    }\n\n    /**\n     * Add a middleware to the client\n     */\n    use(middleware) {\n        this.middlewares.push(middleware);\n    }\n\n    /**\n     * Make an HTTP request\n     */\n    async request(method, uri, config = {}) {\n        let url = Str.ensureRight(this.options.baseURL, '/') + Str.stripLeft(uri, '/');\n        config.method = method;\n        config = mergeObjects(this.options.request, config);\n        \n        let request = new FetchRequest(url, config);\n        request = await Middleware.run(this, request, 'request');\n        \n        return request\n            .fetch()\n            .then(async (request) => {\n                if (!request.response.ok) {\n                    throw new FetchError(request);\n                }\n                request.response = await Middleware.run(this, request.response, 'response');\n                return request.response;\n            })\n            .catch(async error => {\n                error = await Middleware.run(this, error, 'error');\n                throw error;\n            });\n    }\n}\n","/**\n * String utility class\n */\nexport class Str {\n    static random(length = 15) {\n        let text = '';\n        const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        for (let i = 0; i < length; i++) {\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\n        }\n        return text;\n    }\n\n    static ensureLeft(str, left) {\n        if (!str.startsWith(left)) {\n            return left + str;\n        }\n        return str;\n    }\n\n    static ensureRight(str, right) {\n        if (!str.endsWith(right)) {\n            return str + right;\n        }\n        return str;\n    }\n\n    static stripLeft(str, left) {\n        if (str.startsWith(left)) {\n            return str.substring(left.length);\n        }\n        return str;\n    }\n\n    static stripRight(str, right) {\n        if (str.endsWith(right)) {\n            return str.substring(0, str.length - right.length);\n        }\n        return str;\n    }\n\n    static ucfirst(string) {\n        return string[0].toUpperCase() + string.slice(1);\n    }\n\n    static lcfirst(string) {\n        return string[0].toLowerCase() + string.slice(1);\n    }\n\n    static parameters(str, params) {\n        Object.entries(params).forEach(([key, value]) => {\n            str = str.replace(new RegExp(':' + key, 'g'), value);\n        });\n        return str;\n    }\n}\n\n/**\n * Convert array of [key, value] pairs to object\n */\nexport const objectify = (obj, [k, v]) => ({ ...obj, [k]: v });\n\n/**\n * Convert parameters to query string\n */\nexport function paramsToQueryString(params) {\n    return encodeURIComponent(btoa(JSON.stringify(params)));\n}\n\n/**\n * Deep merge objects\n */\nexport const mergeObjects = (target, ...sources) => {\n    if (!sources.length) {\n        return target;\n    }\n    const source = sources.shift();\n    if (source === undefined) {\n        return target;\n    }\n\n    if (isMergeableObject(target) && isMergeableObject(source)) {\n        Object.keys(source).forEach(function (key) {\n            if (isMergeableObject(source[key])) {\n                if (!target[key]) {\n                    target[key] = {};\n                }\n                mergeObjects(target[key], source[key]);\n            } else {\n                target[key] = source[key];\n            }\n        });\n    }\n\n    return mergeObjects(target, ...sources);\n};\n\n/**\n * Check if value is an object\n */\nexport const isObject = (item) => {\n    return item !== null && typeof item === 'object';\n};\n\n/**\n * Check if object is mergeable\n */\nconst isMergeableObject = (item) => {\n    return isObject(item) && !Array.isArray(item);\n};\n\n/**\n * Create a custom Map with additional utility methods\n */\nexport function createCustomMap(obj = {}) {\n    const map = new (class extends Map {\n        toObject() {\n            return Array.from(this.entries())\n                .map(kv => [kv[0], kv[1]])\n                .reduce(objectify, {});\n        }\n\n        toKeys() {\n            return Array.from(this.keys());\n        }\n\n        merge(obj) {\n            obj = mergeObjects(this.toObject(), obj);\n            Object.entries(obj).forEach(([k, v]) => this.set(k, v));\n            return this;\n        }\n\n        empty() {\n            return this.size === 0;\n        }\n    })();\n    \n    map.merge(obj);\n    return map;\n}\n\n/**\n * Simple query string builder (replaces 'qs' dependency)\n */\nexport function stringify(obj, options = {}) {\n    const encodeValuesOnly = options.encodeValuesOnly !== false;\n    \n    const encode = (str) => {\n        if (encodeValuesOnly) {\n            return String(str);\n        }\n        return encodeURIComponent(str);\n    };\n\n    const buildParams = (prefix, value) => {\n        if (value === null || value === undefined) {\n            return '';\n        }\n\n        if (Array.isArray(value)) {\n            return value.map((v, i) => buildParams(`${prefix}[${i}]`, v)).join('&');\n        }\n\n        if (typeof value === 'object') {\n            return Object.keys(value)\n                .map(key => buildParams(`${prefix}[${key}]`, value[key]))\n                .join('&');\n        }\n\n        return `${prefix}=${encode(value)}`;\n    };\n\n    return Object.keys(obj)\n        .map(key => {\n            const value = obj[key];\n            if (value === null || value === undefined) {\n                return '';\n            }\n            if (Array.isArray(value) || typeof value === 'object') {\n                return buildParams(key, value);\n            }\n            return `${key}=${encode(value)}`;\n        })\n        .filter(Boolean)\n        .join('&');\n}\n","import { Resource } from './Resource.js';\n\n/**\n * Streams resource class for managing streams\n */\nexport class Streams extends Resource {\n    async get(config = {}) {\n        return this.client.request('get', '/streams', config);\n    }\n\n    async find(stream, config = {}) {\n        return this.client.request('get', `/streams/${stream}`, config);\n    }\n\n    async post(data, config = {}) {\n        return this.client.request('post', '/streams', config);\n    }\n\n    async patch(config = {}) {\n        return this.client.request('patch', '/streams', config);\n    }\n\n    async put(config = {}) {\n        return this.client.request('put', '/streams', config);\n    }\n\n    async delete(stream, config = {}) {\n        return this.client.request('delete', `/streams/${stream}`, config);\n    }\n}\n","/**\n * Base Resource class\n */\nexport class Resource {\n    constructor(client) {\n        this.client = client;\n    }\n}\n","import { Resource } from './Resource.js';\n\n/**\n * Entries resource class for managing stream entries\n */\nexport class Entries extends Resource {\n    async get(stream, config = {}) {\n        return this.client.request('get', `/streams/${stream}/entries`, config);\n    }\n\n    async find(stream, entry, config = {}) {\n        return this.client.request('get', `/streams/${stream}/entries/${entry}`, config);\n    }\n\n    async post(stream, data, config = {}) {\n        config.data = data;\n        return this.client.request('post', `/streams/${stream}/entries`, config);\n    }\n\n    async patch(stream, entry, data, config = {}) {\n        config.data = data;\n        return this.client.request('patch', `/streams/${stream}/entries/${entry}`, config);\n    }\n\n    async put(stream, entry, data, config = {}) {\n        config.data = data;\n        return this.client.request('put', `/streams/${stream}/entries/${entry}`, config);\n    }\n\n    async delete(stream, entry, config = {}) {\n        return this.client.request('delete', `/streams/${stream}/entries/${entry}`, config);\n    }\n}\n","import { FetchHeaders } from './FetchHeaders.js';\nimport { createCustomMap } from './utils.js';\n\n/**\n * Extended Request class with additional functionality\n */\nexport class FetchRequest extends Request {\n    constructor(input, init = {}) {\n        super(input, init);\n        \n        this.responseType = init.responseType || 'json';\n        this.query = createCustomMap(init.query || {});\n        this.criteria = init.criteria;\n        this.data = init.data;\n        this.response = null;\n\n        // Create custom headers\n        Object.defineProperty(this, 'headers', {\n            value: new FetchHeaders(init.headers),\n            writable: false,\n        });\n    }\n\n    isResponseType(responseType) {\n        return this.responseType === responseType;\n    }\n\n    async fetch() {\n        const response = await fetch(this.url, this);\n        this.response = response;\n        response.request = this;\n        return this;\n    }\n\n    setUrl(url) {\n        Object.defineProperty(this, 'url', { value: url, writable: false });\n        return this;\n    }\n}\n","import { objectify } from './utils.js';\n\n/**\n * Custom Headers class with convenient methods\n */\nexport class FetchHeaders extends Headers {\n    constructor(init) {\n        super(init && init instanceof FetchHeaders ? init.toObject() : init);\n    }\n\n    accept(mime) {\n        this.set('Accept', mime);\n        return this;\n    }\n\n    contentType(mime) {\n        this.set('Content-Type', mime);\n        return this;\n    }\n\n    ifNoneMatch(etag) {\n        this.set('If-None-Match', etag);\n        return this;\n    }\n\n    basic(...args) {\n        return this.authorization('Basic', args[1] === undefined ? args[0] : btoa(args[0] + ':' + args[1]));\n    }\n\n    bearer(token) {\n        return this.authorization('Bearer', token);\n    }\n\n    authorization(key, value) {\n        this.set('Authorization', key + ' ' + value);\n        return this;\n    }\n\n    toObject() {\n        const result = {};\n        this.forEach((value, key) => {\n            result[key] = value;\n        });\n        return result;\n    }\n}\n","/**\n * Custom error for HTTP fetch failures\n */\nexport class FetchError extends Error {\n    constructor(request) {\n        super(`HTTP ${request.response.status} error:\\n ${request.response.statusText}`);\n        this.request = request;\n        this.status = request.response.status;\n        this.statusText = request.response.statusText;\n        this.url = request.response.url;\n    }\n\n    get response() {\n        return this.request.response;\n    }\n}\n","export { Middleware } from './Middleware.js';\nexport { AuthorizationMiddleware } from './AuthorizationMiddleware.js';\nexport { CriteriaMiddleware } from './CriteriaMiddleware.js';\nexport { ETagMiddleware } from './ETagMiddleware.js';\nexport { QueryMiddleware } from './QueryMiddleware.js';\nexport { RequestDataMiddleware } from './RequestDataMiddleware.js';\nexport { ResponseDataMiddleware } from './ResponseDataMiddleware.js';\n","import { isObject, mergeObjects } from '../utils.js';\n\n/**\n * Base Middleware class\n */\nexport class Middleware {\n    static defaultOptions = {\n        priority: {\n            request: 50,\n            response: 50,\n            error: 50,\n        }\n    };\n\n    constructor(options = {}) {\n        this.options = this.constructor.getDefaultOptions(this.constructor, options);\n    }\n\n    /**\n     * Get middlewares for a specific kind sorted by priority\n     */\n    static get(middlewares, kind) {\n        return middlewares\n            .filter(middleware => typeof middleware[kind] === 'function')\n            .sort((a, b) => {\n                return a.options.priority[kind] - b.options.priority[kind];\n            });\n    }\n\n    /**\n     * Run all middlewares of a specific kind\n     */\n    static async run(client, target, kind) {\n        const middlewares = Middleware.get(client.middlewares, kind);\n        for (const middleware of middlewares) {\n            target = await middleware[kind](target, client);\n        }\n        return target;\n    }\n\n    /**\n     * Get default options with inheritance\n     */\n    static getDefaultOptions(t, options = {}) {\n        if (isObject(t.defaultOptions)) {\n            options = mergeObjects(t.defaultOptions, options);\n        }\n        let parent = Object.getPrototypeOf(t);\n        if (parent && isObject(parent.defaultOptions)) {\n            options = this.getDefaultOptions(parent, options);\n        }\n        return options;\n    }\n\n    /**\n     * Set priority for middleware execution\n     */\n    priority(priority, kind = false) {\n        let kinds = ['request', 'response', 'error'];\n        kind = kind !== undefined && kinds.includes(kind?.toString()) ? kind : false;\n\n        if (!kind) {\n            kinds.forEach(kind => this.options[kind] = priority);\n        } else {\n            this.options[kind] = priority;\n        }\n        return this;\n    }\n\n    // Optional methods to be implemented by subclasses:\n    // async request(request, client) { return request; }\n    // async response(response, client) { return response; }\n    // async error(error, client) { return error; }\n}\n","import { Middleware } from './Middleware.js';\n\n/**\n * Middleware to handle authorization headers\n */\nexport class AuthorizationMiddleware extends Middleware {\n    constructor(options = {}) {\n        super(options);\n        this.token = options.token || null;\n        this.type = options.type || 'Bearer';\n    }\n\n    async request(request, client) {\n        if (this.token) {\n            request.headers.authorization(this.type, this.token);\n        }\n        return request;\n    }\n\n    setToken(token, type = 'Bearer') {\n        this.token = token;\n        this.type = type;\n        return this;\n    }\n}\n","import { Middleware } from './Middleware.js';\n\n/**\n * Middleware to handle criteria parameters\n */\nexport class CriteriaMiddleware extends Middleware {\n    static defaultOptions = {\n        priority: {\n            request: 40,\n        },\n    };\n\n    async request(request, client) {\n        if (request.criteria) {\n            const criteria = request.criteria;\n            request.query.merge(criteria.standardizeParameters());\n        }\n        return request;\n    }\n}\n","import { Middleware } from './Middleware.js';\n\n/**\n * Middleware to handle ETag caching\n */\nexport class ETagMiddleware extends Middleware {\n    static defaultOptions = {};\n\n    async request(request, client) {\n        // ETag support can be added here\n        return request;\n    }\n\n    async response(response, client) {\n        // ETag support can be added here\n        return response;\n    }\n}\n","import { Middleware } from './Middleware.js';\nimport { stringify } from '../utils.js';\nimport { FetchRequest } from '../FetchRequest.js';\n\n/**\n * Middleware to convert query parameters to query string\n */\nexport class QueryMiddleware extends Middleware {\n    static defaultOptions = {\n        stringify: {\n            encodeValuesOnly: true,\n        },\n    };\n\n    async request(request, client) {\n        if (!request.query.empty()) {\n            const queryString = stringify(request.query.toObject(), this.options.stringify);\n            const url = request.url + '?' + queryString;\n            request = new FetchRequest(url, request);\n        }\n        return request;\n    }\n}\n","import { Middleware } from './Middleware.js';\nimport { FetchRequest } from '../FetchRequest.js';\n\n/**\n * Middleware to handle request data/body\n */\nexport class RequestDataMiddleware extends Middleware {\n    static defaultOptions = {};\n\n    async request(request, client) {\n        if (request.data) {\n            request = new FetchRequest(request, {\n                body: JSON.stringify(request.data)\n            });\n        }\n        return request;\n    }\n}\n","import { Middleware } from './Middleware.js';\n\n/**\n * Middleware to parse response data based on responseType\n */\nexport class ResponseDataMiddleware extends Middleware {\n    static defaultOptions = {};\n\n    async response(response, client) {\n        const request = response.request;\n        \n        if (request.isResponseType('arraybuffer')) {\n            response.data = await response.arrayBuffer();\n        } else if (request.isResponseType('blob')) {\n            response.data = await response.blob();\n        } else if (request.isResponseType('document')) {\n            response.data = await response.formData();\n        } else if (request.isResponseType('json')) {\n            response.data = await response.json();\n        } else if (request.isResponseType('stream')) {\n            response.data = await response.body;\n        } else if (request.isResponseType('text')) {\n            response.data = await response.text();\n        }\n        \n        return response;\n    }\n}\n","import { paramsToQueryString } from './utils.js';\n\n/**\n * Comparison operators\n */\nexport const comparisonOperators = ['>', '<', '==', '!=', '>=', '<=', '!<', '!>', '<>'];\n\n/**\n * Logical operators\n */\nexport const logicalOperators = ['BETWEEN', 'EXISTS', 'OR', 'AND', 'NOT', 'IN', 'ALL', 'ANY', 'LIKE', 'IS NULL', 'UNIQUE'];\n\n/**\n * All operators\n */\nexport const operators = [].concat(comparisonOperators).concat(logicalOperators);\n\n/**\n * Check if value is a valid operator\n */\nconst isOperator = (value) => operators.includes(value);\n\n/**\n * Criteria builder class - similar to PHP Laravel query builder\n */\nexport class Criteria {\n    constructor() {\n        this.parameters = [];\n    }\n\n    static make() {\n        return new this();\n    }\n\n    /**\n     * Find an entry by ID\n     */\n    find(id) {\n        return this.where('id', id).first();\n    }\n\n    /**\n     * Return the first result\n     */\n    first() {\n        return this.limit(1);\n    }\n\n    /**\n     * Order the query by field/direction\n     */\n    orderBy(key, direction = 'desc') {\n        this.addParameter('orderBy', [key, direction]);\n        return this;\n    }\n\n    /**\n     * Limit the entries returned\n     */\n    limit(value) {\n        this.addParameter('limit', value);\n        return this;\n    }\n\n    /**\n     * Constrain the query by field, operator, value\n     * Supports multiple signatures:\n     * - where(key, value)\n     * - where(key, operator, value)\n     * - where(key, operator, value, nested)\n     */\n    where(...args) {\n        let key, operator, value, nested = null;\n\n        if (args.length === 2) {\n            key = args[0];\n            operator = '==';\n            value = args[1];\n        } else if (args.length === 3) {\n            key = args[0];\n            operator = args[1];\n            value = args[2];\n        } else if (args.length === 4) {\n            key = args[0];\n            operator = args[1];\n            value = args[2];\n            nested = args[3];\n        }\n\n        if (!isOperator(operator)) {\n            throw new Error(`Criteria where() operator \"${operator}\" not valid`);\n        }\n\n        this.addParameter('where', [key, operator, value, nested]);\n        return this;\n    }\n\n    /**\n     * Add an OR WHERE clause\n     */\n    orWhere(...args) {\n        let key, operator, value;\n\n        if (args.length === 2) {\n            key = args[0];\n            operator = '==';\n            value = args[1];\n        } else {\n            key = args[0];\n            operator = args[1];\n            value = args[2];\n        }\n\n        if (!isOperator(operator)) {\n            throw new Error(`Criteria orWhere() operator \"${operator}\" not valid`);\n        }\n\n        this.addParameter('where', [key, operator, value, 'or']);\n        return this;\n    }\n\n    /**\n     * Get paginated criteria results\n     */\n    paginate(per_page = 100, page = 1) {\n        this.addParameter('paginate', true);\n        this.addParameter('per_page', per_page);\n        this.addParameter('page', page);\n        return this;\n    }\n\n    /**\n     * Get the parameters\n     */\n    getParameters() {\n        return this.parameters;\n    }\n\n    /**\n     * Set the parameters\n     */\n    setParameters(parameters) {\n        this.parameters = parameters;\n        return this;\n    }\n\n    /**\n     * Add a parameter\n     */\n    addParameter(name, value) {\n        this.parameters.push({ name, value });\n        return this;\n    }\n\n    /**\n     * Return standardized parameters\n     */\n    standardizeParameters() {\n        return this.parameters\n            .map(kv => [kv['name'], kv['value']])\n            .reduce((obj, [k, v], i, data) => {\n                if (Array.isArray(v)) {\n                    data.slice().filter(kv => kv['name'] === k);\n                }\n                return { ...obj, [k]: v };\n            }, {});\n    }\n\n    /**\n     * Compile criteria to query string\n     */\n    compile() {\n        return paramsToQueryString(this.standardizeParameters());\n    }\n}\n"],"names":[],"version":3,"file":"module.js.map"}