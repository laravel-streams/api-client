/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)};function r(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(e){i(e)}}function u(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var i=function(){function t(t,e,n){return void 0===e&&(e={}),void 0===n&&(n=!0),this._stream=t,this._data=e,this._fresh=n,new Proxy(this,{get:function(t,e,n){return Reflect.has(t,e)?Reflect.get(t,e,n):Reflect.has(t._data,e)?Reflect.get(t._data,e):void 0},set:function(t,e,n,r){return Reflect.has(t,e)?Reflect.set(t,e,n,r):Reflect.set(t._data,e,n)}})}return Object.defineProperty(t.prototype,"http",{get:function(){return this._stream.streams.http},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stream",{get:function(){return this._stream},enumerable:!1,configurable:!0}),t.prototype.save=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),this._fresh?[4,this.http.postEntry(this._stream.id,this._data)]:[3,2];case 1:case 3:return t.sent(),[2,!0];case 2:return[4,this.http.patchEntry(this._stream.id,this._data.id,this._data)];case 4:return t.sent(),[2,!1];case 5:return[2]}}))}))},t.prototype.validator=function(){},t}(),s=function(t){function n(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(this,e)||this;return Object.setPrototypeOf(r,Array.prototype),r}return e(n,t),n}(Array),u=function(t){function n(e,n,r){var o=t.apply(this,e)||this;return o.meta=n,o.links=r,o}return e(n,t),n.fromResponse=function(t,e){return new n(Object.values(t.data).map((function(t){return new i(e,t,!1)})),t.meta,t.links)},n}(s),c=function(t){function n(e,n,r){var o=t.apply(this,e)||this;return o.meta=n,o.links=r,o}return e(n,t),n.fromResponse=function(t,e){return new n(Object.values(t.data).map((function(t){return new i(e,t,!1)})),t.meta,t.links)},n}(s),a=[">","<","==","!=",">=","<=","!<","!>","<>"],p=["BETWEEN","EXISTS","OR","AND","NOT","IN","ALL","ANY","LIKE","IS NULL","UNIQUE"],l=[].concat(a).concat(p),f=function(t){return l.includes(t)},h=function(){function t(t){this.stream=t,this.parameters=[]}return Object.defineProperty(t.prototype,"http",{get:function(){return this.stream.streams.http},enumerable:!1,configurable:!0}),t.prototype.find=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2,this.where("id",t).first()]}))}))},t.prototype.first=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.limit(1).get()];case 1:return[2,t.sent()[0]]}}))}))},t.prototype.cache=function(){return this},t.prototype.orderBy=function(t,e){return void 0===e&&(e="desc"),this.addParameter("orderBy",[t,e]),this},t.prototype.limit=function(t){return this.addParameter("limit",t),this},t.prototype.where=function(){for(var t,e,n,r,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(2===o.length?(t=o[0],e="==",n=o[1]):3===o.length?(t=o[0],e=o[1],n=o[2]):4===o.length&&(t=o[0],e=o[1],n=o[2],r=o[3]),!f(e))throw new Error('Criteria where() operator "'+e+'" not valid ');return this.addParameter("where",[t,e,n,r]),this},t.prototype.orWhere=function(){for(var t,e,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(2===r.length?(t=r[0],e="==",n=r[1]):(t=r[0],e=r[1],n=r[2]),!f(e))throw new Error('Criteria orWhere() operator "'+e+'" not valid ');return this.addParameter("where",[t,e,n,"or"]),this},t.prototype.get=function(){return r(this,void 0,void 0,(function(){var t,e;return o(this,(function(n){switch(n.label){case 0:return t=this.compileStatements(),[4,this.http.getEntries(this.stream.id,{query:t},{})];case 1:return e=n.sent(),[2,u.fromResponse(e,this.stream)]}}))}))},t.prototype.create=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,(e=this.newInstance(t)).save()];case 1:return n.sent(),[2,e]}}))}))},t.prototype.save=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,t.save()];case 1:return[2,e.sent()]}}))}))},t.prototype.delete=function(){return this},t.prototype.paginate=function(t,e){return void 0===t&&(t=100),void 0===e&&(e=1),r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return n=this.compileStatements(),[4,this.http.getEntries(this.stream.id,{query:n},{paginate:!0,per_page:t,page:e})];case 1:return r=o.sent(),[2,c.fromResponse(r,this.stream)]}}))}))},t.prototype.newInstance=function(t){return new i(this.stream,t,!0)},t.prototype.getParameters=function(){return this.parameters},t.prototype.setParameters=function(t){return this.parameters=t,this},t.prototype.addParameter=function(t,e){return this.parameters.push({name:t,value:e}),this},t.prototype.compileStatements=function(){return this.parameters.map((function(t){var e,n;return(e={})[t.name]=(n=t.value,Array.isArray(n)?n:[n]),e}))},t}(),d=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===y}(t)}(t)};var y="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function v(t,e){return!1!==e.clone&&e.isMergeableObject(t)?_(Array.isArray(t)?[]:{},t,e):t}function g(t,e,n){return t.concat(e).map((function(t){return v(t,n)}))}function m(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function w(t,e){try{return e in t}catch(n){return!1}}function b(t,e,n){var r={};return n.isMergeableObject(t)&&m(t).forEach((function(e){r[e]=v(t[e],n)})),m(e).forEach((function(o){(function(t,e){return w(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(r[o]=w(t,o)&&n.isMergeableObject(e[o])?function(t,e){if(!e.customMerge)return _;var n=e.customMerge(t);return"function"==typeof n?n:_}(o,n)(t[o],e[o],n):v(e[o],n))})),r}function _(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||g,n.isMergeableObject=n.isMergeableObject||d,n.cloneUnlessOtherwiseSpecified=v;var r=Array.isArray(e);return r===Array.isArray(t)?r?n.arrayMerge(t,e,n):b(t,e,n):v(e,n)}_.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return _(t,n,e)}),{})};var E=_;function O(t,e){return t(e={exports:{}},e.exports),e.exports}var P=function(t){return t instanceof Buffer},$=O((function(t){t.exports="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}})),k=j,S=O((function(t){try{if("function"!=typeof k.inherits)throw"";t.exports=k.inherits}catch(e){t.exports=$}})),j=O((function(t,e){var n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},r=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var o=arguments,i=o.length,u=String(t).replace(r,(function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return t}})),c=o[n];n<i;c=o[++n])d(c)||!w(c)?u+=" "+c:u+=" "+s(c);return u},e.deprecate=function(t,n){if("undefined"!=typeof process&&!0===process.noDeprecation)return t;if("undefined"==typeof process)return function(){return e.deprecate(t,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),r=!0}return t.apply(this,arguments)}};var o,i={};function s(t,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&e._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),a(r,t,r.depth)}function u(t,e){var n=s.styles[e];return n?"["+s.colors[n][0]+"m"+t+"["+s.colors[n][1]+"m":t}function c(t,e){return t}function a(t,n,r){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return v(o)||(o=a(t,o,r)),o}var i=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(v(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(y(e))return t.stylize(""+e,"number");if(h(e))return t.stylize(""+e,"boolean");if(d(e))return t.stylize("null","null")}(t,n);if(i)return i;var s=Object.keys(n),u=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),_(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(n);if(0===s.length){if(E(n))return t.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(m(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(b(n))return t.stylize(Date.prototype.toString.call(n),"date");if(_(n))return p(n)}var c,w="",O=!1,P=["{","}"];(f(n)&&(O=!0,P=["[","]"]),E(n))&&(w=" [Function"+(n.name?": "+n.name:"")+"]");return m(n)&&(w=" "+RegExp.prototype.toString.call(n)),b(n)&&(w=" "+Date.prototype.toUTCString.call(n)),_(n)&&(w=" "+p(n)),0!==s.length||O&&0!=n.length?r<0?m(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=O?function(t,e,n,r,o){for(var i=[],s=0,u=e.length;s<u;++s)R(e,String(s))?i.push(l(t,e,n,r,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(l(t,e,n,r,o,!0))})),i}(t,n,r,u,s):s.map((function(e){return l(t,n,r,u,e,O)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,w,P)):P[0]+w+P[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,o,i){var s,u,c;if((c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?u=t.stylize(c.set?"[Getter/Setter]":"[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),R(r,o)||(s="["+o+"]"),u||(t.seen.indexOf(c.value)<0?(u=d(n)?a(t,c.value,null):a(t,c.value,n-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+u.split("\n").map((function(t){return"   "+t})).join("\n")):u=t.stylize("[Circular]","special")),g(s)){if(i&&o.match(/^\d+$/))return u;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+u}function f(t){return Array.isArray(t)}function h(t){return"boolean"==typeof t}function d(t){return null===t}function y(t){return"number"==typeof t}function v(t){return"string"==typeof t}function g(t){return void 0===t}function m(t){return w(t)&&"[object RegExp]"===O(t)}function w(t){return"object"==typeof t&&null!==t}function b(t){return w(t)&&"[object Date]"===O(t)}function _(t){return w(t)&&("[object Error]"===O(t)||t instanceof Error)}function E(t){return"function"==typeof t}function O(t){return Object.prototype.toString.call(t)}function $(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(g(o)&&(o=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!i[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=process.pid;i[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else i[t]=function(){};return i[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=h,e.isNull=d,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=v,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=g,e.isRegExp=m,e.isObject=w,e.isDate=b,e.isError=_,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=P;var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(){var t=new Date,e=[$(t.getHours()),$(t.getMinutes()),$(t.getSeconds())].join(":");return[t.getDate(),k[t.getMonth()],e].join(" ")}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",j(),e.format.apply(e,arguments))},e.inherits=S,e._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var x="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function A(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(x&&t[x]){var e;if("function"!=typeof(e=t[x]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,x,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,o)}catch(s){n(s)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),x&&Object.defineProperty(e,x,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,n(t))},e.promisify.custom=x,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n]);var r=e.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return r.apply(o,arguments)};t.apply(this,e).then((function(t){process.nextTick(i,null,t)}),(function(t){process.nextTick(A,t,i)}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,n(t)),e}}));const R=k.deprecate((()=>{}),"Hook.context is deprecated and will be removed"),x=function(...t){return this.call=this._createCall("sync"),this.call(...t)},A=function(...t){return this.callAsync=this._createCall("async"),this.callAsync(...t)},T=function(...t){return this.promise=this._createCall("promise"),this.promise(...t)};class D{constructor(t=[],e){this._args=t,this.name=e,this.taps=[],this.interceptors=[],this._call=x,this.call=x,this._callAsync=A,this.callAsync=A,this._promise=T,this.promise=T,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}compile(t){throw new Error("Abstract: should be overridden")}_createCall(t){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:t})}_tap(t,e,n){if("string"==typeof e)e={name:e.trim()};else if("object"!=typeof e||null===e)throw new Error("Invalid tap options");if("string"!=typeof e.name||""===e.name)throw new Error("Missing name for tap");void 0!==e.context&&R(),e=Object.assign({type:t,fn:n},e),e=this._runRegisterInterceptors(e),this._insert(e)}tap(t,e){this._tap("sync",t,e)}tapAsync(t,e){this._tap("async",t,e)}tapPromise(t,e){this._tap("promise",t,e)}_runRegisterInterceptors(t){for(const e of this.interceptors)if(e.register){const n=e.register(t);void 0!==n&&(t=n)}return t}withOptions(t){const e=e=>Object.assign({},t,"string"==typeof e?{name:e}:e);return{name:this.name,tap:(t,n)=>this.tap(e(t),n),tapAsync:(t,n)=>this.tapAsync(e(t),n),tapPromise:(t,n)=>this.tapPromise(e(t),n),intercept:t=>this.intercept(t),isUsed:()=>this.isUsed(),withOptions:t=>this.withOptions(e(t))}}isUsed(){return this.taps.length>0||this.interceptors.length>0}intercept(t){if(this._resetCompilation(),this.interceptors.push(Object.assign({},t)),t.register)for(let e=0;e<this.taps.length;e++)this.taps[e]=t.register(this.taps[e])}_resetCompilation(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}_insert(t){let e;this._resetCompilation(),"string"==typeof t.before?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));let n=0;"number"==typeof t.stage&&(n=t.stage);let r=this.taps.length;for(;r>0;){r--;const t=this.taps[r];this.taps[r+1]=t;const o=t.stage||0;if(e){if(e.has(t.name)){e.delete(t.name);continue}if(e.size>0)continue}if(!(o>n)){r++;break}}this.taps[r]=t}}Object.setPrototypeOf(D.prototype,null);var I=D;var H=class{constructor(t){this.config=t,this.options=void 0,this._args=void 0}create(t){let e;switch(this.init(t),this.options.type){case"sync":e=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:t=>`throw ${t};\n`,onResult:t=>`return ${t};\n`,resultReturns:!0,onDone:()=>"",rethrowIfPossible:!0}));break;case"async":e=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:t=>`_callback(${t});\n`,onResult:t=>`_callback(null, ${t});\n`,onDone:()=>"_callback();\n"}));break;case"promise":let t=!1;const n=this.contentWithInterceptors({onError:e=>(t=!0,`_error(${e});\n`),onResult:t=>`_resolve(${t});\n`,onDone:()=>"_resolve();\n"});let r="";r+='"use strict";\n',r+=this.header(),r+="return new Promise((function(_resolve, _reject) {\n",t&&(r+="var _sync = true;\n",r+="function _error(_err) {\n",r+="if(_sync)\n",r+="_resolve(Promise.resolve().then((function() { throw _err; })));\n",r+="else\n",r+="_reject(_err);\n",r+="};\n"),r+=n,t&&(r+="_sync = false;\n"),r+="}));\n",e=new Function(this.args(),r)}return this.deinit(),e}setup(t,e){t._x=e.taps.map((t=>t.fn))}init(t){this.options=t,this._args=t.args.slice()}deinit(){this.options=void 0,this._args=void 0}contentWithInterceptors(t){if(this.options.interceptors.length>0){const e=t.onError,n=t.onResult,r=t.onDone;let o="";for(let t=0;t<this.options.interceptors.length;t++){const e=this.options.interceptors[t];e.call&&(o+=`${this.getInterceptor(t)}.call(${this.args({before:e.context?"_context":void 0})});\n`)}return o+=this.content(Object.assign(t,{onError:e&&(t=>{let n="";for(let e=0;e<this.options.interceptors.length;e++){this.options.interceptors[e].error&&(n+=`${this.getInterceptor(e)}.error(${t});\n`)}return n+=e(t),n}),onResult:n&&(t=>{let e="";for(let n=0;n<this.options.interceptors.length;n++){this.options.interceptors[n].result&&(e+=`${this.getInterceptor(n)}.result(${t});\n`)}return e+=n(t),e}),onDone:r&&(()=>{let t="";for(let e=0;e<this.options.interceptors.length;e++){this.options.interceptors[e].done&&(t+=`${this.getInterceptor(e)}.done();\n`)}return t+=r(),t})})),o}return this.content(t)}header(){let t="";return this.needContext()?t+="var _context = {};\n":t+="var _context;\n",t+="var _x = this._x;\n",this.options.interceptors.length>0&&(t+="var _taps = this.taps;\n",t+="var _interceptors = this.interceptors;\n"),t}needContext(){for(const t of this.options.taps)if(t.context)return!0;return!1}callTap(t,{onError:e,onResult:n,onDone:r,rethrowIfPossible:o}){let i="",s=!1;for(let c=0;c<this.options.interceptors.length;c++){const e=this.options.interceptors[c];e.tap&&(s||(i+=`var _tap${t} = ${this.getTap(t)};\n`,s=!0),i+=`${this.getInterceptor(c)}.tap(${e.context?"_context, ":""}_tap${t});\n`)}i+=`var _fn${t} = ${this.getTapFn(t)};\n`;const u=this.options.taps[t];switch(u.type){case"sync":o||(i+=`var _hasError${t} = false;\n`,i+="try {\n"),i+=n?`var _result${t} = _fn${t}(${this.args({before:u.context?"_context":void 0})});\n`:`_fn${t}(${this.args({before:u.context?"_context":void 0})});\n`,o||(i+="} catch(_err) {\n",i+=`_hasError${t} = true;\n`,i+=e("_err"),i+="}\n",i+=`if(!_hasError${t}) {\n`),n&&(i+=n(`_result${t}`)),r&&(i+=r()),o||(i+="}\n");break;case"async":let s="";s+=n?`(function(_err${t}, _result${t}) {\n`:`(function(_err${t}) {\n`,s+=`if(_err${t}) {\n`,s+=e(`_err${t}`),s+="} else {\n",n&&(s+=n(`_result${t}`)),r&&(s+=r()),s+="}\n",s+="})",i+=`_fn${t}(${this.args({before:u.context?"_context":void 0,after:s})});\n`;break;case"promise":i+=`var _hasResult${t} = false;\n`,i+=`var _promise${t} = _fn${t}(${this.args({before:u.context?"_context":void 0})});\n`,i+=`if (!_promise${t} || !_promise${t}.then)\n`,i+=`  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${t} + ')');\n`,i+=`_promise${t}.then((function(_result${t}) {\n`,i+=`_hasResult${t} = true;\n`,n&&(i+=n(`_result${t}`)),r&&(i+=r()),i+=`}), function(_err${t}) {\n`,i+=`if(_hasResult${t}) throw _err${t};\n`,i+=e(`_err${t}`),i+="});\n"}return i}callTapsSeries({onError:t,onResult:e,resultReturns:n,onDone:r,doneReturns:o,rethrowIfPossible:i}){if(0===this.options.taps.length)return r();const s=this.options.taps.findIndex((t=>"sync"!==t.type)),u=n||o;let c="",a=r,p=0;for(let l=this.options.taps.length-1;l>=0;l--){const n=l;a!==r&&("sync"!==this.options.taps[n].type||p++>20)&&(p=0,c+=`function _next${n}() {\n`,c+=a(),c+="}\n",a=()=>`${u?"return ":""}_next${n}();\n`);const o=a,f=t=>t?"":r(),h=this.callTap(n,{onError:e=>t(n,e,o,f),onResult:e&&(t=>e(n,t,o,f)),onDone:!e&&o,rethrowIfPossible:i&&(s<0||n<s)});a=()=>h}return c+=a(),c}callTapsLooping({onError:t,onDone:e,rethrowIfPossible:n}){if(0===this.options.taps.length)return e();const r=this.options.taps.every((t=>"sync"===t.type));let o="";r||(o+="var _looper = (function() {\n",o+="var _loopAsync = false;\n"),o+="var _loop;\n",o+="do {\n",o+="_loop = false;\n";for(let i=0;i<this.options.interceptors.length;i++){const t=this.options.interceptors[i];t.loop&&(o+=`${this.getInterceptor(i)}.loop(${this.args({before:t.context?"_context":void 0})});\n`)}return o+=this.callTapsSeries({onError:t,onResult:(t,e,n,o)=>{let i="";return i+=`if(${e} !== undefined) {\n`,i+="_loop = true;\n",r||(i+="if(_loopAsync) _looper();\n"),i+=o(!0),i+="} else {\n",i+=n(),i+="}\n",i},onDone:e&&(()=>{let t="";return t+="if(!_loop) {\n",t+=e(),t+="}\n",t}),rethrowIfPossible:n&&r}),o+="} while(_loop);\n",r||(o+="_loopAsync = true;\n",o+="});\n",o+="_looper();\n"),o}callTapsParallel({onError:t,onResult:e,onDone:n,rethrowIfPossible:r,onTap:o=((t,e)=>e())}){if(this.options.taps.length<=1)return this.callTapsSeries({onError:t,onResult:e,onDone:n,rethrowIfPossible:r});let i="";i+="do {\n",i+=`var _counter = ${this.options.taps.length};\n`,n&&(i+="var _done = (function() {\n",i+=n(),i+="});\n");for(let s=0;s<this.options.taps.length;s++){const u=()=>n?"if(--_counter === 0) _done();\n":"--_counter;",c=t=>t||!n?"_counter = 0;\n":"_counter = 0;\n_done();\n";i+="if(_counter <= 0) break;\n",i+=o(s,(()=>this.callTap(s,{onError:e=>{let n="";return n+="if(_counter > 0) {\n",n+=t(s,e,u,c),n+="}\n",n},onResult:e&&(t=>{let n="";return n+="if(_counter > 0) {\n",n+=e(s,t,u,c),n+="}\n",n}),onDone:!e&&(()=>u()),rethrowIfPossible:r})),u,c)}return i+="} while(false);\n",i}args({before:t,after:e}={}){let n=this._args;return t&&(n=[t].concat(n)),e&&(n=n.concat(e)),0===n.length?"":n.join(", ")}getTapFn(t){return`_x[${t}]`}getTap(t){return`_taps[${t}]`}getInterceptor(t){return`_interceptors[${t}]`}};const C=new class extends H{content({onError:t,onDone:e,rethrowIfPossible:n}){return this.callTapsSeries({onError:(e,n)=>t(n),onDone:e,rethrowIfPossible:n})}},q=()=>{throw new Error("tapAsync is not supported on a SyncHook")},M=()=>{throw new Error("tapPromise is not supported on a SyncHook")},z=function(t){return C.setup(this,t),C.create(t)};function U(t=[],e){const n=new I(t,e);return n.constructor=U,n.tapAsync=q,n.tapPromise=M,n.compile=z,n}U.prototype=null;var N=U;const L=new class extends H{content({onError:t,onResult:e,resultReturns:n,onDone:r,rethrowIfPossible:o}){return this.callTapsSeries({onError:(e,n)=>t(n),onResult:(t,n,r)=>`if(${n} !== undefined) {\n${e(n)};\n} else {\n${r()}}\n`,resultReturns:n,onDone:r,rethrowIfPossible:o})}},W=()=>{throw new Error("tapAsync is not supported on a SyncBailHook")},B=()=>{throw new Error("tapPromise is not supported on a SyncBailHook")},F=function(t){return L.setup(this,t),L.create(t)};function J(t=[],e){const n=new I(t,e);return n.constructor=J,n.tapAsync=W,n.tapPromise=B,n.compile=F,n}J.prototype=null;var G=J;const X=new class extends H{content({onError:t,onResult:e,resultReturns:n,rethrowIfPossible:r}){return this.callTapsSeries({onError:(e,n)=>t(n),onResult:(t,e,n)=>{let r="";return r+=`if(${e} !== undefined) {\n`,r+=`${this._args[0]} = ${e};\n`,r+="}\n",r+=n(),r},onDone:()=>e(this._args[0]),doneReturns:n,rethrowIfPossible:r})}},Z=()=>{throw new Error("tapAsync is not supported on a SyncWaterfallHook")},K=()=>{throw new Error("tapPromise is not supported on a SyncWaterfallHook")},Q=function(t){return X.setup(this,t),X.create(t)};function Y(t=[],e){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const n=new I(t,e);return n.constructor=Y,n.tapAsync=Z,n.tapPromise=K,n.compile=Q,n}Y.prototype=null;var V=Y;const tt=new class extends H{content({onError:t,onDone:e,rethrowIfPossible:n}){return this.callTapsLooping({onError:(e,n)=>t(n),onDone:e,rethrowIfPossible:n})}},et=()=>{throw new Error("tapAsync is not supported on a SyncLoopHook")},nt=()=>{throw new Error("tapPromise is not supported on a SyncLoopHook")},rt=function(t){return tt.setup(this,t),tt.create(t)};function ot(t=[],e){const n=new I(t,e);return n.constructor=ot,n.tapAsync=et,n.tapPromise=nt,n.compile=rt,n}ot.prototype=null;var it=ot;const st=new class extends H{content({onError:t,onDone:e}){return this.callTapsParallel({onError:(e,n,r,o)=>t(n)+o(!0),onDone:e})}},ut=function(t){return st.setup(this,t),st.create(t)};function ct(t=[],e){const n=new I(t,e);return n.constructor=ct,n.compile=ut,n._call=void 0,n.call=void 0,n}ct.prototype=null;var at=ct;const pt=new class extends H{content({onError:t,onResult:e,onDone:n}){let r="";return r+=`var _results = new Array(${this.options.taps.length});\n`,r+="var _checkDone = function() {\n",r+="for(var i = 0; i < _results.length; i++) {\n",r+="var item = _results[i];\n",r+="if(item === undefined) return false;\n",r+="if(item.result !== undefined) {\n",r+=e("item.result"),r+="return true;\n",r+="}\n",r+="if(item.error) {\n",r+=t("item.error"),r+="return true;\n",r+="}\n",r+="}\n",r+="return false;\n",r+="}\n",r+=this.callTapsParallel({onError:(t,e,n,r)=>{let o="";return o+=`if(${t} < _results.length && ((_results.length = ${t+1}), (_results[${t}] = { error: ${e} }), _checkDone())) {\n`,o+=r(!0),o+="} else {\n",o+=n(),o+="}\n",o},onResult:(t,e,n,r)=>{let o="";return o+=`if(${t} < _results.length && (${e} !== undefined && (_results.length = ${t+1}), (_results[${t}] = { result: ${e} }), _checkDone())) {\n`,o+=r(!0),o+="} else {\n",o+=n(),o+="}\n",o},onTap:(t,e,n,r)=>{let o="";return t>0&&(o+=`if(${t} >= _results.length) {\n`,o+=n(),o+="} else {\n"),o+=e(),t>0&&(o+="}\n"),o},onDone:n}),r}},lt=function(t){return pt.setup(this,t),pt.create(t)};function ft(t=[],e){const n=new I(t,e);return n.constructor=ft,n.compile=lt,n._call=void 0,n.call=void 0,n}ft.prototype=null;var ht=ft;const dt=new class extends H{content({onError:t,onDone:e}){return this.callTapsSeries({onError:(e,n,r,o)=>t(n)+o(!0),onDone:e})}},yt=function(t){return dt.setup(this,t),dt.create(t)};function vt(t=[],e){const n=new I(t,e);return n.constructor=vt,n.compile=yt,n._call=void 0,n.call=void 0,n}vt.prototype=null;var gt=vt;const mt=new class extends H{content({onError:t,onResult:e,resultReturns:n,onDone:r}){return this.callTapsSeries({onError:(e,n,r,o)=>t(n)+o(!0),onResult:(t,n,r)=>`if(${n} !== undefined) {\n${e(n)}\n} else {\n${r()}}\n`,resultReturns:n,onDone:r})}},wt=function(t){return mt.setup(this,t),mt.create(t)};function bt(t=[],e){const n=new I(t,e);return n.constructor=bt,n.compile=wt,n._call=void 0,n.call=void 0,n}bt.prototype=null;var _t=bt;const Et=new class extends H{content({onError:t,onDone:e}){return this.callTapsLooping({onError:(e,n,r,o)=>t(n)+o(!0),onDone:e})}},Ot=function(t){return Et.setup(this,t),Et.create(t)};function Pt(t=[],e){const n=new I(t,e);return n.constructor=Pt,n.compile=Ot,n._call=void 0,n.call=void 0,n}Pt.prototype=null;var $t=Pt;const kt=new class extends H{content({onError:t,onResult:e}){return this.callTapsSeries({onError:(e,n,r,o)=>t(n)+o(!0),onResult:(t,e,n)=>{let r="";return r+=`if(${e} !== undefined) {\n`,r+=`${this._args[0]} = ${e};\n`,r+="}\n",r+=n(),r},onDone:()=>e(this._args[0])})}},St=function(t){return kt.setup(this,t),kt.create(t)};function jt(t=[],e){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const n=new I(t,e);return n.constructor=jt,n.compile=St,n._call=void 0,n.call=void 0,n}jt.prototype=null;var Rt=jt;const xt=(t,e)=>e;class At{constructor(t,e){this._map=new Map,this.name=e,this._factory=t,this._interceptors=[]}get(t){return this._map.get(t)}for(t){const e=this.get(t);if(void 0!==e)return e;let n=this._factory(t);const r=this._interceptors;for(let o=0;o<r.length;o++)n=r[o].factory(t,n);return this._map.set(t,n),n}intercept(t){this._interceptors.push(Object.assign({factory:xt},t))}}At.prototype.tap=k.deprecate((function(t,e,n){return this.for(t).tap(e,n)}),"HookMap#tap(key,â€¦) is deprecated. Use HookMap#for(key).tap(â€¦) instead."),At.prototype.tapAsync=k.deprecate((function(t,e,n){return this.for(t).tapAsync(e,n)}),"HookMap#tapAsync(key,â€¦) is deprecated. Use HookMap#for(key).tapAsync(â€¦) instead."),At.prototype.tapPromise=k.deprecate((function(t,e,n){return this.for(t).tapPromise(e,n)}),"HookMap#tapPromise(key,â€¦) is deprecated. Use HookMap#for(key).tapPromise(â€¦) instead.");var Tt=At;class Dt{constructor(t,e){this.hooks=t,this.name=e}tap(t,e){for(const n of this.hooks)n.tap(t,e)}tapAsync(t,e){for(const n of this.hooks)n.tapAsync(t,e)}tapPromise(t,e){for(const n of this.hooks)n.tapPromise(t,e)}isUsed(){for(const t of this.hooks)if(t.isUsed())return!0;return!1}intercept(t){for(const e of this.hooks)e.intercept(t)}withOptions(t){return new Dt(this.hooks.map((e=>e.withOptions(t))),this.name)}}var It,Ht=Dt,Ct=O((function(t,e){e.__esModule=!0,e.SyncHook=N,e.SyncBailHook=G,e.SyncWaterfallHook=V,e.SyncLoopHook=it,e.AsyncParallelHook=at,e.AsyncParallelBailHook=ht,e.AsyncSeriesHook=gt,e.AsyncSeriesBailHook=_t,e.AsyncSeriesLoopHook=$t,e.AsyncSeriesWaterfallHook=Rt,e.HookMap=Tt,e.MultiHook=Ht}));(It=Ct)&&It.__esModule&&Object.prototype.hasOwnProperty.call(It,"default");var qt,Mt=Ct.SyncWaterfallHook;!function(t){t.connect="CONNECT",t.delete="DELETE",t.get="GET",t.head="HEAD",t.options="OPTIONS",t.patch="PATCH",t.post="POST",t.put="PUT",t.trace="TRACE"}(qt||(qt={}));var zt=function(t){function n(e){var n=t.call(this,"HTTP "+e.status+" Error: "+e.statusText)||this;return n.response=e,n.name="HTTPError",n}return e(n,t),n}(Error),Ut=function(){function t(){}return t.random=function(t){void 0===t&&(t=15);for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},t.ensureLeft=function(t,e){return!1===t.startsWith(e)?e+t:t},t.ensureRight=function(t,e){return!1===t.endsWith(e)?t+e:t},t.stripLeft=function(t,e){return t.startsWith(e)?t.substr(e.length):t},t.stripRight=function(t,e){return t.endsWith(e)?t.substr(0,t.length-e.length):t},t.ucfirst=function(t){return t[0].toUpperCase()+t.slice(1)},t.lcfirst=function(t){return t[0].toLowerCase()+t.slice(1)},t.parameters=function(t,e){return Object.entries(e).forEach((function(e){var n=e[1];return t=t.replace(new RegExp(":"+e[0],"g"),n)})),t},t}(),Nt=function(){function t(t){this.hooks={createRequest:new Mt(["factory"]),request:new Mt(["request"]),response:new Mt(["response","request"])},this.config=E({headers:{"X-Requested-With":"XMLHttpRequest"},request:{method:"GET",credentials:"include"}},t)}return t.prototype.request=function(t,e,n){return void 0===n&&(n={}),r(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return r=this.createRequest(t,e,n),[4,this.hooks.request.promise(r)];case 1:return r=o.sent(),[4,fetch(r)];case 2:return i=o.sent(),[4,this.hooks.response.promise(i,r)];case 3:if(!(i=o.sent()).ok)throw new zt(i);return[2,i]}}))}))},t.prototype.createRequest=function(t,e,n){void 0===n&&(n={});var r=this.createRequestFactory(t,e,n);return(r=this.hooks.createRequest.call(r)).make()},t.prototype.createRequestFactory=function(t,e,n){return void 0===n&&(n={}),(n=this.getRequestConfig(n)).method=qt[t],function(t,e){void 0===e&&(e=Request);return new Lt(t,e)}(this.config).merge(n)},t.prototype.getRequestConfig=function(t){return void 0===t&&(t={}),E(this.config.request,t,{clone:!0})},t}(),Lt=function(){function t(t,e){return this._clientConfig=t,this._Request=e,this._config={},this._params=new URLSearchParams,this._headers=new Headers,new Proxy(this,{get:function(t,e,n){return Reflect.has(t,e)?Reflect.get(t,e,n):function(n){return t._config[e]=n,t}},set:function(t,e,n,r){return"function"==typeof t[e]?t[e](n):Reflect.set(t,e,n,r)}})}return t.prototype.merge=function(t){var e=this;return Object.entries(t).forEach((function(t){return e[t[0]](t[1])})),this},t.prototype.getConfig=function(){return n(n({},this._config),{headers:this._headers,params:this._params,url:this._config.url?this.getUri(this._config.url):this._config.url})},t.prototype.header=function(t,e){return this._headers.set(t,e),this},t.prototype.param=function(t,e){return this._headers.set(t,e),this},t.prototype.headers=function(t){var e;return e=this._headers,new Headers(t).forEach((function(t,n){return e.set(n,t)})),this},t.prototype.params=function(t){var e;return e=this._params,new URLSearchParams(t).forEach((function(t,n){return e.set(n,t)})),this},t.prototype.data=function(t){return this._headers.set("Content-Type","application/json"),this._config.body=JSON.stringify(t),this},t.prototype.getUri=function(t){var e=this._params.toString();return e.length&&(e="?"+e),Ut.ensureRight(this._clientConfig.baseURL,"/")+Ut.stripLeft(t,"/")+e},t.prototype.basic=function(t,e){return this.authorization("Basic",btoa(t+":"+e))},t.prototype.bearer=function(t){return this.authorization("Bearer",t)},t.prototype.authorization=function(t,e){return this._headers.set("Authorization",t+" "+e),this},t.prototype.make=function(){var t=this.getConfig();return new this._Request(t.url,t)},t}();var Wt=function(t){Object.assign(this,t)},Bt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n}(s),Ft=function(){function t(t){this.streams=t}return Object.defineProperty(t.prototype,"client",{get:function(){return this.streams.client},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.streams.config},enumerable:!1,configurable:!0}),t.prototype.getStreams=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),r(this,void 0,void 0,(function(){return o(this,(function(n){return e.params=t,[2,this.get("/streams",e)]}))}))},t.prototype.postStream=function(t,e){return void 0===e&&(e={}),r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.post("/streams",t,e)]}))}))},t.prototype.getStream=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),r(this,void 0,void 0,(function(){return o(this,(function(r){return n.params=e,[2,this.get("/streams/"+t,n)]}))}))},t.prototype.patchStream=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,this.patch("/streams/"+t,e,n)]}))}))},t.prototype.putStream=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,this.put("/streams/"+t,e,n)]}))}))},t.prototype.deleteStream=function(t,e){return void 0===e&&(e={}),r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.delete("/streams/"+t,e)]}))}))},t.prototype.getEntries=function(t,e,i,s){return void 0===e&&(e={}),void 0===i&&(i={}),void 0===s&&(s={}),r(this,void 0,void 0,(function(){return o(this,(function(r){return s.body=e,s.params=i,[2,this.get("/streams/"+t+"/entries",n(n({},s),{headers:{"Content-Type":"application/json"}}))]}))}))},t.prototype.postEntry=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,this.post("/streams/"+t+"/entries",e,n)]}))}))},t.prototype.getEntry=function(t,e,n){return void 0===n&&(n={}),r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,this.get("/streams/"+t+"/entries/"+e,n)]}))}))},t.prototype.patchEntry=function(t,e,n,i){return void 0===n&&(n={}),void 0===i&&(i={}),r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,this.patch("/streams/"+t+"/entries/"+e,n,i)]}))}))},t.prototype.putEntry=function(t,e,n,i){return void 0===n&&(n={}),void 0===i&&(i={}),r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,this.put("/streams/"+t+"/entries/"+e,n,i)]}))}))},t.prototype.deleteEntry=function(t,e,n){return void 0===n&&(n={}),r(this,void 0,void 0,(function(){return o(this,(function(r){return Ut.parameters("/streams/:stream/entries/:entry",{stream:t,entry:e}),[2,this.patch("/streams/"+t+"/entries/"+e,n)]}))}))},t.prototype.get=function(t,e){return void 0===e&&(e={}),r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.request("get",t,e)]}))}))},t.prototype.delete=function(t,e){return void 0===e&&(e={}),r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.request("delete",t,e)]}))}))},t.prototype.head=function(t,e){return void 0===e&&(e={}),r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.request("head",t,e)]}))}))},t.prototype.options=function(t,e){return void 0===e&&(e={}),r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.request("options",t,e)]}))}))},t.prototype.post=function(t,e,i){return void 0===i&&(i={}),r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,this.request("post",t,n({data:e},i))]}))}))},t.prototype.put=function(t,e,i){return void 0===i&&(i={}),r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,this.request("put",t,n({data:e},i))]}))}))},t.prototype.patch=function(t,e,i){return void 0===i&&(i={}),r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,this.request("patch",t,n({data:e},i))]}))}))},t.prototype.request=function(t,e,n){return r(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.client.request(t,e,n)];case 1:return[2,r.sent()];case 2:throw r.sent();case 3:return[2]}}))}))},t}(),Jt=function(){function t(t){this.stream=t}return Object.defineProperty(t.prototype,"http",{get:function(){return this.stream.streams.http},enumerable:!1,configurable:!0}),t.prototype.all=function(){return r(this,void 0,void 0,(function(){var t,e,n=this;return o(this,(function(r){switch(r.label){case 0:return[4,this.http.getEntries(this.stream.id)];case 1:return t=r.sent(),e=t.data.map((function(t){return new i(n.stream,t,!1)})),[2,new u(e,t.meta,t.links)]}}))}))},t.prototype.find=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2,this.stream.entries().where("id",t).first()]}))}))},t.prototype.findAll=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2,this.stream.entries().where("id","IN",t).get()]}))}))},t.prototype.findBy=function(t,e){return r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.stream.entries().where(t,e).first()]}))}))},t.prototype.findAllWhere=function(t,e){return r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.stream.entries().where(t,e).get()]}))}))},t.prototype.create=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,(e=this.newCriteria().newInstance(t)).save()];case 1:return n.sent(),[2,e]}}))}))},t.prototype.save=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,t.save()];case 1:return[2,e.sent()]}}))}))},t.prototype.delete=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.http.deleteEntry(this.stream.id,t.id)];case 1:return e.sent(),[2,!0]}}))}))},t.prototype.truncate=function(){return this},t.prototype.newInstance=function(t){return this.newCriteria().newInstance(t)},t.prototype.newCriteria=function(){return new h(this.stream)},t}(),Gt=function(){function t(t,e,n,r){this.streams=t,this.meta=n,this.links=r,e.fields&&(this.fields=new Map(Object.entries(e.fields).map((function(t){return[t[0],new Wt(t[1])]}))),delete e.fields),Object.assign(this,e)}return Object.defineProperty(t.prototype,"repository",{get:function(){return this._repository||(this._repository=new Jt(this)),this._repository},enumerable:!1,configurable:!0}),t.prototype.entries=function(){return this.repository.newCriteria()},t}(),Xt=function(){function t(t){this.config=t,this.client=new Nt(this.config),this.http=new Ft(this)}return t.prototype.all=function(){return r(this,void 0,void 0,(function(){var t=this;return o(this,(function(e){switch(e.label){case 0:return[4,this.http.getStreams()];case 1:return[2,e.sent().data.map((function(e){return new Gt(t,e)}))]}}))}))},t.prototype.make=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,this.http.getStream(t)];case 1:return e=n.sent(),[2,new Gt(this,e.data,e.meta,e.links)]}}))}))},t.prototype.create=function(t,e){return r(this,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return[4,this.http.postStream(n({id:t,name:t},e))];case 1:return r=o.sent(),[2,new Gt(this,r.data,r.meta,r.links)]}}))}))},t.prototype.entries=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,this.make(t)];case 1:return e=n.sent(),[2,new h(e)]}}))}))},t.prototype.repository=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,this.make(t)];case 1:return e=n.sent(),[2,new Jt(e)]}}))}))},t.prototype.collection=function(){},t}();export{Nt as Client,s as Collection,h as Criteria,i as Entry,u as EntryCollection,Wt as Field,Bt as FieldCollection,Ft as Http,qt as Method,c as PaginatedEntryCollection,Jt as Repository,Lt as RequestFactory,Gt as Stream,Xt as Streams,a as comparisonOperators,p as logicalOperators,l as operators};
