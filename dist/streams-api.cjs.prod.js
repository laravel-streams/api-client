"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e,r,n=t(require("util")),i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function o(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))}function s(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)}function a(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r}!function(t){!function(e){var r="object"==typeof i?i:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=o(t);function o(t,e){return function(r,n){"function"!=typeof t[r]&&Object.defineProperty(t,r,{configurable:!0,writable:!0,value:n}),e&&e(r,n)}}void 0===r.Reflect?r.Reflect=t:n=o(r.Reflect,n),function(t){var e=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,c={create:o?function(){return nt(Object.create(null))}:s?function(){return nt({__proto__:null})}:function(){return nt({})},has:a?function(t,r){return e.call(t,r)}:function(t,e){return e in t},get:a?function(t,r){return e.call(t,r)?t[r]:void 0}:function(t,e){return t[e]}},u=Object.getPrototypeOf(Function),p="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,l=p||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,f=p||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?et():Set,h=new(p||"function"!=typeof WeakMap?rt():WeakMap);function y(t,e,r,n){if(F(r)){if(!B(t))throw new TypeError;if(!J(e))throw new TypeError;return O(t,e)}if(!B(t))throw new TypeError;if(!C(e))throw new TypeError;if(!C(n)&&!F(n)&&!N(n))throw new TypeError;return N(n)&&(n=void 0),S(t,e,r=L(r),n)}function m(t,e){function r(r,n){if(!C(r))throw new TypeError;if(!F(n)&&!G(n))throw new TypeError;I(t,e,r,n)}return r}function d(t,e,r,n){if(!C(r))throw new TypeError;return F(n)||(n=L(n)),I(t,e,r,n)}function v(t,e,r){if(!C(e))throw new TypeError;return F(r)||(r=L(r)),k(t,e,r)}function g(t,e,r){if(!C(e))throw new TypeError;return F(r)||(r=L(r)),E(t,e,r)}function b(t,e,r){if(!C(e))throw new TypeError;return F(r)||(r=L(r)),P(t,e,r)}function w(t,e,r){if(!C(e))throw new TypeError;return F(r)||(r=L(r)),R(t,e,r)}function x(t,e){if(!C(t))throw new TypeError;return F(e)||(e=L(e)),$(t,e)}function j(t,e){if(!C(t))throw new TypeError;return F(e)||(e=L(e)),T(t,e)}function A(t,e,r){if(!C(e))throw new TypeError;F(r)||(r=L(r));var n=_(e,r,!1);if(F(n))return!1;if(!n.delete(t))return!1;if(n.size>0)return!0;var i=h.get(e);return i.delete(r),i.size>0||h.delete(e),!0}function O(t,e){for(var r=t.length-1;r>=0;--r){var n=(0,t[r])(e);if(!F(n)&&!N(n)){if(!J(n))throw new TypeError;e=n}}return e}function S(t,e,r,n){for(var i=t.length-1;i>=0;--i){var o=(0,t[i])(e,r,n);if(!F(o)&&!N(o)){if(!C(o))throw new TypeError;n=o}}return n}function _(t,e,r){var n=h.get(t);if(F(n)){if(!r)return;n=new l,h.set(t,n)}var i=n.get(e);if(F(i)){if(!r)return;i=new l,n.set(e,i)}return i}function k(t,e,r){if(E(t,e,r))return!0;var n=Z(e);return!N(n)&&k(t,n,r)}function E(t,e,r){var n=_(e,r,!1);return!F(n)&&U(n.has(t))}function P(t,e,r){if(E(t,e,r))return R(t,e,r);var n=Z(e);return N(n)?void 0:P(t,n,r)}function R(t,e,r){var n=_(e,r,!1);if(!F(n))return n.get(t)}function I(t,e,r,n){_(r,n,!0).set(t,e)}function $(t,e){var r=T(t,e),n=Z(t);if(null===n)return r;var i=$(n,e);if(i.length<=0)return r;if(r.length<=0)return i;for(var o=new f,s=[],a=0,c=r;a<c.length;a++){o.has(l=c[a])||(o.add(l),s.push(l))}for(var u=0,p=i;u<p.length;u++){var l;o.has(l=p[u])||(o.add(l),s.push(l))}return s}function T(t,e){var r=[],n=_(t,e,!1);if(F(n))return r;for(var i=V(n.keys()),o=0;;){var s=X(i);if(!s)return r.length=o,r;var a=Q(s);try{r[o]=a}catch(c){try{Y(i)}finally{throw c}}o++}}function M(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function F(t){return void 0===t}function N(t){return null===t}function D(t){return"symbol"==typeof t}function C(t){return"object"==typeof t?null!==t:"function"==typeof t}function W(t,e){switch(M(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var r=3===e?"string":5===e?"number":"default",i=K(t,n);if(void 0!==i){var o=i.call(t,r);if(C(o))throw new TypeError;return o}return q(t,"default"===r?"number":r)}function q(t,e){if("string"===e){var r=t.toString;if(H(r))if(!C(i=r.call(t)))return i;if(H(n=t.valueOf))if(!C(i=n.call(t)))return i}else{var n;if(H(n=t.valueOf))if(!C(i=n.call(t)))return i;var i,o=t.toString;if(H(o))if(!C(i=o.call(t)))return i}throw new TypeError}function U(t){return!!t}function z(t){return""+t}function L(t){var e=W(t,3);return D(e)?e:z(e)}function B(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function H(t){return"function"==typeof t}function J(t){return"function"==typeof t}function G(t){switch(M(t)){case 3:case 4:return!0;default:return!1}}function K(t,e){var r=t[e];if(null!=r){if(!H(r))throw new TypeError;return r}}function V(t){var e=K(t,i);if(!H(e))throw new TypeError;var r=e.call(t);if(!C(r))throw new TypeError;return r}function Q(t){return t.value}function X(t){var e=t.next();return!e.done&&e}function Y(t){var e=t.return;e&&e.call(t)}function Z(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===u)return e;if(e!==u)return e;var r=t.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return e;var i=n.constructor;return"function"!=typeof i||i===t?e:i}function tt(){var t={},e=[],r=function(){function t(t,e,r){this._index=0,this._keys=t,this._values=e,this._selector=r}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var r=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var r=this._find(t,!0);return this._values[r]=e,this},e.prototype.delete=function(e){var r=this._find(e,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new r(this._keys,this._values,n)},e.prototype.values=function(){return new r(this._keys,this._values,o)},e.prototype.entries=function(){return new r(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function n(t,e){return t}function o(t,e){return e}function s(t,e){return[t,e]}}function et(){return function(){function t(){this._map=new l}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}()}function rt(){var t=16,r=c.create(),n=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){return o(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var t;do{t="@@WeakMap@@"+u()}while(c.has(r,t));return r[t]=!0,t}function o(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:c.create()})}return t[n]}function s(t,e){for(var r=0;r<e;++r)t[r]=255*Math.random()|0;return t}function a(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t)}function u(){var e=a(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var r="",n=0;n<t;++n){var i=e[n];4!==n&&6!==n&&8!==n||(r+="-"),i<16&&(r+="0"),r+=i.toString(16).toLowerCase()}return r}}function nt(t){return t.__=void 0,delete t.__,t}t("decorate",y),t("metadata",m),t("defineMetadata",d),t("hasMetadata",v),t("hasOwnMetadata",g),t("getMetadata",b),t("getOwnMetadata",w),t("getMetadataKeys",x),t("getOwnMetadataKeys",j),t("deleteMetadata",A)}(n)}()}(e||(e={}));const c=t=>t&&void 0!==t.type;class u{constructor(t){r.set(this,void 0),delete t.__listeners,delete t.__observers,a(this,r,t,"f");const e=this;return new Proxy(this,{get:(t,n,i)=>"function"==typeof e[n.toString()]?e[n.toString()].bind(e):Reflect.has(s(t,r,"f"),n)?Reflect.get(s(t,r,"f"),n):Reflect.has(t,n)?Reflect.get(t,n,i):void 0,set:(t,e,n,i)=>Reflect.has(t,e)?Reflect.set(t,e,n,i):Reflect.set(s(t,r,"f"),e,n)})}serialize(){return s(this,r,"f")}}var p,l,f;r=new WeakMap;class h{constructor(t,e={},r=!0){p.set(this,void 0),l.set(this,{}),f.set(this,!0),a(this,p,t,"f"),a(this,l,e,"f"),a(this,f,r,"f");const n=this;return new Proxy(this,{get:(t,e,r)=>"function"==typeof n[e.toString()]?n[e.toString()].bind(n):void 0!==n[e.toString()]?n[e.toString()]:Reflect.has(s(t,l,"f"),e)?Reflect.get(s(t,l,"f"),e):Reflect.has(t,e)?Reflect.get(t,e,r):void 0,set:(t,e,r,n)=>Reflect.has(t,e)?Reflect.set(t,e,r,n):Reflect.set(s(t,l,"f"),e,r)})}getStream(){return s(this,p,"f")}save(){return o(this,void 0,void 0,(function*(){let t=s(this,p,"f").getStreams().http;try{return s(this,f,"f")?(yield t.postEntry(s(this,p,"f").id,s(this,l,"f")),a(this,f,!1,"f"),!0):(yield t.patchEntry(s(this,p,"f").id,s(this,l,"f").id,s(this,l,"f")),!0)}catch(e){return!1}}))}serialize(){return s(this,l,"f")}}p=new WeakMap,l=new WeakMap,f=new WeakMap;var y={exports:{}},m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d={isArray:function(t){return Array.isArray(t)},isObject:function(t){return"object"===(void 0===t?"undefined":m(t))&&!1===Array.isArray(t)&&null!==t},isFunction:function(t){return"function"==typeof t}},v=d.isFunction,g=function(t){return void 0===t?this.sum()/this.items.length:v(t)?new this.constructor(this.items).sum(t)/this.items.length:new this.constructor(this.items).pluck(t).sum()/this.items.length},b=g,w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var x=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(c){i=!0,o=c}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var A=function(t){var e,r=void 0;Array.isArray(t)?(e=r=[]).push.apply(e,function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(t)):(r={},Object.keys(t).forEach((function(e){r[e]=t[e]})));return r},O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S=A;function _(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var k=function(t){var e=[];return Array.isArray(t)?e.push.apply(e,_(t)):"Collection"===t.constructor.name?e.push.apply(e,_(t.all())):Object.keys(t).forEach((function(r){return e.push(t[r])})),e};var E=k,P=d.isFunction,R=function(t,e){if(void 0!==e)return Array.isArray(this.items)?this.items.filter((function(r){return void 0!==r[t]&&r[t]===e})).length>0:void 0!==this.items[t]&&this.items[t]===e;if(P(t))return this.items.filter((function(e,r){return t(e,r)})).length>0;if(Array.isArray(this.items))return-1!==this.items.indexOf(t);var r=E(this.items);return r.push.apply(r,function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(Object.keys(this.items))),-1!==r.indexOf(t)},I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var $=k,T=function(t){return Array.isArray(t[0])?t[0]:t},M=T,F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function N(t){if(Array.isArray(t)){if(t.length)return!1}else if(null!=t&&"object"===(void 0===t?"undefined":F(t))){if(Object.keys(t).length)return!1}else if(t)return!1;return!0}var D=d.isFunction,C=d.isArray,W=d.isObject,q=d.isFunction,U=function(t,e){try{return e.split(".").reduce((function(t,e){return t[e]}),t)}catch(r){return t}},z=U,L=d.isFunction,B=T,H=U,J=d.isFunction,G=d.isFunction;var K=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(c){i=!0,o=c}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},V=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(c){i=!0,o=c}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Q=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(c){i=!0,o=c}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function X(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function Z(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var tt=k,et=T,rt=A,nt=d.isArray,it=d.isObject,ot=U,st=T,at=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];st(r).forEach((function(e){delete t[e]}))},ct=d.isArray,ut=d.isObject,pt=at,lt=d.isFunction,ft=k,ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt=d.isArray,mt=d.isObject,dt=d.isFunction,vt=d.isArray,gt=d.isObject,bt=at,wt=k,xt=d.isObject,jt=d.isArray,At=d.isObject,Ot=d.isFunction,St=d.isArray,_t=d.isObject,kt=d.isFunction,Et=R,Pt=U,Rt=d.isFunction,It=k,$t=d.isFunction,Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt=d.isArray,Ft=d.isObject,Nt=d.isFunction,Dt=d.isArray,Ct=d.isObject,Wt=d.isFunction,qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut=function(t,e){if(Array.isArray(this.items)&&this.items.length)return t(this);if(Object.keys(this.items).length)return t(this);if(void 0!==e){if(Array.isArray(this.items)&&!this.items.length)return e(this);if(!Object.keys(this.items).length)return e(this)}return this},zt=function(t,e){if(Array.isArray(this.items)&&!this.items.length)return t(this);if(!Object.keys(this.items).length)return t(this);if(void 0!==e){if(Array.isArray(this.items)&&this.items.length)return e(this);if(Object.keys(this.items).length)return e(this)}return this},Lt=d.isFunction,Bt=k,Ht=k,Jt=U,Gt=k,Kt=U,Vt=U,Qt=k,Xt=U,Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function te(t){this.items=void 0===t||Array.isArray(t)||"object"===(void 0===t?"undefined":Zt(t))?t instanceof this.constructor?t.all():t||[]:[t]}"undefined"!=typeof Symbol&&(te.prototype[Symbol.iterator]=function(){var t=this,e=-1;return{next:function(){return{value:t.items[e+=1],done:e>=t.items.length}}}}),te.prototype.toJSON=function(){return this.items},te.prototype.all=function(){return this.items},te.prototype.average=g,te.prototype.avg=b,te.prototype.chunk=function(t){var e=this,r=[],n=0;if(Array.isArray(this.items))do{var i=this.items.slice(n,n+t),o=new this.constructor(i);r.push(o),n+=t}while(n<this.items.length);else if("object"===w(this.items)){var s=Object.keys(this.items),a=function(){var i=s.slice(n,n+t),o=new e.constructor({});i.forEach((function(t){return o.put(t,e.items[t])})),r.push(o),n+=t};do{a()}while(n<s.length)}else r.push(new this.constructor([this.items]));return new this.constructor(r)},te.prototype.collapse=function(){var t;return new this.constructor((t=[]).concat.apply(t,function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(this.items)))},te.prototype.combine=function(t){var e=this,r=t;r instanceof this.constructor&&(r=t.all());var n={};if(Array.isArray(this.items)&&Array.isArray(r))this.items.forEach((function(t,e){n[t]=r[e]}));else if("object"===j(this.items)&&"object"===(void 0===r?"undefined":j(r)))Object.keys(this.items).forEach((function(t,i){n[e.items[t]]=r[Object.keys(r)[i]]}));else if(Array.isArray(this.items))n[this.items[0]]=r;else if("string"==typeof this.items&&Array.isArray(r)){var i=x(r,1);n[this.items]=i[0]}else"string"==typeof this.items&&(n[this.items]=r);return new this.constructor(n)},te.prototype.concat=function(t){var e=t;t instanceof this.constructor?e=t.all():"object"===(void 0===t?"undefined":O(t))&&(e=[],Object.keys(t).forEach((function(r){e.push(t[r])})));var r=S(this.items);return e.forEach((function(t){"object"===(void 0===t?"undefined":O(t))?Object.keys(t).forEach((function(e){return r.push(t[e])})):r.push(t)})),new this.constructor(r)},te.prototype.contains=R,te.prototype.count=function(){var t=0;return Array.isArray(this.items)&&(t=this.items.length),Math.max(Object.keys(this.items).length,t)},te.prototype.countBy=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t};return new this.constructor(this.items).groupBy(t).map((function(t){return t.count()}))},te.prototype.crossJoin=function(){function t(e,r,n){var i=n[0];i instanceof r&&(i=i.all());for(var o=n.slice(1),s=!o.length,a=[],c=0;c<i.length;c+=1){var u=e.slice();u.push(i[c]),s?a.push(u):a=a.concat(t(u,r,o))}return a}for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return new this.constructor(t([],this.constructor,[].concat([this.items],r)))},te.prototype.dd=function(){this.dump(),"undefined"!=typeof process&&process.exit(1)},te.prototype.diff=function(t){var e=void 0;e=t instanceof this.constructor?t.all():t;var r=this.items.filter((function(t){return-1===e.indexOf(t)}));return new this.constructor(r)},te.prototype.diffAssoc=function(t){var e=this,r=t;t instanceof this.constructor&&(r=t.all());var n={};return Object.keys(this.items).forEach((function(t){void 0!==r[t]&&r[t]===e.items[t]||(n[t]=e.items[t])})),new this.constructor(n)},te.prototype.diffKeys=function(t){var e=void 0;e=t instanceof this.constructor?t.all():t;var r=Object.keys(e),n=Object.keys(this.items).filter((function(t){return-1===r.indexOf(t)}));return new this.constructor(this.items).only(n)},te.prototype.dump=function(){return console.log(this),this},te.prototype.duplicates=function(){var t=this,e=[],r={},n=function(t){return Array.isArray(t)||"object"===(void 0===t?"undefined":I(t))?JSON.stringify(t):t};return Array.isArray(this.items)?this.items.forEach((function(t,i){var o=n(t);-1===e.indexOf(o)?e.push(o):r[i]=t})):"object"===I(this.items)&&Object.keys(this.items).forEach((function(i){var o=n(t.items[i]);-1===e.indexOf(o)?e.push(o):r[i]=t.items[i]})),new this.constructor(r)},te.prototype.each=function(t){var e=!1;if(Array.isArray(this.items))for(var r=this.items.length,n=0;n<r&&!e;n+=1)e=!1===t(this.items[n],n,this.items);else for(var i=Object.keys(this.items),o=i.length,s=0;s<o&&!e;s+=1){var a=i[s];e=!1===t(this.items[a],a,this.items)}return this},te.prototype.eachSpread=function(t){return this.each((function(e,r){t.apply(void 0,function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(e).concat([r]))})),this},te.prototype.every=function(t){return $(this.items).every(t)},te.prototype.except=function(){for(var t=this,e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=M(r);if(Array.isArray(this.items)){var o=this.items.filter((function(t){return-1===i.indexOf(t)}));return new this.constructor(o)}var s={};return Object.keys(this.items).forEach((function(e){-1===i.indexOf(e)&&(s[e]=t.items[e])})),new this.constructor(s)},te.prototype.filter=function(t){var e=t||!1,r=null;return r=Array.isArray(this.items)?function(t,e){if(t)return e.filter(t);for(var r=[],n=0;n<e.length;n+=1){var i=e[n];N(i)||r.push(i)}return r}(e,this.items):function(t,e){var r={};return Object.keys(e).forEach((function(n){t?t(e[n],n)&&(r[n]=e[n]):N(e[n])||(r[n]=e[n])})),r}(e,this.items),new this.constructor(r)},te.prototype.first=function(t,e){if(D(t)){for(var r=0,n=this.items.length;r<n;r+=1){var i=this.items[r];if(t(i))return i}return D(e)?e():e}if(Array.isArray(this.items)&&this.items.length||Object.keys(this.items).length){if(Array.isArray(this.items))return this.items[0];var o=Object.keys(this.items)[0];return this.items[o]}return D(e)?e():e},te.prototype.firstWhere=function(t,e,r){return this.where(t,e,r).first()||null},te.prototype.flatMap=function(t){return this.map(t).collapse()},te.prototype.flatten=function(t){var e=t||1/0,r=!1,n=[],i=function(t){n=[],C(t)?t.forEach((function(t){C(t)?n=n.concat(t):W(t)?Object.keys(t).forEach((function(e){n=n.concat(t[e])})):n.push(t)})):Object.keys(t).forEach((function(e){C(t[e])?n=n.concat(t[e]):W(t[e])?Object.keys(t[e]).forEach((function(r){n=n.concat(t[e][r])})):n.push(t[e])})),r=0===(r=n.filter((function(t){return W(t)}))).length,e-=1};for(i(this.items);!r&&e>0;)i(n);return new this.constructor(n)},te.prototype.flip=function(){var t=this,e={};return Array.isArray(this.items)?Object.keys(this.items).forEach((function(r){e[t.items[r]]=Number(r)})):Object.keys(this.items).forEach((function(r){e[t.items[r]]=r})),new this.constructor(e)},te.prototype.forPage=function(t,e){var r=this,n={};return Array.isArray(this.items)?n=this.items.slice(t*e-e,t*e):Object.keys(this.items).slice(t*e-e,t*e).forEach((function(t){n[t]=r.items[t]})),new this.constructor(n)},te.prototype.forget=function(t){return Array.isArray(this.items)?this.items.splice(t,1):delete this.items[t],this},te.prototype.get=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0!==this.items[t]?this.items[t]:q(e)?e():null!==e?e:null},te.prototype.groupBy=function(t){var e=this,r={};return this.items.forEach((function(n,i){var o=void 0;o=L(t)?t(n,i):z(n,t)||0===z(n,t)?z(n,t):"",void 0===r[o]&&(r[o]=new e.constructor([])),r[o].push(n)})),new this.constructor(r)},te.prototype.has=function(){for(var t=this,e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=B(r);return i.filter((function(e){return Object.hasOwnProperty.call(t.items,e)})).length===i.length},te.prototype.implode=function(t,e){return void 0===e?this.items.join(t):new this.constructor(this.items).pluck(t).all().join(e)},te.prototype.intersect=function(t){var e=t;t instanceof this.constructor&&(e=t.all());var r=this.items.filter((function(t){return-1!==e.indexOf(t)}));return new this.constructor(r)},te.prototype.intersectByKeys=function(t){var e=this,r=Object.keys(t);t instanceof this.constructor&&(r=Object.keys(t.all()));var n={};return Object.keys(this.items).forEach((function(t){-1!==r.indexOf(t)&&(n[t]=e.items[t])})),new this.constructor(n)},te.prototype.isEmpty=function(){return Array.isArray(this.items)?!this.items.length:!Object.keys(this.items).length},te.prototype.isNotEmpty=function(){return!this.isEmpty()},te.prototype.join=function(t,e){var r=this.values();if(void 0===e)return r.implode(t);var n=r.count();if(0===n)return"";if(1===n)return r.last();var i=r.pop();return r.implode(t)+e+i},te.prototype.keyBy=function(t){var e={};return J(t)?this.items.forEach((function(r){e[t(r)]=r})):this.items.forEach((function(r){var n=H(r,t);e[n||""]=r})),new this.constructor(e)},te.prototype.keys=function(){var t=Object.keys(this.items);return Array.isArray(this.items)&&(t=t.map(Number)),new this.constructor(t)},te.prototype.last=function(t,e){var r=this.items;if(G(t)&&(r=this.filter(t).all()),Array.isArray(r)&&!r.length||!Object.keys(r).length)return G(e)?e():e;if(Array.isArray(r))return r[r.length-1];var n=Object.keys(r);return r[n[n.length-1]]},te.prototype.macro=function(t,e){this.constructor.prototype[t]=e},te.prototype.make=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new this.constructor(t)},te.prototype.map=function(t){var e=this;if(Array.isArray(this.items))return new this.constructor(this.items.map(t));var r={};return Object.keys(this.items).forEach((function(n){r[n]=t(e.items[n],n)})),new this.constructor(r)},te.prototype.mapSpread=function(t){return this.map((function(e,r){return t.apply(void 0,function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(e).concat([r]))}))},te.prototype.mapToDictionary=function(t){var e={};return this.items.forEach((function(r,n){var i=t(r,n),o=K(i,2),s=o[0],a=o[1];void 0===e[s]?e[s]=[a]:e[s].push(a)})),new this.constructor(e)},te.prototype.mapInto=function(t){return this.map((function(e,r){return new t(e,r)}))},te.prototype.mapToGroups=function(t){var e={};return this.items.forEach((function(r,n){var i=t(r,n),o=V(i,2),s=o[0],a=o[1];void 0===e[s]?e[s]=[a]:e[s].push(a)})),new this.constructor(e)},te.prototype.mapWithKeys=function(t){var e=this,r={};return Array.isArray(this.items)?this.items.forEach((function(e,n){var i=t(e,n),o=Q(i,2);r[o[0]]=o[1]})):Object.keys(this.items).forEach((function(n){var i=t(e.items[n],n),o=Q(i,2);r[o[0]]=o[1]})),new this.constructor(r)},te.prototype.max=function(t){if("string"==typeof t){var e=this.items.filter((function(e){return void 0!==e[t]}));return Math.max.apply(Math,X(e.map((function(e){return e[t]}))))}return Math.max.apply(Math,X(this.items))},te.prototype.median=function(t){var e=this.items.length;return void 0===t?e%2==0?(this.items[e/2-1]+this.items[e/2])/2:this.items[Math.floor(e/2)]:e%2==0?(this.items[e/2-1][t]+this.items[e/2][t])/2:this.items[Math.floor(e/2)][t]},te.prototype.merge=function(t){var e=t;if("string"==typeof e&&(e=[e]),Array.isArray(this.items)&&Array.isArray(e))return new this.constructor(this.items.concat(e));var r=JSON.parse(JSON.stringify(this.items));return Object.keys(e).forEach((function(t){r[t]=e[t]})),new this.constructor(r)},te.prototype.mergeRecursive=function(t){var e=function t(e,r){var n={};return Object.keys(Object.assign({},e,r)).forEach((function(i){void 0===e[i]&&void 0!==r[i]?n[i]=r[i]:void 0!==e[i]&&void 0===r[i]?n[i]=e[i]:void 0!==e[i]&&void 0!==r[i]&&(n[i]=e[i]===r[i]?e[i]:Array.isArray(e[i])||"object"!==Y(e[i])||Array.isArray(r[i])||"object"!==Y(r[i])?[].concat(e[i],r[i]):t(e[i],r[i]))})),n};return t?new this.constructor(e(this.items,"Collection"===t.constructor.name?t.all():t)):this},te.prototype.min=function(t){if(void 0!==t){var e=this.items.filter((function(e){return void 0!==e[t]}));return Math.min.apply(Math,Z(e.map((function(e){return e[t]}))))}return Math.min.apply(Math,Z(this.items))},te.prototype.mode=function(t){var e=[],r=1;return this.items.length?(this.items.forEach((function(n){var i=e.filter((function(e){return void 0!==t?e.key===n[t]:e.key===n}));if(i.length){i[0].count+=1;var o=i[0].count;o>r&&(r=o)}else e.push(void 0!==t?{key:n[t],count:1}:{key:n,count:1})})),e.filter((function(t){return t.count===r})).map((function(t){return t.key}))):null},te.prototype.nth=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=tt(this.items),n=r.slice(e).filter((function(e,r){return r%t==0}));return new this.constructor(n)},te.prototype.only=function(){for(var t=this,e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=et(r);if(Array.isArray(this.items)){var o=this.items.filter((function(t){return-1!==i.indexOf(t)}));return new this.constructor(o)}var s={};return Object.keys(this.items).forEach((function(e){-1!==i.indexOf(e)&&(s[e]=t.items[e])})),new this.constructor(s)},te.prototype.pad=function(t,e){var r=Math.abs(t),n=this.count();if(r<=n)return this;for(var i=r-n,o=rt(this.items),s=Array.isArray(this.items),a=t<0,c=0;c<i;)s?a?o.unshift(e):o.push(e):void 0!==o[c]?i+=1:o[c]=e,c+=1;return new this.constructor(o)},te.prototype.partition=function(t){var e=this,r=void 0;return Array.isArray(this.items)?(r=[new this.constructor([]),new this.constructor([])],this.items.forEach((function(e){!0===t(e)?r[0].push(e):r[1].push(e)}))):(r=[new this.constructor({}),new this.constructor({})],Object.keys(this.items).forEach((function(n){var i=e.items[n];!0===t(i)?r[0].put(n,i):r[1].put(n,i)}))),new this.constructor(r)},te.prototype.pipe=function(t){return t(this)},te.prototype.pluck=function(t,e){if(-1!==t.indexOf("*")){var r=(p={},this.items.forEach((function(t,e){!function t(e,r){it(e)?Object.keys(e).forEach((function(n){t(e[n],r+"."+n)})):nt(e)&&e.forEach((function(e,n){t(e,r+"."+n)})),p[r]=e}(t,e)})),p),n=[];if(void 0!==e){var i=new RegExp("0."+e,"g"),o=("0."+e).split(".").length;Object.keys(r).forEach((function(t){var e=t.match(i);if(e){var s=e[0];s.split(".").length===o&&n.push(r[s])}}))}var s=[],a=new RegExp("0."+t,"g"),c=("0."+t).split(".").length;if(Object.keys(r).forEach((function(t){var e=t.match(a);if(e){var n=e[0];n.split(".").length===c&&s.push(r[n])}})),void 0!==e){var u={};return this.items.forEach((function(t,e){u[n[e]||""]=s})),new this.constructor(u)}return new this.constructor([s])}var p;if(void 0!==e){var l={};return this.items.forEach((function(r){l[r[e]||""]=void 0!==ot(r,t)?ot(r,t):null})),new this.constructor(l)}return this.map((function(e){return void 0!==ot(e,t)?ot(e,t):null}))},te.prototype.pop=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.isEmpty())return null;if(ct(this.items))return 1===e?this.items.pop():new this.constructor(this.items.splice(-e));if(ut(this.items)){var r=Object.keys(this.items);if(1===e){var n=r[r.length-1],i=this.items[n];return pt(this.items,n),i}var o=r.slice(-e),s=o.reduce((function(e,r){return e[r]=t.items[r],e}),{});return pt(this.items,o),new this.constructor(s)}return null},te.prototype.prepend=function(t,e){return void 0!==e?this.put(e,t):(this.items.unshift(t),this)},te.prototype.pull=function(t,e){var r=this.items[t]||null;return r||void 0===e||(r=lt(e)?e():e),delete this.items[t],r},te.prototype.push=function(){var t;return(t=this.items).push.apply(t,arguments),this},te.prototype.put=function(t,e){return this.items[t]=e,this},te.prototype.random=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=ft(this.items),r=new this.constructor(e).shuffle();return t!==parseInt(t,10)?r.first():r.take(t)},te.prototype.reduce=function(t,e){var r=this,n=null;return void 0!==e&&(n=e),Array.isArray(this.items)?this.items.forEach((function(e){n=t(n,e)})):Object.keys(this.items).forEach((function(e){n=t(n,r.items[e],e)})),n},te.prototype.reject=function(t){return new this.constructor(this.items).filter((function(e){return!t(e)}))},te.prototype.replace=function(t){if(!t)return this;if(Array.isArray(t)){var e=this.items.map((function(e,r){return t[r]||e}));return new this.constructor(e)}if("Collection"===t.constructor.name){var r=Object.assign({},this.items,t.all());return new this.constructor(r)}var n=Object.assign({},this.items,t);return new this.constructor(n)},te.prototype.replaceRecursive=function(t){var e=function t(e,r){var n=Object.assign({},e);return Object.keys(Object.assign({},e,r)).forEach((function(i){Array.isArray(r[i])||"object"!==ht(r[i])?void 0===e[i]&&void 0!==r[i]?n[i]="object"===ht(e[i])?Object.assign({},r[i]):r[i]:void 0!==e[i]&&void 0===r[i]?n[i]="object"===ht(e[i])?Object.assign({},e[i]):e[i]:void 0!==e[i]&&void 0!==r[i]&&(n[i]="object"===ht(r[i])?Object.assign({},r[i]):r[i]):n[i]=t(e[i],r[i])})),n};return t?Array.isArray(t)||"object"===(void 0===t?"undefined":ht(t))?new this.constructor(e(this.items,"Collection"===t.constructor.name?t.all():t)):new this.constructor(e(this.items,[t])):this},te.prototype.reverse=function(){var t=[].concat(this.items).reverse();return new this.constructor(t)},te.prototype.search=function(t,e){var r=this,n=void 0,i=function(n,i){return dt(t)?t(r.items[i],i):e?r.items[i]===t:r.items[i]==t};return yt(this.items)?n=this.items.findIndex(i):mt(this.items)&&(n=Object.keys(this.items).find((function(t){return i(0,t)}))),!(void 0===n||n<0)&&n},te.prototype.shift=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.isEmpty())return null;if(vt(this.items))return 1===e?this.items.shift():new this.constructor(this.items.splice(0,e));if(gt(this.items)){if(1===e){var r=Object.keys(this.items)[0],n=this.items[r];return delete this.items[r],n}var i=Object.keys(this.items),o=i.slice(0,e),s=o.reduce((function(e,r){return e[r]=t.items[r],e}),{});return bt(this.items,o),new this.constructor(s)}return null},te.prototype.shuffle=function(){var t=wt(this.items),e=void 0,r=void 0,n=void 0;for(n=t.length;n;n-=1)e=Math.floor(Math.random()*n),r=t[n-1],t[n-1]=t[e],t[e]=r;return this.items=t,this},te.prototype.skip=function(t){var e=this;return xt(this.items)?new this.constructor(Object.keys(this.items).reduce((function(r,n,i){return i+1>t&&(r[n]=e.items[n]),r}),{})):new this.constructor(this.items.slice(t))},te.prototype.skipUntil=function(t){var e=this,r=null,n=void 0,i=function(e){return e===t};return Ot(t)&&(i=t),jt(this.items)&&(n=this.items.filter((function(t){return!0!==r&&(r=i(t)),r}))),At(this.items)&&(n=Object.keys(this.items).reduce((function(t,n){return!0!==r&&(r=i(e.items[n])),!1!==r&&(t[n]=e.items[n]),t}),{})),new this.constructor(n)},te.prototype.skipWhile=function(t){var e=this,r=null,n=void 0,i=function(e){return e===t};return kt(t)&&(i=t),St(this.items)&&(n=this.items.filter((function(t){return!0!==r&&(r=!i(t)),r}))),_t(this.items)&&(n=Object.keys(this.items).reduce((function(t,n){return!0!==r&&(r=!i(e.items[n])),!1!==r&&(t[n]=e.items[n]),t}),{})),new this.constructor(n)},te.prototype.slice=function(t,e){var r=this.items.slice(t);return void 0!==e&&(r=r.slice(0,e)),new this.constructor(r)},te.prototype.some=Et,te.prototype.sort=function(t){var e=[].concat(this.items);return void 0===t?this.every((function(t){return"number"==typeof t}))?e.sort((function(t,e){return t-e})):e.sort():e.sort(t),new this.constructor(e)},te.prototype.sortDesc=function(){return this.sort().reverse()},te.prototype.sortBy=function(t){var e=[].concat(this.items),r=function(e){return Rt(t)?t(e):Pt(e,t)};return e.sort((function(t,e){var n=r(t),i=r(e);return null==n?1:null==i||n<i?-1:n>i?1:0})),new this.constructor(e)},te.prototype.sortByDesc=function(t){return this.sortBy(t).reverse()},te.prototype.sortKeys=function(){var t=this,e={};return Object.keys(this.items).sort().forEach((function(r){e[r]=t.items[r]})),new this.constructor(e)},te.prototype.sortKeysDesc=function(){var t=this,e={};return Object.keys(this.items).sort().reverse().forEach((function(r){e[r]=t.items[r]})),new this.constructor(e)},te.prototype.splice=function(t,e,r){var n=this.slice(t,e);if(this.items=this.diff(n.all()).all(),Array.isArray(r))for(var i=0,o=r.length;i<o;i+=1)this.items.splice(t+i,0,r[i]);return n},te.prototype.split=function(t){for(var e=Math.round(this.items.length/t),r=JSON.parse(JSON.stringify(this.items)),n=[],i=0;i<t;i+=1)n.push(new this.constructor(r.splice(0,e)));return new this.constructor(n)},te.prototype.sum=function(t){var e=It(this.items),r=0;if(void 0===t)for(var n=0,i=e.length;n<i;n+=1)r+=parseFloat(e[n]);else if($t(t))for(var o=0,s=e.length;o<s;o+=1)r+=parseFloat(t(e[o]));else for(var a=0,c=e.length;a<c;a+=1)r+=parseFloat(e[a][t]);return parseFloat(r.toPrecision(12))},te.prototype.take=function(t){var e=this;if(!Array.isArray(this.items)&&"object"===Tt(this.items)){var r=Object.keys(this.items),n=void 0;n=t<0?r.slice(t):r.slice(0,t);var i={};return r.forEach((function(t){-1!==n.indexOf(t)&&(i[t]=e.items[t])})),new this.constructor(i)}return new this.constructor(t<0?this.items.slice(t):this.items.slice(0,t))},te.prototype.takeUntil=function(t){var e=this,r=null,n=void 0,i=function(e){return e===t};return Nt(t)&&(i=t),Mt(this.items)&&(n=this.items.filter((function(t){return!1!==r&&(r=!i(t)),r}))),Ft(this.items)&&(n=Object.keys(this.items).reduce((function(t,n){return!1!==r&&(r=!i(e.items[n])),!1!==r&&(t[n]=e.items[n]),t}),{})),new this.constructor(n)},te.prototype.takeWhile=function(t){var e=this,r=null,n=void 0,i=function(e){return e===t};return Wt(t)&&(i=t),Dt(this.items)&&(n=this.items.filter((function(t){return!1!==r&&(r=i(t)),r}))),Ct(this.items)&&(n=Object.keys(this.items).reduce((function(t,n){return!1!==r&&(r=i(e.items[n])),!1!==r&&(t[n]=e.items[n]),t}),{})),new this.constructor(n)},te.prototype.tap=function(t){return t(this),this},te.prototype.times=function(t,e){for(var r=1;r<=t;r+=1)this.items.push(e(r));return this},te.prototype.toArray=function(){var t=this.constructor;function e(r,n){var i=[];r instanceof t?(r.items.forEach((function(t){return e(t,i)})),n.push(i)):Array.isArray(r)?(r.forEach((function(t){return e(t,i)})),n.push(i)):n.push(r)}if(Array.isArray(this.items)){var r=[];return this.items.forEach((function(t){e(t,r)})),r}return this.values().all()},te.prototype.toJson=function(){return"object"!==qt(this.items)||Array.isArray(this.items)?JSON.stringify(this.toArray()):JSON.stringify(this.all())},te.prototype.transform=function(t){var e=this;if(Array.isArray(this.items))this.items=this.items.map(t);else{var r={};Object.keys(this.items).forEach((function(n){r[n]=t(e.items[n],n)})),this.items=r}return this},te.prototype.unless=function(t,e,r){t?r(this):e(this)},te.prototype.unlessEmpty=Ut,te.prototype.unlessNotEmpty=zt,te.prototype.union=function(t){var e=this,r=JSON.parse(JSON.stringify(this.items));return Object.keys(t).forEach((function(n){void 0===e.items[n]&&(r[n]=t[n])})),new this.constructor(r)},te.prototype.unique=function(t){var e=void 0;if(void 0===t)e=this.items.filter((function(t,e,r){return r.indexOf(t)===e}));else{e=[];for(var r=[],n=0,i=this.items.length;n<i;n+=1){var o=void 0;o=Lt(t)?t(this.items[n]):this.items[n][t],-1===r.indexOf(o)&&(e.push(this.items[n]),r.push(o))}}return new this.constructor(e)},te.prototype.unwrap=function(t){return t instanceof this.constructor?t.all():t},te.prototype.values=function(){return new this.constructor(Bt(this.items))},te.prototype.when=function(t,e,r){return t?e(this,t):r?r(this,t):this},te.prototype.whenEmpty=zt,te.prototype.whenNotEmpty=Ut,te.prototype.where=function(t,e,r){var n=e,i=r,o=Ht(this.items);if(void 0===e||!0===e)return new this.constructor(o.filter((function(e){return Jt(e,t)})));if(!1===e)return new this.constructor(o.filter((function(e){return!Jt(e,t)})));void 0===r&&(i=e,n="===");var s=o.filter((function(e){switch(n){case"==":return Jt(e,t)===Number(i)||Jt(e,t)===i.toString();default:case"===":return Jt(e,t)===i;case"!=":case"<>":return Jt(e,t)!==Number(i)&&Jt(e,t)!==i.toString();case"!==":return Jt(e,t)!==i;case"<":return Jt(e,t)<i;case"<=":return Jt(e,t)<=i;case">":return Jt(e,t)>i;case">=":return Jt(e,t)>=i}}));return new this.constructor(s)},te.prototype.whereBetween=function(t,e){return this.where(t,">=",e[0]).where(t,"<=",e[e.length-1])},te.prototype.whereIn=function(t,e){var r=Gt(e),n=this.items.filter((function(e){return-1!==r.indexOf(Kt(e,t))}));return new this.constructor(n)},te.prototype.whereInstanceOf=function(t){return this.filter((function(e){return e instanceof t}))},te.prototype.whereNotBetween=function(t,e){return this.filter((function(r){return Vt(r,t)<e[0]||Vt(r,t)>e[e.length-1]}))},te.prototype.whereNotIn=function(t,e){var r=Qt(e),n=this.items.filter((function(e){return-1===r.indexOf(Xt(e,t))}));return new this.constructor(n)},te.prototype.whereNull=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.where(t,"===",null)},te.prototype.whereNotNull=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.where(t,"!==",null)},te.prototype.wrap=function(t){return t instanceof this.constructor?t:"object"===(void 0===t?"undefined":Yt(t))?new this.constructor(t):new this.constructor([t])},te.prototype.zip=function(t){var e=this,r=t;r instanceof this.constructor&&(r=r.all());var n=this.items.map((function(t,n){return new e.constructor([t,r[n]])}));return new this.constructor(n)};var ee=function(t){return new te(t)};y.exports=ee,y.exports.collect=ee,y.exports.default=ee;var re=y.exports.Collection=te;class ne extends re{toObject(){return this.items}}class ie extends ne{constructor(t,e,r){super(t),this.meta=e,this.links=r}static fromResponse(t,e){const r=Object.values(t.data.data).map((t=>new h(e,t,!1)));return new ie(r,t.data.meta,t.data.links)}}class oe extends ne{constructor(t,e,r){super(...t),this.meta=e,this.links=r}static fromResponse(t,e){const r=Object.values(t.data.data).map((t=>new h(e,t,!1)));return new oe(r,t.data.meta,t.data.links)}}const se=[">","<","==","!=",">=","<=","!<","!>","<>"],ae=["BETWEEN","EXISTS","OR","AND","NOT","IN","ALL","ANY","LIKE","IS NULL","UNIQUE"],ce=[].concat(se).concat(ae),ue=t=>ce.includes(t);class pe{constructor(t){this.stream=t,this.parameters=[]}get http(){return this.stream.getStreams().http}find(t){return o(this,void 0,void 0,(function*(){return this.where("id",t).first()}))}first(){return o(this,void 0,void 0,(function*(){return(yield this.limit(1).get()).get(0)}))}cache(){return this}orderBy(t,e="desc"){return this.addParameter("orderBy",[t,e]),this}limit(t){return this.addParameter("limit",t),this}where(...t){let e,r,n,i;if(2===t.length?(e=t[0],r="==",n=t[1]):3===t.length?(e=t[0],r=t[1],n=t[2]):4===t.length&&(e=t[0],r=t[1],n=t[2],i=t[3]),!ue(r))throw new Error(`Criteria where() operator "${r}" not valid `);return this.addParameter("where",[e,r,n,i]),this}orWhere(...t){let e,r,n;if(2===t.length?(e=t[0],r="==",n=t[1]):(e=t[0],r=t[1],n=t[2]),!ue(r))throw new Error(`Criteria orWhere() operator "${r}" not valid `);return this.addParameter("where",[e,r,n,"or"]),this}get(){return o(this,void 0,void 0,(function*(){const t={parameters:this.compileParameters()},e=yield this.http.getEntries(this.stream.id,t);return ie.fromResponse(e,this.stream)}))}paginate(t=100,e=1){return o(this,void 0,void 0,(function*(){let r={parameters:this.compileParameters(),paginate:!0,per_page:t,page:e};const n=yield this.http.getEntries(this.stream.id,r);return oe.fromResponse(n,this.stream)}))}create(t){return o(this,void 0,void 0,(function*(){let e=this.newInstance(t);return yield e.save(),e}))}save(t){return o(this,void 0,void 0,(function*(){return t.save()}))}delete(){return this}newInstance(t){return new h(this.stream,t,!0)}getParameters(){return this.parameters}setParameters(t){return this.parameters=t,this}addParameter(t,e){return this.parameters.push({name:t,value:e}),this}compileParameters(){return this.parameters.map((t=>{return{[t.name]:(e=t.value,Array.isArray(e)?e:[e])};var e}))}}class le{constructor(t){this.stream=t}get http(){return this.stream.getStreams().http}all(){return o(this,void 0,void 0,(function*(){let t=yield this.http.getEntries(this.stream.id),e=t.data.data.map((t=>new h(this.stream,t,!1)));return new ie(e,t.data.meta,t.data.links)}))}find(t){return o(this,void 0,void 0,(function*(){return this.stream.getEntries().where("id",t).first()}))}findAll(t){return o(this,void 0,void 0,(function*(){return this.stream.getEntries().where("id","IN",t).get()}))}findBy(t,e){return o(this,void 0,void 0,(function*(){return this.stream.getEntries().where(t,e).first()}))}findAllWhere(t,e){return o(this,void 0,void 0,(function*(){return this.stream.getEntries().where(t,e).get()}))}create(t){return o(this,void 0,void 0,(function*(){let e=this.newCriteria().newInstance(t);return e.save(),e}))}save(t){return o(this,void 0,void 0,(function*(){return t.save()}))}delete(t){return o(this,void 0,void 0,(function*(){return yield this.http.deleteEntry(this.stream.id,t.id),!0}))}truncate(){return this}newInstance(t){return this.newCriteria().newInstance(t)}newCriteria(){return new pe(this.stream)}}var fe=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===he}(t)}(t)};var he="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function ye(t,e){return!1!==e.clone&&e.isMergeableObject(t)?be(Array.isArray(t)?[]:{},t,e):t}function me(t,e,r){return t.concat(e).map((function(t){return ye(t,r)}))}function de(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function ve(t,e){try{return e in t}catch(r){return!1}}function ge(t,e,r){var n={};return r.isMergeableObject(t)&&de(t).forEach((function(e){n[e]=ye(t[e],r)})),de(e).forEach((function(i){(function(t,e){return ve(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,i)||(n[i]=ve(t,i)&&r.isMergeableObject(e[i])?function(t,e){if(!e.customMerge)return be;var r=e.customMerge(t);return"function"==typeof r?r:be}(i,r)(t[i],e[i],r):ye(e[i],r))})),n}function be(t,e,r){(r=r||{}).arrayMerge=r.arrayMerge||me,r.isMergeableObject=r.isMergeableObject||fe,r.cloneUnlessOtherwiseSpecified=ye;var n=Array.isArray(e);return n===Array.isArray(t)?n?r.arrayMerge(t,e,r):ge(t,e,r):ye(e,r)}be.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,r){return be(t,r,e)}),{})};var we=be;class xe{static random(t=15){let e="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}static ensureLeft(t,e){return!1===t.startsWith(e)?e+t:t}static ensureRight(t,e){return!1===t.endsWith(e)?t+e:t}static stripLeft(t,e){return t.startsWith(e)?t.substr(e.length):t}static stripRight(t,e){return t.endsWith(e)?t.substr(0,t.length-e.length):t}static ucfirst(t){return t[0].toUpperCase()+t.slice(1)}static lcfirst(t){return t[0].toLowerCase()+t.slice(1)}static parameters(t,e){return Object.entries(e).forEach((([e,r])=>t=t.replace(new RegExp(":"+e,"g"),r))),t}}const je=(t,[e,r])=>Object.assign(Object.assign({},t),{[e]:r});class Ae extends ne{constructor(t){super(t)}serialize(){return this.toArray().map((([t,e])=>[t,e.serialize()])).reduce(je,{})}}var Oe,Se,_e,ke,Ee,Pe,Re;class Ie{constructor(t,e,r,n){Oe.set(this,void 0),Se.set(this,void 0),_e.set(this,void 0),ke.set(this,void 0),Ee.set(this,void 0),Pe.set(this,void 0),Re.set(this,void 0),a(this,_e,t,"f"),a(this,Se,e,"f"),a(this,ke,r,"f"),a(this,Ee,n,"f"),this.unserialize(e);const i=this;let o=new Proxy(this,{get:(t,e,r)=>"function"==typeof i[e.toString()]?i[e.toString()].bind(i):s(i,Se,"f")[e.toString()]?s(i,Se,"f")[e.toString()]:Reflect.has(s(t,Se,"f"),e)?Reflect.get(s(t,Se,"f"),e):Reflect.has(t,e)?Reflect.get(t,e).bind(this):void 0,set:(t,e,r,n)=>s(i,Se,"f")[e.toString()]?(s(i,Se,"f")[e.toString()]=r,!0):Reflect.has(t,e)?Reflect.set(t,e,r,n):Reflect.set(s(this,Se,"f"),e,r)});return a(this,Oe,o,"f"),o}getFields(){return s(this,Re,"f")}getStreams(){return s(this,_e,"f")}getMeta(){return s(this,ke,"f")}getLinks(){return s(this,Ee,"f")}getRepository(){return s(this,Pe,"f")||a(this,Pe,new le(s(this,Oe,"f")),"f"),s(this,Pe,"f")}getEntries(){return this.getRepository().newCriteria()}save(){return o(this,void 0,void 0,(function*(){try{return yield s(this,_e,"f").http.patchStream(s(this,Se,"f").id,this.serialize()),!0}catch(t){return!1}}))}delete(){return o(this,void 0,void 0,(function*(){try{return yield s(this,_e,"f").http.deleteStream(s(this,Se,"f").id),!0}catch(t){return!1}}))}unserialize(t){let e=Object.entries(t.fields||{}).map((([t,e])=>{if(c(e))return[t,new u(e)];if("string"==typeof e)return[t,new u({type:e})];throw new Error(`Could not unserialize stream "${this.handle}" because of field [${t}] with value ${e}`)})).reduce(je,{});a(this,Re,new Ae(e),"f")}serialize(){let t=we({},s(this,Se,"f"),{clone:!0});return t.fields=Object.entries(this.getFields().toObject()).map((([t,e])=>[t,e.serialize()])).reduce(je,{}),t}}Oe=new WeakMap,Se=new WeakMap,_e=new WeakMap,ke=new WeakMap,Ee=new WeakMap,Pe=new WeakMap,Re=new WeakMap;class $e{constructor(t){this.streams=t}get client(){return this.streams.client}get config(){return this.streams.config}getStreams(t={},e={}){return o(this,void 0,void 0,(function*(){return this.client.request("get","/streams",Object.assign({params:t},e))}))}postStream(t,e={}){return o(this,void 0,void 0,(function*(){return this.client.request("post","/streams",Object.assign({data:t},e))}))}getStream(t,e={},r={}){return o(this,void 0,void 0,(function*(){return this.client.request("get",`/streams/${t}`,r)}))}patchStream(t,e={},r={}){return o(this,void 0,void 0,(function*(){return this.client.request("patch",`/streams/${t}`,Object.assign({data:e},r))}))}putStream(t,e={},r={}){return o(this,void 0,void 0,(function*(){return this.client.request("put",`/streams/${t}`,Object.assign({data:e},r))}))}deleteStream(t,e={}){return o(this,void 0,void 0,(function*(){return this.client.request("delete",`/streams/${t}`,e)}))}getEntries(t,e={},r={}){return o(this,void 0,void 0,(function*(){return this.client.request("get",`/streams/${t}/entries`,Object.assign({params:e},r))}))}postEntry(t,e={},r={}){return o(this,void 0,void 0,(function*(){return this.client.request("post",`/streams/${t}/entries`,Object.assign({data:e},r))}))}getEntry(t,e,r={}){return o(this,void 0,void 0,(function*(){return this.client.request("get",`/streams/${t}/entries/${e}`,r)}))}patchEntry(t,e,r={},n={}){return o(this,void 0,void 0,(function*(){return this.client.request("patch",`/streams/${t}/entries/${e}`,Object.assign({data:r},n))}))}putEntry(t,e,r={},n={}){return o(this,void 0,void 0,(function*(){return this.client.request("put",`/streams/${t}/entries/${e}`,Object.assign({data:r},n))}))}deleteEntry(t,e,r={}){return o(this,void 0,void 0,(function*(){return this.client.request("delete",`/streams/${t}/entries/${e}`,r)}))}request(t,e,r={}){return o(this,void 0,void 0,(function*(){return(yield this.client.request(t,e,r)).data}))}}const Te=n.default.deprecate((()=>{}),"Hook.context is deprecated and will be removed"),Me=function(...t){return this.call=this._createCall("sync"),this.call(...t)},Fe=function(...t){return this.callAsync=this._createCall("async"),this.callAsync(...t)},Ne=function(...t){return this.promise=this._createCall("promise"),this.promise(...t)};class De{constructor(t=[],e){this._args=t,this.name=e,this.taps=[],this.interceptors=[],this._call=Me,this.call=Me,this._callAsync=Fe,this.callAsync=Fe,this._promise=Ne,this.promise=Ne,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}compile(t){throw new Error("Abstract: should be overridden")}_createCall(t){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:t})}_tap(t,e,r){if("string"==typeof e)e={name:e.trim()};else if("object"!=typeof e||null===e)throw new Error("Invalid tap options");if("string"!=typeof e.name||""===e.name)throw new Error("Missing name for tap");void 0!==e.context&&Te(),e=Object.assign({type:t,fn:r},e),e=this._runRegisterInterceptors(e),this._insert(e)}tap(t,e){this._tap("sync",t,e)}tapAsync(t,e){this._tap("async",t,e)}tapPromise(t,e){this._tap("promise",t,e)}_runRegisterInterceptors(t){for(const e of this.interceptors)if(e.register){const r=e.register(t);void 0!==r&&(t=r)}return t}withOptions(t){const e=e=>Object.assign({},t,"string"==typeof e?{name:e}:e);return{name:this.name,tap:(t,r)=>this.tap(e(t),r),tapAsync:(t,r)=>this.tapAsync(e(t),r),tapPromise:(t,r)=>this.tapPromise(e(t),r),intercept:t=>this.intercept(t),isUsed:()=>this.isUsed(),withOptions:t=>this.withOptions(e(t))}}isUsed(){return this.taps.length>0||this.interceptors.length>0}intercept(t){if(this._resetCompilation(),this.interceptors.push(Object.assign({},t)),t.register)for(let e=0;e<this.taps.length;e++)this.taps[e]=t.register(this.taps[e])}_resetCompilation(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}_insert(t){let e;this._resetCompilation(),"string"==typeof t.before?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));let r=0;"number"==typeof t.stage&&(r=t.stage);let n=this.taps.length;for(;n>0;){n--;const t=this.taps[n];this.taps[n+1]=t;const i=t.stage||0;if(e){if(e.has(t.name)){e.delete(t.name);continue}if(e.size>0)continue}if(!(i>r)){n++;break}}this.taps[n]=t}}Object.setPrototypeOf(De.prototype,null);var Ce=De;var We=class{constructor(t){this.config=t,this.options=void 0,this._args=void 0}create(t){let e;switch(this.init(t),this.options.type){case"sync":e=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:t=>`throw ${t};\n`,onResult:t=>`return ${t};\n`,resultReturns:!0,onDone:()=>"",rethrowIfPossible:!0}));break;case"async":e=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:t=>`_callback(${t});\n`,onResult:t=>`_callback(null, ${t});\n`,onDone:()=>"_callback();\n"}));break;case"promise":let t=!1;const r=this.contentWithInterceptors({onError:e=>(t=!0,`_error(${e});\n`),onResult:t=>`_resolve(${t});\n`,onDone:()=>"_resolve();\n"});let n="";n+='"use strict";\n',n+=this.header(),n+="return new Promise((function(_resolve, _reject) {\n",t&&(n+="var _sync = true;\n",n+="function _error(_err) {\n",n+="if(_sync)\n",n+="_resolve(Promise.resolve().then((function() { throw _err; })));\n",n+="else\n",n+="_reject(_err);\n",n+="};\n"),n+=r,t&&(n+="_sync = false;\n"),n+="}));\n",e=new Function(this.args(),n)}return this.deinit(),e}setup(t,e){t._x=e.taps.map((t=>t.fn))}init(t){this.options=t,this._args=t.args.slice()}deinit(){this.options=void 0,this._args=void 0}contentWithInterceptors(t){if(this.options.interceptors.length>0){const e=t.onError,r=t.onResult,n=t.onDone;let i="";for(let t=0;t<this.options.interceptors.length;t++){const e=this.options.interceptors[t];e.call&&(i+=`${this.getInterceptor(t)}.call(${this.args({before:e.context?"_context":void 0})});\n`)}return i+=this.content(Object.assign(t,{onError:e&&(t=>{let r="";for(let e=0;e<this.options.interceptors.length;e++){this.options.interceptors[e].error&&(r+=`${this.getInterceptor(e)}.error(${t});\n`)}return r+=e(t),r}),onResult:r&&(t=>{let e="";for(let r=0;r<this.options.interceptors.length;r++){this.options.interceptors[r].result&&(e+=`${this.getInterceptor(r)}.result(${t});\n`)}return e+=r(t),e}),onDone:n&&(()=>{let t="";for(let e=0;e<this.options.interceptors.length;e++){this.options.interceptors[e].done&&(t+=`${this.getInterceptor(e)}.done();\n`)}return t+=n(),t})})),i}return this.content(t)}header(){let t="";return this.needContext()?t+="var _context = {};\n":t+="var _context;\n",t+="var _x = this._x;\n",this.options.interceptors.length>0&&(t+="var _taps = this.taps;\n",t+="var _interceptors = this.interceptors;\n"),t}needContext(){for(const t of this.options.taps)if(t.context)return!0;return!1}callTap(t,{onError:e,onResult:r,onDone:n,rethrowIfPossible:i}){let o="",s=!1;for(let c=0;c<this.options.interceptors.length;c++){const e=this.options.interceptors[c];e.tap&&(s||(o+=`var _tap${t} = ${this.getTap(t)};\n`,s=!0),o+=`${this.getInterceptor(c)}.tap(${e.context?"_context, ":""}_tap${t});\n`)}o+=`var _fn${t} = ${this.getTapFn(t)};\n`;const a=this.options.taps[t];switch(a.type){case"sync":i||(o+=`var _hasError${t} = false;\n`,o+="try {\n"),o+=r?`var _result${t} = _fn${t}(${this.args({before:a.context?"_context":void 0})});\n`:`_fn${t}(${this.args({before:a.context?"_context":void 0})});\n`,i||(o+="} catch(_err) {\n",o+=`_hasError${t} = true;\n`,o+=e("_err"),o+="}\n",o+=`if(!_hasError${t}) {\n`),r&&(o+=r(`_result${t}`)),n&&(o+=n()),i||(o+="}\n");break;case"async":let s="";s+=r?`(function(_err${t}, _result${t}) {\n`:`(function(_err${t}) {\n`,s+=`if(_err${t}) {\n`,s+=e(`_err${t}`),s+="} else {\n",r&&(s+=r(`_result${t}`)),n&&(s+=n()),s+="}\n",s+="})",o+=`_fn${t}(${this.args({before:a.context?"_context":void 0,after:s})});\n`;break;case"promise":o+=`var _hasResult${t} = false;\n`,o+=`var _promise${t} = _fn${t}(${this.args({before:a.context?"_context":void 0})});\n`,o+=`if (!_promise${t} || !_promise${t}.then)\n`,o+=`  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${t} + ')');\n`,o+=`_promise${t}.then((function(_result${t}) {\n`,o+=`_hasResult${t} = true;\n`,r&&(o+=r(`_result${t}`)),n&&(o+=n()),o+=`}), function(_err${t}) {\n`,o+=`if(_hasResult${t}) throw _err${t};\n`,o+=e(`_err${t}`),o+="});\n"}return o}callTapsSeries({onError:t,onResult:e,resultReturns:r,onDone:n,doneReturns:i,rethrowIfPossible:o}){if(0===this.options.taps.length)return n();const s=this.options.taps.findIndex((t=>"sync"!==t.type)),a=r||i;let c="",u=n,p=0;for(let l=this.options.taps.length-1;l>=0;l--){const r=l;u!==n&&("sync"!==this.options.taps[r].type||p++>20)&&(p=0,c+=`function _next${r}() {\n`,c+=u(),c+="}\n",u=()=>`${a?"return ":""}_next${r}();\n`);const i=u,f=t=>t?"":n(),h=this.callTap(r,{onError:e=>t(r,e,i,f),onResult:e&&(t=>e(r,t,i,f)),onDone:!e&&i,rethrowIfPossible:o&&(s<0||r<s)});u=()=>h}return c+=u(),c}callTapsLooping({onError:t,onDone:e,rethrowIfPossible:r}){if(0===this.options.taps.length)return e();const n=this.options.taps.every((t=>"sync"===t.type));let i="";n||(i+="var _looper = (function() {\n",i+="var _loopAsync = false;\n"),i+="var _loop;\n",i+="do {\n",i+="_loop = false;\n";for(let o=0;o<this.options.interceptors.length;o++){const t=this.options.interceptors[o];t.loop&&(i+=`${this.getInterceptor(o)}.loop(${this.args({before:t.context?"_context":void 0})});\n`)}return i+=this.callTapsSeries({onError:t,onResult:(t,e,r,i)=>{let o="";return o+=`if(${e} !== undefined) {\n`,o+="_loop = true;\n",n||(o+="if(_loopAsync) _looper();\n"),o+=i(!0),o+="} else {\n",o+=r(),o+="}\n",o},onDone:e&&(()=>{let t="";return t+="if(!_loop) {\n",t+=e(),t+="}\n",t}),rethrowIfPossible:r&&n}),i+="} while(_loop);\n",n||(i+="_loopAsync = true;\n",i+="});\n",i+="_looper();\n"),i}callTapsParallel({onError:t,onResult:e,onDone:r,rethrowIfPossible:n,onTap:i=((t,e)=>e())}){if(this.options.taps.length<=1)return this.callTapsSeries({onError:t,onResult:e,onDone:r,rethrowIfPossible:n});let o="";o+="do {\n",o+=`var _counter = ${this.options.taps.length};\n`,r&&(o+="var _done = (function() {\n",o+=r(),o+="});\n");for(let s=0;s<this.options.taps.length;s++){const a=()=>r?"if(--_counter === 0) _done();\n":"--_counter;",c=t=>t||!r?"_counter = 0;\n":"_counter = 0;\n_done();\n";o+="if(_counter <= 0) break;\n",o+=i(s,(()=>this.callTap(s,{onError:e=>{let r="";return r+="if(_counter > 0) {\n",r+=t(s,e,a,c),r+="}\n",r},onResult:e&&(t=>{let r="";return r+="if(_counter > 0) {\n",r+=e(s,t,a,c),r+="}\n",r}),onDone:!e&&(()=>a()),rethrowIfPossible:n})),a,c)}return o+="} while(false);\n",o}args({before:t,after:e}={}){let r=this._args;return t&&(r=[t].concat(r)),e&&(r=r.concat(e)),0===r.length?"":r.join(", ")}getTapFn(t){return`_x[${t}]`}getTap(t){return`_taps[${t}]`}getInterceptor(t){return`_interceptors[${t}]`}};const qe=Ce,Ue=We;const ze=new class extends Ue{content({onError:t,onDone:e,rethrowIfPossible:r}){return this.callTapsSeries({onError:(e,r)=>t(r),onDone:e,rethrowIfPossible:r})}},Le=()=>{throw new Error("tapAsync is not supported on a SyncHook")},Be=()=>{throw new Error("tapPromise is not supported on a SyncHook")},He=function(t){return ze.setup(this,t),ze.create(t)};function Je(t=[],e){const r=new qe(t,e);return r.constructor=Je,r.tapAsync=Le,r.tapPromise=Be,r.compile=He,r}Je.prototype=null;var Ge=Je;const Ke=We;new class extends Ke{content({onError:t,onResult:e,resultReturns:r,onDone:n,rethrowIfPossible:i}){return this.callTapsSeries({onError:(e,r)=>t(r),onResult:(t,r,n)=>`if(${r} !== undefined) {\n${e(r)};\n} else {\n${n()}}\n`,resultReturns:r,onDone:n,rethrowIfPossible:i})}};const Ve=Ce,Qe=We;const Xe=new class extends Qe{content({onError:t,onResult:e,resultReturns:r,rethrowIfPossible:n}){return this.callTapsSeries({onError:(e,r)=>t(r),onResult:(t,e,r)=>{let n="";return n+=`if(${e} !== undefined) {\n`,n+=`${this._args[0]} = ${e};\n`,n+="}\n",n+=r(),n},onDone:()=>e(this._args[0]),doneReturns:r,rethrowIfPossible:n})}},Ye=()=>{throw new Error("tapAsync is not supported on a SyncWaterfallHook")},Ze=()=>{throw new Error("tapPromise is not supported on a SyncWaterfallHook")},tr=function(t){return Xe.setup(this,t),Xe.create(t)};function er(t=[],e){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const r=new Ve(t,e);return r.constructor=er,r.tapAsync=Ye,r.tapPromise=Ze,r.compile=tr,r}er.prototype=null;var rr=er;const nr=We;new class extends nr{content({onError:t,onDone:e,rethrowIfPossible:r}){return this.callTapsLooping({onError:(e,r)=>t(r),onDone:e,rethrowIfPossible:r})}};const ir=We;new class extends ir{content({onError:t,onDone:e}){return this.callTapsParallel({onError:(e,r,n,i)=>t(r)+i(!0),onDone:e})}};const or=We;new class extends or{content({onError:t,onResult:e,onDone:r}){let n="";return n+=`var _results = new Array(${this.options.taps.length});\n`,n+="var _checkDone = function() {\n",n+="for(var i = 0; i < _results.length; i++) {\n",n+="var item = _results[i];\n",n+="if(item === undefined) return false;\n",n+="if(item.result !== undefined) {\n",n+=e("item.result"),n+="return true;\n",n+="}\n",n+="if(item.error) {\n",n+=t("item.error"),n+="return true;\n",n+="}\n",n+="}\n",n+="return false;\n",n+="}\n",n+=this.callTapsParallel({onError:(t,e,r,n)=>{let i="";return i+=`if(${t} < _results.length && ((_results.length = ${t+1}), (_results[${t}] = { error: ${e} }), _checkDone())) {\n`,i+=n(!0),i+="} else {\n",i+=r(),i+="}\n",i},onResult:(t,e,r,n)=>{let i="";return i+=`if(${t} < _results.length && (${e} !== undefined && (_results.length = ${t+1}), (_results[${t}] = { result: ${e} }), _checkDone())) {\n`,i+=n(!0),i+="} else {\n",i+=r(),i+="}\n",i},onTap:(t,e,r,n)=>{let i="";return t>0&&(i+=`if(${t} >= _results.length) {\n`,i+=r(),i+="} else {\n"),i+=e(),t>0&&(i+="}\n"),i},onDone:r}),n}};const sr=We;new class extends sr{content({onError:t,onDone:e}){return this.callTapsSeries({onError:(e,r,n,i)=>t(r)+i(!0),onDone:e})}};const ar=We;new class extends ar{content({onError:t,onResult:e,resultReturns:r,onDone:n}){return this.callTapsSeries({onError:(e,r,n,i)=>t(r)+i(!0),onResult:(t,r,n)=>`if(${r} !== undefined) {\n${e(r)}\n} else {\n${n()}}\n`,resultReturns:r,onDone:n})}};const cr=We;new class extends cr{content({onError:t,onDone:e}){return this.callTapsLooping({onError:(e,r,n,i)=>t(r)+i(!0),onDone:e})}};const ur=Ce,pr=We;const lr=new class extends pr{content({onError:t,onResult:e}){return this.callTapsSeries({onError:(e,r,n,i)=>t(r)+i(!0),onResult:(t,e,r)=>{let n="";return n+=`if(${e} !== undefined) {\n`,n+=`${this._args[0]} = ${e};\n`,n+="}\n",n+=r(),n},onDone:()=>e(this._args[0])})}},fr=function(t){return lr.setup(this,t),lr.create(t)};function hr(t=[],e){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const r=new ur(t,e);return r.constructor=hr,r.compile=fr,r._call=void 0,r.call=void 0,r}hr.prototype=null;var yr=hr;const mr=n.default,dr=(t,e)=>e;class vr{constructor(t,e){this._map=new Map,this.name=e,this._factory=t,this._interceptors=[]}get(t){return this._map.get(t)}for(t){const e=this.get(t);if(void 0!==e)return e;let r=this._factory(t);const n=this._interceptors;for(let i=0;i<n.length;i++)r=n[i].factory(t,r);return this._map.set(t,r),r}intercept(t){this._interceptors.push(Object.assign({factory:dr},t))}}vr.prototype.tap=mr.deprecate((function(t,e,r){return this.for(t).tap(e,r)}),"HookMap#tap(key,) is deprecated. Use HookMap#for(key).tap() instead."),vr.prototype.tapAsync=mr.deprecate((function(t,e,r){return this.for(t).tapAsync(e,r)}),"HookMap#tapAsync(key,) is deprecated. Use HookMap#for(key).tapAsync() instead."),vr.prototype.tapPromise=mr.deprecate((function(t,e,r){return this.for(t).tapPromise(e,r)}),"HookMap#tapPromise(key,) is deprecated. Use HookMap#for(key).tapPromise() instead.");var gr=Ge,br=rr,wr=yr;class xr extends Error{constructor(t){super(`HTTP ${t.status} Error: ${t.statusText}\n        message: ${t.data.message}\n        file: ${t.data.file}\n        line: ${t.data.line}`),this.response=t,this.name="HTTPError"}}var jr="undefined"!=typeof Symbol&&Symbol,Ar=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0},Or="Function.prototype.bind called on incompatible ",Sr=Array.prototype.slice,_r=Object.prototype.toString,kr=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==_r.call(e))throw new TypeError(Or+e);for(var r,n=Sr.call(arguments,1),i=function(){if(this instanceof r){var i=e.apply(this,n.concat(Sr.call(arguments)));return Object(i)===i?i:this}return e.apply(t,n.concat(Sr.call(arguments)))},o=Math.max(0,e.length-n.length),s=[],a=0;a<o;a++)s.push("$"+a);if(r=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var c=function(){};c.prototype=e.prototype,r.prototype=new c,c.prototype=null}return r},Er=Function.prototype.bind||kr,Pr=Er.call(Function.call,Object.prototype.hasOwnProperty),Rr=SyntaxError,Ir=Function,$r=TypeError,Tr=function(t){try{return Ir('"use strict"; return ('+t+").constructor;")()}catch(e){}},Mr=Object.getOwnPropertyDescriptor;if(Mr)try{Mr({},"")}catch(Ki){Mr=null}var Fr=function(){throw new $r},Nr=Mr?function(){try{return Fr}catch(t){try{return Mr(arguments,"callee").get}catch(e){return Fr}}}():Fr,Dr="function"==typeof jr&&"function"==typeof Symbol&&"symbol"==typeof jr("foo")&&"symbol"==typeof Symbol("bar")&&Ar(),Cr=Object.getPrototypeOf||function(t){return t.__proto__},Wr={},qr="undefined"==typeof Uint8Array?undefined:Cr(Uint8Array),Ur={"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":Dr?Cr([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":Wr,"%AsyncGenerator%":Wr,"%AsyncGeneratorFunction%":Wr,"%AsyncIteratorPrototype%":Wr,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":Ir,"%GeneratorFunction%":Wr,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Dr?Cr(Cr([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Dr?Cr((new Map)[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Dr?Cr((new Set)[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Dr?Cr(""[Symbol.iterator]()):undefined,"%Symbol%":Dr?Symbol:undefined,"%SyntaxError%":Rr,"%ThrowTypeError%":Nr,"%TypedArray%":qr,"%TypeError%":$r,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet},zr=function t(e){var r;if("%AsyncFunction%"===e)r=Tr("async function () {}");else if("%GeneratorFunction%"===e)r=Tr("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=Tr("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&(r=Cr(i.prototype))}return Ur[e]=r,r},Lr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Br=Er,Hr=Pr,Jr=Br.call(Function.call,Array.prototype.concat),Gr=Br.call(Function.apply,Array.prototype.splice),Kr=Br.call(Function.call,String.prototype.replace),Vr=Br.call(Function.call,String.prototype.slice),Qr=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Xr=/\\(\\)?/g,Yr=function(t){var e=Vr(t,0,1),r=Vr(t,-1);if("%"===e&&"%"!==r)throw new Rr("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new Rr("invalid intrinsic syntax, expected opening `%`");var n=[];return Kr(t,Qr,(function(t,e,r,i){n[n.length]=r?Kr(i,Xr,"$1"):e||t})),n},Zr=function(t,e){var r,n=t;if(Hr(Lr,n)&&(n="%"+(r=Lr[n])[0]+"%"),Hr(Ur,n)){var i=Ur[n];if(i===Wr&&(i=zr(n)),void 0===i&&!e)throw new $r("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new Rr("intrinsic "+t+" does not exist!")},tn=function(t,e){if("string"!=typeof t||0===t.length)throw new $r("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new $r('"allowMissing" argument must be a boolean');var r=Yr(t),n=r.length>0?r[0]:"",i=Zr("%"+n+"%",e),o=i.name,s=i.value,a=!1,c=i.alias;c&&(n=c[0],Gr(r,Jr([0,1],c)));for(var u=1,p=!0;u<r.length;u+=1){var l=r[u],f=Vr(l,0,1),h=Vr(l,-1);if(('"'===f||"'"===f||"`"===f||'"'===h||"'"===h||"`"===h)&&f!==h)throw new Rr("property names with quotes must have matching quotes");if("constructor"!==l&&p||(a=!0),Hr(Ur,o="%"+(n+="."+l)+"%"))s=Ur[o];else if(null!=s){if(!(l in s)){if(!e)throw new $r("base intrinsic for "+t+" exists, but the property is not available.");return}if(Mr&&u+1>=r.length){var y=Mr(s,l);s=(p=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:s[l]}else p=Hr(s,l),s=s[l];p&&!a&&(Ur[o]=s)}}return s},en={exports:{}};!function(t){var e=Er,r=tn,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch(Ki){a=null}t.exports=function(t){var r=o(e,i,arguments);if(s&&a){var n=s(r,"length");n.configurable&&a(r,"length",{value:1+c(0,t.length-(arguments.length-1))})}return r};var u=function(){return o(e,n,arguments)};a?a(t.exports,"apply",{value:u}):t.exports.apply=u}(en);var rn=tn,nn=en.exports,on=nn(rn("String.prototype.indexOf")),sn=n.default.inspect,an="function"==typeof Map&&Map.prototype,cn=Object.getOwnPropertyDescriptor&&an?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,un=an&&cn&&"function"==typeof cn.get?cn.get:null,pn=an&&Map.prototype.forEach,ln="function"==typeof Set&&Set.prototype,fn=Object.getOwnPropertyDescriptor&&ln?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,hn=ln&&fn&&"function"==typeof fn.get?fn.get:null,yn=ln&&Set.prototype.forEach,mn="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,dn="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,vn="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,gn=Boolean.prototype.valueOf,bn=Object.prototype.toString,wn=Function.prototype.toString,xn=String.prototype.match,jn="function"==typeof BigInt?BigInt.prototype.valueOf:null,An=Object.getOwnPropertySymbols,On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Sn="function"==typeof Symbol&&"object"==typeof Symbol.iterator,_n="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Sn||"symbol")?Symbol.toStringTag:null,kn=Object.prototype.propertyIsEnumerable,En=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null),Pn=sn.custom,Rn=Pn&&Mn(Pn)?Pn:null;function In(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function $n(t){return String(t).replace(/"/g,"&quot;")}function Tn(t){return!("[object Array]"!==Dn(t)||_n&&"object"==typeof t&&_n in t)}function Mn(t){if(Sn)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!On)return!1;try{return On.call(t),!0}catch(Ki){}return!1}var Fn=Object.prototype.hasOwnProperty||function(t){return t in this};function Nn(t,e){return Fn.call(t,e)}function Dn(t){return bn.call(t)}function Cn(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Wn(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Wn(t.slice(0,e.maxStringLength),e)+n}return In(t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,qn),"single",e)}function qn(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+e.toString(16).toUpperCase()}function Un(t){return"Object("+t+")"}function zn(t){return t+" { ? }"}function Ln(t,e,r,n){return t+" ("+e+") {"+(n?Bn(r,n):r.join(", "))+"}"}function Bn(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+t.join(","+r)+"\n"+e.prev}function Hn(t,e){var r=Tn(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=Nn(t,i)?e(t[i],t):""}var o,s="function"==typeof An?An(t):[];if(Sn){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var c in t)Nn(t,c)&&(r&&String(Number(c))===c&&c<t.length||Sn&&o["$"+c]instanceof Symbol||(/[^\w$]/.test(c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t))));if("function"==typeof An)for(var u=0;u<s.length;u++)kn.call(t,s[u])&&n.push("["+e(s[u])+"]: "+e(t[s[u]],t));return n}var Jn,Gn,Kn,Vn,Qn=tn,Xn=function(t,e){var r=rn(t,!!e);return"function"==typeof r&&on(t,".prototype.")>-1?nn(r):r},Yn=function t(e,r,n,i){var o=r||{};if(Nn(o,"quoteStyle")&&"single"!==o.quoteStyle&&"double"!==o.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Nn(o,"maxStringLength")&&("number"==typeof o.maxStringLength?o.maxStringLength<0&&o.maxStringLength!==1/0:null!==o.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=!Nn(o,"customInspect")||o.customInspect;if("boolean"!=typeof s&&"symbol"!==s)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Nn(o,"indent")&&null!==o.indent&&"\t"!==o.indent&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return Wn(e,o);if("number"==typeof e)return 0===e?1/0/e>0?"0":"-0":String(e);if("bigint"==typeof e)return String(e)+"n";var a=void 0===o.depth?5:o.depth;if(void 0===n&&(n=0),n>=a&&a>0&&"object"==typeof e)return Tn(e)?"[Array]":"[Object]";var c=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=Array(t.indent+1).join(" ")}return{base:r,prev:Array(e+1).join(r)}}(o,n);if(void 0===i)i=[];else if(Cn(i,e)>=0)return"[Circular]";function u(e,r,s){if(r&&(i=i.slice()).push(r),s){var a={depth:o.depth};return Nn(o,"quoteStyle")&&(a.quoteStyle=o.quoteStyle),t(e,a,n+1,i)}return t(e,o,n+1,i)}if("function"==typeof e){var p=function(t){if(t.name)return t.name;var e=xn.call(wn.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),l=Hn(e,u);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(l.length>0?" { "+l.join(", ")+" }":"")}if(Mn(e)){var f=Sn?String(e).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):On.call(e);return"object"!=typeof e||Sn?f:Un(f)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var h="<"+String(e.nodeName).toLowerCase(),y=e.attributes||[],m=0;m<y.length;m++)h+=" "+y[m].name+"="+In($n(y[m].value),"double",o);return h+=">",e.childNodes&&e.childNodes.length&&(h+="..."),h+="</"+String(e.nodeName).toLowerCase()+">"}if(Tn(e)){if(0===e.length)return"[]";var d=Hn(e,u);return c&&!function(t){for(var e=0;e<t.length;e++)if(Cn(t[e],"\n")>=0)return!1;return!0}(d)?"["+Bn(d,c)+"]":"[ "+d.join(", ")+" ]"}if(function(t){return!("[object Error]"!==Dn(t)||_n&&"object"==typeof t&&_n in t)}(e)){var v=Hn(e,u);return 0===v.length?"["+String(e)+"]":"{ ["+String(e)+"] "+v.join(", ")+" }"}if("object"==typeof e&&s){if(Rn&&"function"==typeof e[Rn])return e[Rn]();if("symbol"!==s&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!un||!t||"object"!=typeof t)return!1;try{un.call(t);try{hn.call(t)}catch(h){return!0}return t instanceof Map}catch(Ki){}return!1}(e)){var g=[];return pn.call(e,(function(t,r){g.push(u(r,e,!0)+" => "+u(t,e))})),Ln("Map",un.call(e),g,c)}if(function(t){if(!hn||!t||"object"!=typeof t)return!1;try{hn.call(t);try{un.call(t)}catch(e){return!0}return t instanceof Set}catch(Ki){}return!1}(e)){var b=[];return yn.call(e,(function(t){b.push(u(t,e))})),Ln("Set",hn.call(e),b,c)}if(function(t){if(!mn||!t||"object"!=typeof t)return!1;try{mn.call(t,mn);try{dn.call(t,dn)}catch(h){return!0}return t instanceof WeakMap}catch(Ki){}return!1}(e))return zn("WeakMap");if(function(t){if(!dn||!t||"object"!=typeof t)return!1;try{dn.call(t,dn);try{mn.call(t,mn)}catch(h){return!0}return t instanceof WeakSet}catch(Ki){}return!1}(e))return zn("WeakSet");if(function(t){if(!vn||!t||"object"!=typeof t)return!1;try{return vn.call(t),!0}catch(Ki){}return!1}(e))return zn("WeakRef");if(function(t){return!("[object Number]"!==Dn(t)||_n&&"object"==typeof t&&_n in t)}(e))return Un(u(Number(e)));if(function(t){if(!t||"object"!=typeof t||!jn)return!1;try{return jn.call(t),!0}catch(Ki){}return!1}(e))return Un(u(jn.call(e)));if(function(t){return!("[object Boolean]"!==Dn(t)||_n&&"object"==typeof t&&_n in t)}(e))return Un(gn.call(e));if(function(t){return!("[object String]"!==Dn(t)||_n&&"object"==typeof t&&_n in t)}(e))return Un(u(String(e)));if(!function(t){return!("[object Date]"!==Dn(t)||_n&&"object"==typeof t&&_n in t)}(e)&&!function(t){return!("[object RegExp]"!==Dn(t)||_n&&"object"==typeof t&&_n in t)}(e)){var w=Hn(e,u),x=En?En(e)===Object.prototype:e instanceof Object||e.constructor===Object,j=e instanceof Object?"":"null prototype",A=!x&&_n&&Object(e)===e&&_n in e?Dn(e).slice(8,-1):j?"Object":"",O=(x||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(A||j?"["+[].concat(A||[],j||[]).join(": ")+"] ":"");return 0===w.length?O+"{}":c?O+"{"+Bn(w,c)+"}":O+"{ "+w.join(", ")+" }"}return String(e)},Zn=Qn("%TypeError%"),ti=Qn("%WeakMap%",!0),ei=Qn("%Map%",!0),ri=Xn("WeakMap.prototype.get",!0),ni=Xn("WeakMap.prototype.set",!0),ii=Xn("WeakMap.prototype.has",!0),oi=Xn("Map.prototype.get",!0),si=Xn("Map.prototype.set",!0),ai=Xn("Map.prototype.has",!0),ci=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},ui=String.prototype.replace,pi=/%20/g,li="RFC3986",fi={default:li,formatters:{RFC1738:function(t){return ui.call(t,pi,"+")},RFC3986:function(t){return String(t)}},RFC1738:"RFC1738",RFC3986:li},hi=fi,yi=Object.prototype.hasOwnProperty,mi=Array.isArray,di=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),vi=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r},gi={arrayToObject:vi,assign:function(t,e){return Object.keys(e).reduce((function(t,r){return t[r]=e[r],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var i=e[n],o=i.obj[i.prop],s=Object.keys(o),a=0;a<s.length;++a){var c=s[a],u=o[c];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(e.push({obj:o,prop:c}),r.push(u))}return function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(mi(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);e.obj[e.prop]=n}}}(e),t},decode:function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(Ki){return n}},encode:function(t,e,r,n,i){if(0===t.length)return t;var o=t;if("symbol"==typeof t?o=Symbol.prototype.toString.call(t):"string"!=typeof t&&(o=String(t)),"iso-8859-1"===r)return escape(o).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var s="",a=0;a<o.length;++a){var c=o.charCodeAt(a);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||i===hi.RFC1738&&(40===c||41===c)?s+=o.charAt(a):c<128?s+=di[c]:c<2048?s+=di[192|c>>6]+di[128|63&c]:c<55296||c>=57344?s+=di[224|c>>12]+di[128|c>>6&63]+di[128|63&c]:(c=65536+((1023&c)<<10|1023&o.charCodeAt(a+=1)),s+=di[240|c>>18]+di[128|c>>12&63]+di[128|c>>6&63]+di[128|63&c])}return s},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(mi(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)},merge:function t(e,r,n){if(!r)return e;if("object"!=typeof r){if(mi(e))e.push(r);else{if(!e||"object"!=typeof e)return[e,r];(n&&(n.plainObjects||n.allowPrototypes)||!yi.call(Object.prototype,r))&&(e[r]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(r);var i=e;return mi(e)&&!mi(r)&&(i=vi(e,n)),mi(e)&&mi(r)?(r.forEach((function(r,i){if(yi.call(e,i)){var o=e[i];o&&"object"==typeof o&&r&&"object"==typeof r?e[i]=t(o,r,n):e.push(r)}else e[i]=r})),e):Object.keys(r).reduce((function(e,i){var o=r[i];return e[i]=yi.call(e,i)?t(e[i],o,n):o,e}),i)}},bi=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new Zn("Side channel does not contain "+Yn(t))},get:function(n){if(ti&&n&&("object"==typeof n||"function"==typeof n)){if(t)return ri(t,n)}else if(ei){if(e)return oi(e,n)}else if(r)return function(t,e){var r=ci(t,e);return r&&r.value}(r,n)},has:function(n){if(ti&&n&&("object"==typeof n||"function"==typeof n)){if(t)return ii(t,n)}else if(ei){if(e)return ai(e,n)}else if(r)return function(t,e){return!!ci(t,e)}(r,n);return!1},set:function(n,i){ti&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new ti),ni(t,n,i)):ei?(e||(e=new ei),si(e,n,i)):(r||(r={key:{},next:null}),function(t,e,r){var n=ci(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,i))}};return n},wi=gi,xi=fi,ji=Object.prototype.hasOwnProperty,Ai={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},Oi=Array.isArray,Si=String.prototype.split,_i=Array.prototype.push,ki=function(t,e){_i.apply(t,Oi(e)?e:[e])},Ei=Date.prototype.toISOString,Pi=xi.default,Ri={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:wi.encode,encodeValuesOnly:!1,format:Pi,formatter:xi.formatters[Pi],indices:!1,serializeDate:function(t){return Ei.call(t)},skipNulls:!1,strictNullHandling:!1},Ii={},$i=function t(e,r,n,i,o,s,a,c,u,p,l,f,h,y,m){for(var d,v=e,g=m,b=0,w=!1;void 0!==(g=g.get(Ii))&&!w;){var x=g.get(e);if(b+=1,void 0!==x){if(x===b)throw new RangeError("Cyclic object value");w=!0}void 0===g.get(Ii)&&(b=0)}if("function"==typeof a?v=a(r,v):v instanceof Date?v=p(v):"comma"===n&&Oi(v)&&(v=wi.maybeMap(v,(function(t){return t instanceof Date?p(t):t}))),null===v){if(i)return s&&!h?s(r,Ri.encoder,y,"key",l):r;v=""}if("string"==typeof(d=v)||"number"==typeof d||"boolean"==typeof d||"symbol"==typeof d||"bigint"==typeof d||wi.isBuffer(v)){if(s){var j=h?r:s(r,Ri.encoder,y,"key",l);if("comma"===n&&h){for(var A=Si.call(String(v),","),O="",S=0;S<A.length;++S)O+=(0===S?"":",")+f(s(A[S],Ri.encoder,y,"value",l));return[f(j)+"="+O]}return[f(j)+"="+f(s(v,Ri.encoder,y,"value",l))]}return[f(r)+"="+f(String(v))]}var _,k=[];if(void 0===v)return k;if("comma"===n&&Oi(v))_=[{value:v.length>0?v.join(",")||null:void 0}];else if(Oi(a))_=a;else{var E=Object.keys(v);_=c?E.sort(c):E}for(var P=0;P<_.length;++P){var R=_[P],I="object"==typeof R&&void 0!==R.value?R.value:v[R];if(!o||null!==I){var $=Oi(v)?"function"==typeof n?n(r,R):r:r+(u?"."+R:"["+R+"]");m.set(e,b);var T=bi();T.set(Ii,m),ki(k,t(I,$,n,i,o,s,a,c,u,p,l,f,h,y,T))}}return k},Ti=gi,Mi=Object.prototype.hasOwnProperty,Fi=Array.isArray,Ni={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Ti.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Di=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},Ci=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Wi=function(t,e,r,n){if(t){var i=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(i),a=s?i.slice(0,s.index):i,c=[];if(a){if(!r.plainObjects&&Mi.call(Object.prototype,a)&&!r.allowPrototypes)return;c.push(a)}for(var u=0;r.depth>0&&null!==(s=o.exec(i))&&u<r.depth;){if(u+=1,!r.plainObjects&&Mi.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+i.slice(s.index)+"]"),function(t,e,r,n){for(var i=n?e:Ci(e,r),o=t.length-1;o>=0;--o){var s,a=t[o];if("[]"===a&&r.parseArrays)s=[].concat(i);else{s=r.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(c,10);r.parseArrays||""!==c?!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(s=[])[u]=i:s[c]=i:s={0:i}}i=s}return i}(c,e,r,n)}},qi=function(t,e){var r,n=t,i=function(t){if(!t)return Ri;if(null!=t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||Ri.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=xi.default;if(void 0!==t.format){if(!ji.call(xi.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n=xi.formatters[r],i=Ri.filter;return("function"==typeof t.filter||Oi(t.filter))&&(i=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:Ri.addQueryPrefix,allowDots:void 0===t.allowDots?Ri.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:Ri.charsetSentinel,delimiter:void 0===t.delimiter?Ri.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:Ri.encode,encoder:"function"==typeof t.encoder?t.encoder:Ri.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:Ri.encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:Ri.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:Ri.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:Ri.strictNullHandling}}(e);"function"==typeof i.filter?n=(0,i.filter)("",n):Oi(i.filter)&&(r=i.filter);var o=[];if("object"!=typeof n||null===n)return"";var s=Ai[e&&e.arrayFormat in Ai?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices"];r||(r=Object.keys(n)),i.sort&&r.sort(i.sort);for(var a=bi(),c=0;c<r.length;++c){var u=r[c];i.skipNulls&&null===n[u]||ki(o,$i(n[u],u,s,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,a))}var p=o.join(i.delimiter),l=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&(l+="iso-8859-1"===i.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),p.length>0?l+p:""},Ui=function(t,e){var r=function(t){if(!t)return Ni;if(null!=t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===t.allowDots?Ni.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:Ni.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:Ni.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:Ni.arrayLimit,charset:void 0===t.charset?Ni.charset:t.charset,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:Ni.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:Ni.comma,decoder:"function"==typeof t.decoder?t.decoder:Ni.decoder,delimiter:"string"==typeof t.delimiter||Ti.isRegExp(t.delimiter)?t.delimiter:Ni.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:Ni.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:Ni.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:Ni.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:Ni.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:Ni.strictNullHandling}}(e);if(""===t||null==t)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof t?function(t,e){var r,n={},i=(e.ignoreQueryPrefix?t.replace(/^\?/,""):t).split(e.delimiter,e.parameterLimit===1/0?void 0:e.parameterLimit),o=-1,s=e.charset;if(e.charsetSentinel)for(r=0;r<i.length;++r)0===i[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===i[r]?s="utf-8":"utf8=%26%2310003%3B"===i[r]&&(s="iso-8859-1"),o=r,r=i.length);for(r=0;r<i.length;++r)if(r!==o){var a,c,u=i[r],p=u.indexOf("]="),l=-1===p?u.indexOf("="):p+1;-1===l?(a=e.decoder(u,Ni.decoder,s,"key"),c=e.strictNullHandling?null:""):(a=e.decoder(u.slice(0,l),Ni.decoder,s,"key"),c=Ti.maybeMap(Ci(u.slice(l+1),e),(function(t){return e.decoder(t,Ni.decoder,s,"value")}))),c&&e.interpretNumericEntities&&"iso-8859-1"===s&&(c=Di(c)),u.indexOf("[]=")>-1&&(c=Fi(c)?[c]:c),n[a]=Mi.call(n,a)?Ti.combine(n[a],c):c}return n}(t,r):t,i=r.plainObjects?Object.create(null):{},o=Object.keys(n),s=0;s<o.length;++s){var a=o[s],c=Wi(a,n[a],r,"string"==typeof t);i=Ti.merge(i,c,r)}return!0===r.allowSparse?i:Ti.compact(i)},zi={formats:fi,parse:Ui,stringify:qi};class Li{constructor(t){Jn.set(this,void 0),a(this,Jn,new Headers(t),"f")}make(){return s(this,Jn,"f")}toObject(){let t={};return s(this,Jn,"f").forEach(((e,r)=>t[r]=e)),t}append(t,e){return s(this,Jn,"f").append(t,e),this}delete(t){return s(this,Jn,"f").delete(t),this}has(t){return s(this,Jn,"f").has(t)}get(t){return s(this,Jn,"f").get(t)}set(t,e){return s(this,Jn,"f").set(t,e),this}Accept(t){return this.set("Accept",t),this}ContentType(t){return this.set("Content-Type",t),this}IfNoneMatch(t){return this.set("If-None-Match",t),this}basic(t,e){return this.authorization("Basic",btoa(t+":"+e))}bearer(t){return this.authorization("Bearer",t)}authorization(t,e){return this.set("Authorization",t+" "+e),this}merge(t){return Object.entries(t).forEach((([t,e])=>{this.set(t,e)})),this}forEach(t,e){s(this,Jn,"f").forEach(t)}}function Bi(t,e=Request){return new Hi(t,e)}Jn=new WeakMap;class Hi{constructor(t,e){return this._clientConfig=t,this._Request=e,this._config={},this._params={},this._headers=new Li,new Proxy(this,{get:(t,e,r)=>Reflect.has(t,e)?Reflect.get(t,e,r):r=>(t._config[e]=r,t),set:(t,e,r,n)=>"function"==typeof t[e]?t[e](r):Reflect.set(t,e,r,n)})}getConfig(){return"json"===this._config.responseType&&(this._headers.has("Accept")||this._headers.set("Accept","application/json")),Object.assign(Object.assign({},this._config),{headers:this._headers,url:this._config.url?this.getUri(this._config.url):this._config.url})}hasParams(){return Object.keys(this._params).length>0}stringifyParams(t={}){return zi.stringify(this._params,Object.assign(Object.assign({},t),{arrayFormat:"indices"}))}getUri(t){let e="";return this.hasParams()&&(e=this.stringifyParams({addQueryPrefix:!0})),xe.ensureRight(this._clientConfig.baseURL,"/")+xe.stripLeft(t,"/")+e}merge(t){return Object.entries(t).forEach((([t,e])=>this[t](e))),this}header(t,e){return this._headers.set(t,e),this}param(t,e){return this._params[t]=e,this}headers(t){return this._headers.merge(t),this}params(t){return this._params=we.all([this._params,t]),this}data(t){return this._headers.set("Content-Type","application/json"),this._config.body=JSON.stringify(t),this}basic(t,e){return this._headers.basic(t,e)}bearer(t){return this._headers.bearer(t)}authorization(t,e){return this._headers.authorization(t,e),this}make(){const t=this.getConfig();let e=new this._Request(t.url,t);return e.config=t,e}}class Ji{constructor(t){this.hooks={createRequest:new br(["factory"]),request:new br(["request"]),response:new wr(["response","request"]),error:new gr(["error","response"])},this.config=we({headers:{"X-Requested-With":"XMLHttpRequest"},request:{method:"GET",credentials:"include",errorHandling:"throw"}},t),this.headers=new Li(this.config.headers)}request(t,e,r={}){return o(this,void 0,void 0,(function*(){r=this.mergeRequestConfig(r,{method:t,url:e});let n=this.createRequest(r);return this.fetch(n)}))}fetch(t){return o(this,void 0,void 0,(function*(){t=this.hooks.request.call(t);let e=yield fetch(t),r=yield function(t,e,r){return o(this,void 0,void 0,(function*(){const n=t.clone(),i=Object.getPrototypeOf(n),s=n.headers;if(delete i.headers,i.headers=new Li(s),n.request=e,n.config=r,n.data=yield function(t,e){return o(this,void 0,void 0,(function*(){try{if(e.responseType)switch(e.responseType){case"blob":return yield t.blob();case"arraybuffer":return yield t.arrayBuffer();case"document":case"text":return yield t.text();case"json":return yield t.json();case"stream":return(yield t.blob()).stream()}return"application/json"===t.headers.get("content-type")?t.json():t.text()}catch(Ki){return{}}}))}(t,r),!t.ok){try{n.errorText=yield t.text()}catch(Ki){n.errorText=""}n.error=new xr(n)}return n}))}(e,t,t.config);if(r=yield this.hooks.response.promise(r,t),r.error&&(this.hooks.error.call(r.error,r),"throw"===t.config.errorHandling))throw r.error;return r}))}createRequestFactory(){return Bi(this.config).headers(this.config.headers)}createRequest(t={}){let e=Bi(this.config).merge(t);return e.headers(this.headers.make()),this.hooks.createRequest.call(e).make()}mergeRequestConfig(...t){return we.all([this.config.request,...t||[]],{clone:!0})}}class Gi{constructor(t){this.hooks={all:new wr(["data"]),make:new wr(["data"]),maked:new gr(["stream"]),create:new wr(["data"]),created:new gr(["stream"])},Gn.set(this,void 0),Kn.set(this,void 0),this.config=Object.assign({Client:Ji,Http:$e},t)}get http(){return s(this,Gn,"f")||a(this,Gn,new this.config.Http(this),"f"),s(this,Gn,"f")}get client(){return s(this,Kn,"f")||a(this,Kn,new this.config.Client(this.config),"f"),s(this,Kn,"f")}all(){return o(this,void 0,void 0,(function*(){const t=yield this.http.getStreams(),e=[];for(let r of t.data.data){r=yield this.hooks.all.promise(r);const n=new Ie(this,r,t.data.meta,t.data.links);e.push(n)}return e}))}make(t){return o(this,void 0,void 0,(function*(){let e=yield this.http.getStream(t);e.data=yield this.hooks.make.promise(e.data);const{data:r,meta:n,links:i}=e.data,o=new Ie(this,r,n,i);return this.hooks.maked.call(o),o}))}create(t,e){return o(this,void 0,void 0,(function*(){let r=yield this.http.postStream(Object.assign({id:t,name:t},e));r.data=yield this.hooks.create.promise(r.data);const{data:n,meta:i,links:o}=r.data,s=new Ie(this,n,i,o);return this.hooks.created.call(s),s}))}entries(t){return o(this,void 0,void 0,(function*(){const e=yield this.make(t);return new pe(e)}))}repository(t){return o(this,void 0,void 0,(function*(){const e=yield this.make(t);return new le(e)}))}collection(){return o(this,void 0,void 0,(function*(){return new ne(yield this.all())}))}}Gn=new WeakMap,Kn=new WeakMap,exports.Method=void 0,(Vn=exports.Method||(exports.Method={})).connect="CONNECT",Vn.delete="DELETE",Vn.get="GET",Vn.head="HEAD",Vn.options="OPTIONS",Vn.patch="PATCH",Vn.post="POST",Vn.put="PUT",Vn.trace="TRACE";exports.Client=Ji,exports.Collection=ne,exports.Criteria=pe,exports.Entry=h,exports.EntryCollection=ie,exports.Field=u,exports.FieldCollection=Ae,exports.HTTPError=xr,exports.Http=$e,exports.PaginatedEntryCollection=oe,exports.Repository=le,exports.RequestFactory=Hi,exports.Str=xe,exports.Stream=Ie,exports.Streams=Gi,exports.comparisonOperators=se,exports.createRequestFactory=Bi,exports.default=Gi,exports.isFieldData=c,exports.isIField=t=>t&&t instanceof u,exports.logicalOperators=ae,exports.mergeHeaders=function(t,e){return new Headers(t).forEach(((t,r)=>e.set(r,t))),e},exports.mimes={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]},exports.objectify=je,exports.operators=ce;
