import t from"util";var e,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function n(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))}!function(t){!function(e){var n="object"==typeof r?r:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=i(t);function i(t,e){return function(r,n){"function"!=typeof t[r]&&Object.defineProperty(t,r,{configurable:!0,writable:!0,value:n}),e&&e(r,n)}}void 0===n.Reflect?n.Reflect=t:o=i(n.Reflect,o),function(t){var e=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!i&&!s,c={create:i?function(){return nt(Object.create(null))}:s?function(){return nt({__proto__:null})}:function(){return nt({})},has:a?function(t,r){return e.call(t,r)}:function(t,e){return e in t},get:a?function(t,r){return e.call(t,r)?t[r]:void 0}:function(t,e){return t[e]}},u=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,f=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?et():Set,h=new(l||"function"!=typeof WeakMap?rt():WeakMap);function y(t,e,r,n){if(M(r)){if(!H(t))throw new TypeError;if(!G(e))throw new TypeError;return S(t,e)}if(!H(t))throw new TypeError;if(!L(e))throw new TypeError;if(!L(n)&&!M(n)&&!D(n))throw new TypeError;return D(n)&&(n=void 0),A(t,e,r=B(r),n)}function d(t,e){function r(r,n){if(!L(r))throw new TypeError;if(!M(n)&&!V(n))throw new TypeError;$(t,e,r,n)}return r}function g(t,e,r,n){if(!L(r))throw new TypeError;return M(n)||(n=B(n)),$(t,e,r,n)}function m(t,e,r){if(!L(e))throw new TypeError;return M(r)||(r=B(r)),P(t,e,r)}function v(t,e,r){if(!L(e))throw new TypeError;return M(r)||(r=B(r)),x(t,e,r)}function b(t,e,r){if(!L(e))throw new TypeError;return M(r)||(r=B(r)),k(t,e,r)}function w(t,e,r){if(!L(e))throw new TypeError;return M(r)||(r=B(r)),R(t,e,r)}function _(t,e){if(!L(t))throw new TypeError;return M(e)||(e=B(e)),I(t,e)}function j(t,e){if(!L(t))throw new TypeError;return M(e)||(e=B(e)),T(t,e)}function O(t,e,r){if(!L(e))throw new TypeError;M(r)||(r=B(r));var n=E(e,r,!1);if(M(n))return!1;if(!n.delete(t))return!1;if(n.size>0)return!0;var o=h.get(e);return o.delete(r),o.size>0||h.delete(e),!0}function S(t,e){for(var r=t.length-1;r>=0;--r){var n=(0,t[r])(e);if(!M(n)&&!D(n)){if(!G(n))throw new TypeError;e=n}}return e}function A(t,e,r,n){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(e,r,n);if(!M(i)&&!D(i)){if(!L(i))throw new TypeError;n=i}}return n}function E(t,e,r){var n=h.get(t);if(M(n)){if(!r)return;n=new p,h.set(t,n)}var o=n.get(e);if(M(o)){if(!r)return;o=new p,n.set(e,o)}return o}function P(t,e,r){if(x(t,e,r))return!0;var n=Z(e);return!D(n)&&P(t,n,r)}function x(t,e,r){var n=E(e,r,!1);return!M(n)&&W(n.has(t))}function k(t,e,r){if(x(t,e,r))return R(t,e,r);var n=Z(e);return D(n)?void 0:k(t,n,r)}function R(t,e,r){var n=E(e,r,!1);if(!M(n))return n.get(t)}function $(t,e,r,n){E(r,n,!0).set(t,e)}function I(t,e){var r=T(t,e),n=Z(t);if(null===n)return r;var o=I(n,e);if(o.length<=0)return r;if(r.length<=0)return o;for(var i=new f,s=[],a=0,c=r;a<c.length;a++){i.has(p=c[a])||(i.add(p),s.push(p))}for(var u=0,l=o;u<l.length;u++){var p;i.has(p=l[u])||(i.add(p),s.push(p))}return s}function T(t,e){var r=[],n=E(t,e,!1);if(M(n))return r;for(var o=K(n.keys()),i=0;;){var s=X(o);if(!s)return r.length=i,r;var a=J(s);try{r[i]=a}catch(c){try{Y(o)}finally{throw c}}i++}}function C(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function M(t){return void 0===t}function D(t){return null===t}function F(t){return"symbol"==typeof t}function L(t){return"object"==typeof t?null!==t:"function"==typeof t}function N(t,e){switch(C(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var r=3===e?"string":5===e?"number":"default",o=Q(t,n);if(void 0!==o){var i=o.call(t,r);if(L(i))throw new TypeError;return i}return U(t,"default"===r?"number":r)}function U(t,e){if("string"===e){var r=t.toString;if(z(r))if(!L(o=r.call(t)))return o;if(z(n=t.valueOf))if(!L(o=n.call(t)))return o}else{var n;if(z(n=t.valueOf))if(!L(o=n.call(t)))return o;var o,i=t.toString;if(z(i))if(!L(o=i.call(t)))return o}throw new TypeError}function W(t){return!!t}function q(t){return""+t}function B(t){var e=N(t,3);return F(e)?e:q(e)}function H(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function z(t){return"function"==typeof t}function G(t){return"function"==typeof t}function V(t){switch(C(t)){case 3:case 4:return!0;default:return!1}}function Q(t,e){var r=t[e];if(null!=r){if(!z(r))throw new TypeError;return r}}function K(t){var e=Q(t,o);if(!z(e))throw new TypeError;var r=e.call(t);if(!L(r))throw new TypeError;return r}function J(t){return t.value}function X(t){var e=t.next();return!e.done&&e}function Y(t){var e=t.return;e&&e.call(t)}function Z(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===u)return e;if(e!==u)return e;var r=t.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return e;var o=n.constructor;return"function"!=typeof o||o===t?e:o}function tt(){var t={},e=[],r=function(){function t(t,e,r){this._index=0,this._keys=t,this._values=e,this._selector=r}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var r=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var r=this._find(t,!0);return this._values[r]=e,this},e.prototype.delete=function(e){var r=this._find(e,!1);if(r>=0){for(var n=this._keys.length,o=r+1;o<n;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new r(this._keys,this._values,n)},e.prototype.values=function(){return new r(this._keys,this._values,i)},e.prototype.entries=function(){return new r(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function n(t,e){return t}function i(t,e){return e}function s(t,e){return[t,e]}}function et(){return function(){function t(){this._map=new p}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}()}function rt(){var t=16,r=c.create(),n=o();return function(){function t(){this._key=o()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=o()},t}();function o(){var t;do{t="@@WeakMap@@"+u()}while(c.has(r,t));return r[t]=!0,t}function i(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:c.create()})}return t[n]}function s(t,e){for(var r=0;r<e;++r)t[r]=255*Math.random()|0;return t}function a(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t)}function u(){var e=a(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var r="",n=0;n<t;++n){var o=e[n];4!==n&&6!==n&&8!==n||(r+="-"),o<16&&(r+="0"),r+=o.toString(16).toLowerCase()}return r}}function nt(t){return t.__=void 0,delete t.__,t}t("decorate",y),t("metadata",d),t("defineMetadata",g),t("hasMetadata",m),t("hasOwnMetadata",v),t("getMetadata",b),t("getOwnMetadata",w),t("getMetadataKeys",_),t("getOwnMetadataKeys",j),t("deleteMetadata",O)}(o)}()}(e||(e={}));var o=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===i}(t)}(t)};var i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function s(t,e){return!1!==e.clone&&e.isMergeableObject(t)?p(Array.isArray(t)?[]:{},t,e):t}function a(t,e,r){return t.concat(e).map((function(t){return s(t,r)}))}function c(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function u(t,e){try{return e in t}catch(r){return!1}}function l(t,e,r){var n={};return r.isMergeableObject(t)&&c(t).forEach((function(e){n[e]=s(t[e],r)})),c(e).forEach((function(o){(function(t,e){return u(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(n[o]=u(t,o)&&r.isMergeableObject(e[o])?function(t,e){if(!e.customMerge)return p;var r=e.customMerge(t);return"function"==typeof r?r:p}(o,r)(t[o],e[o],r):s(e[o],r))})),n}function p(t,e,r){(r=r||{}).arrayMerge=r.arrayMerge||a,r.isMergeableObject=r.isMergeableObject||o,r.cloneUnlessOtherwiseSpecified=s;var n=Array.isArray(e);return n===Array.isArray(t)?n?r.arrayMerge(t,e,r):l(t,e,r):s(e,r)}p.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,r){return p(t,r,e)}),{})};var f=p;const h=t.deprecate((()=>{}),"Hook.context is deprecated and will be removed"),y=function(...t){return this.call=this._createCall("sync"),this.call(...t)},d=function(...t){return this.callAsync=this._createCall("async"),this.callAsync(...t)},g=function(...t){return this.promise=this._createCall("promise"),this.promise(...t)};class m{constructor(t=[],e){this._args=t,this.name=e,this.taps=[],this.interceptors=[],this._call=y,this.call=y,this._callAsync=d,this.callAsync=d,this._promise=g,this.promise=g,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}compile(t){throw new Error("Abstract: should be overridden")}_createCall(t){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:t})}_tap(t,e,r){if("string"==typeof e)e={name:e.trim()};else if("object"!=typeof e||null===e)throw new Error("Invalid tap options");if("string"!=typeof e.name||""===e.name)throw new Error("Missing name for tap");void 0!==e.context&&h(),e=Object.assign({type:t,fn:r},e),e=this._runRegisterInterceptors(e),this._insert(e)}tap(t,e){this._tap("sync",t,e)}tapAsync(t,e){this._tap("async",t,e)}tapPromise(t,e){this._tap("promise",t,e)}_runRegisterInterceptors(t){for(const e of this.interceptors)if(e.register){const r=e.register(t);void 0!==r&&(t=r)}return t}withOptions(t){const e=e=>Object.assign({},t,"string"==typeof e?{name:e}:e);return{name:this.name,tap:(t,r)=>this.tap(e(t),r),tapAsync:(t,r)=>this.tapAsync(e(t),r),tapPromise:(t,r)=>this.tapPromise(e(t),r),intercept:t=>this.intercept(t),isUsed:()=>this.isUsed(),withOptions:t=>this.withOptions(e(t))}}isUsed(){return this.taps.length>0||this.interceptors.length>0}intercept(t){if(this._resetCompilation(),this.interceptors.push(Object.assign({},t)),t.register)for(let e=0;e<this.taps.length;e++)this.taps[e]=t.register(this.taps[e])}_resetCompilation(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}_insert(t){let e;this._resetCompilation(),"string"==typeof t.before?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));let r=0;"number"==typeof t.stage&&(r=t.stage);let n=this.taps.length;for(;n>0;){n--;const t=this.taps[n];this.taps[n+1]=t;const o=t.stage||0;if(e){if(e.has(t.name)){e.delete(t.name);continue}if(e.size>0)continue}if(!(o>r)){n++;break}}this.taps[n]=t}}Object.setPrototypeOf(m.prototype,null);var v=m;var b=class{constructor(t){this.config=t,this.options=void 0,this._args=void 0}create(t){let e;switch(this.init(t),this.options.type){case"sync":e=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:t=>`throw ${t};\n`,onResult:t=>`return ${t};\n`,resultReturns:!0,onDone:()=>"",rethrowIfPossible:!0}));break;case"async":e=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:t=>`_callback(${t});\n`,onResult:t=>`_callback(null, ${t});\n`,onDone:()=>"_callback();\n"}));break;case"promise":let t=!1;const r=this.contentWithInterceptors({onError:e=>(t=!0,`_error(${e});\n`),onResult:t=>`_resolve(${t});\n`,onDone:()=>"_resolve();\n"});let n="";n+='"use strict";\n',n+=this.header(),n+="return new Promise((function(_resolve, _reject) {\n",t&&(n+="var _sync = true;\n",n+="function _error(_err) {\n",n+="if(_sync)\n",n+="_resolve(Promise.resolve().then((function() { throw _err; })));\n",n+="else\n",n+="_reject(_err);\n",n+="};\n"),n+=r,t&&(n+="_sync = false;\n"),n+="}));\n",e=new Function(this.args(),n)}return this.deinit(),e}setup(t,e){t._x=e.taps.map((t=>t.fn))}init(t){this.options=t,this._args=t.args.slice()}deinit(){this.options=void 0,this._args=void 0}contentWithInterceptors(t){if(this.options.interceptors.length>0){const e=t.onError,r=t.onResult,n=t.onDone;let o="";for(let t=0;t<this.options.interceptors.length;t++){const e=this.options.interceptors[t];e.call&&(o+=`${this.getInterceptor(t)}.call(${this.args({before:e.context?"_context":void 0})});\n`)}return o+=this.content(Object.assign(t,{onError:e&&(t=>{let r="";for(let e=0;e<this.options.interceptors.length;e++){this.options.interceptors[e].error&&(r+=`${this.getInterceptor(e)}.error(${t});\n`)}return r+=e(t),r}),onResult:r&&(t=>{let e="";for(let r=0;r<this.options.interceptors.length;r++){this.options.interceptors[r].result&&(e+=`${this.getInterceptor(r)}.result(${t});\n`)}return e+=r(t),e}),onDone:n&&(()=>{let t="";for(let e=0;e<this.options.interceptors.length;e++){this.options.interceptors[e].done&&(t+=`${this.getInterceptor(e)}.done();\n`)}return t+=n(),t})})),o}return this.content(t)}header(){let t="";return this.needContext()?t+="var _context = {};\n":t+="var _context;\n",t+="var _x = this._x;\n",this.options.interceptors.length>0&&(t+="var _taps = this.taps;\n",t+="var _interceptors = this.interceptors;\n"),t}needContext(){for(const t of this.options.taps)if(t.context)return!0;return!1}callTap(t,{onError:e,onResult:r,onDone:n,rethrowIfPossible:o}){let i="",s=!1;for(let c=0;c<this.options.interceptors.length;c++){const e=this.options.interceptors[c];e.tap&&(s||(i+=`var _tap${t} = ${this.getTap(t)};\n`,s=!0),i+=`${this.getInterceptor(c)}.tap(${e.context?"_context, ":""}_tap${t});\n`)}i+=`var _fn${t} = ${this.getTapFn(t)};\n`;const a=this.options.taps[t];switch(a.type){case"sync":o||(i+=`var _hasError${t} = false;\n`,i+="try {\n"),i+=r?`var _result${t} = _fn${t}(${this.args({before:a.context?"_context":void 0})});\n`:`_fn${t}(${this.args({before:a.context?"_context":void 0})});\n`,o||(i+="} catch(_err) {\n",i+=`_hasError${t} = true;\n`,i+=e("_err"),i+="}\n",i+=`if(!_hasError${t}) {\n`),r&&(i+=r(`_result${t}`)),n&&(i+=n()),o||(i+="}\n");break;case"async":let s="";s+=r?`(function(_err${t}, _result${t}) {\n`:`(function(_err${t}) {\n`,s+=`if(_err${t}) {\n`,s+=e(`_err${t}`),s+="} else {\n",r&&(s+=r(`_result${t}`)),n&&(s+=n()),s+="}\n",s+="})",i+=`_fn${t}(${this.args({before:a.context?"_context":void 0,after:s})});\n`;break;case"promise":i+=`var _hasResult${t} = false;\n`,i+=`var _promise${t} = _fn${t}(${this.args({before:a.context?"_context":void 0})});\n`,i+=`if (!_promise${t} || !_promise${t}.then)\n`,i+=`  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${t} + ')');\n`,i+=`_promise${t}.then((function(_result${t}) {\n`,i+=`_hasResult${t} = true;\n`,r&&(i+=r(`_result${t}`)),n&&(i+=n()),i+=`}), function(_err${t}) {\n`,i+=`if(_hasResult${t}) throw _err${t};\n`,i+=e(`_err${t}`),i+="});\n"}return i}callTapsSeries({onError:t,onResult:e,resultReturns:r,onDone:n,doneReturns:o,rethrowIfPossible:i}){if(0===this.options.taps.length)return n();const s=this.options.taps.findIndex((t=>"sync"!==t.type)),a=r||o;let c="",u=n,l=0;for(let p=this.options.taps.length-1;p>=0;p--){const r=p;u!==n&&("sync"!==this.options.taps[r].type||l++>20)&&(l=0,c+=`function _next${r}() {\n`,c+=u(),c+="}\n",u=()=>`${a?"return ":""}_next${r}();\n`);const o=u,f=t=>t?"":n(),h=this.callTap(r,{onError:e=>t(r,e,o,f),onResult:e&&(t=>e(r,t,o,f)),onDone:!e&&o,rethrowIfPossible:i&&(s<0||r<s)});u=()=>h}return c+=u(),c}callTapsLooping({onError:t,onDone:e,rethrowIfPossible:r}){if(0===this.options.taps.length)return e();const n=this.options.taps.every((t=>"sync"===t.type));let o="";n||(o+="var _looper = (function() {\n",o+="var _loopAsync = false;\n"),o+="var _loop;\n",o+="do {\n",o+="_loop = false;\n";for(let i=0;i<this.options.interceptors.length;i++){const t=this.options.interceptors[i];t.loop&&(o+=`${this.getInterceptor(i)}.loop(${this.args({before:t.context?"_context":void 0})});\n`)}return o+=this.callTapsSeries({onError:t,onResult:(t,e,r,o)=>{let i="";return i+=`if(${e} !== undefined) {\n`,i+="_loop = true;\n",n||(i+="if(_loopAsync) _looper();\n"),i+=o(!0),i+="} else {\n",i+=r(),i+="}\n",i},onDone:e&&(()=>{let t="";return t+="if(!_loop) {\n",t+=e(),t+="}\n",t}),rethrowIfPossible:r&&n}),o+="} while(_loop);\n",n||(o+="_loopAsync = true;\n",o+="});\n",o+="_looper();\n"),o}callTapsParallel({onError:t,onResult:e,onDone:r,rethrowIfPossible:n,onTap:o=((t,e)=>e())}){if(this.options.taps.length<=1)return this.callTapsSeries({onError:t,onResult:e,onDone:r,rethrowIfPossible:n});let i="";i+="do {\n",i+=`var _counter = ${this.options.taps.length};\n`,r&&(i+="var _done = (function() {\n",i+=r(),i+="});\n");for(let s=0;s<this.options.taps.length;s++){const a=()=>r?"if(--_counter === 0) _done();\n":"--_counter;",c=t=>t||!r?"_counter = 0;\n":"_counter = 0;\n_done();\n";i+="if(_counter <= 0) break;\n",i+=o(s,(()=>this.callTap(s,{onError:e=>{let r="";return r+="if(_counter > 0) {\n",r+=t(s,e,a,c),r+="}\n",r},onResult:e&&(t=>{let r="";return r+="if(_counter > 0) {\n",r+=e(s,t,a,c),r+="}\n",r}),onDone:!e&&(()=>a()),rethrowIfPossible:n})),a,c)}return i+="} while(false);\n",i}args({before:t,after:e}={}){let r=this._args;return t&&(r=[t].concat(r)),e&&(r=r.concat(e)),0===r.length?"":r.join(", ")}getTapFn(t){return`_x[${t}]`}getTap(t){return`_taps[${t}]`}getInterceptor(t){return`_interceptors[${t}]`}};const w=v,_=b;const j=new class extends _{content({onError:t,onDone:e,rethrowIfPossible:r}){return this.callTapsSeries({onError:(e,r)=>t(r),onDone:e,rethrowIfPossible:r})}},O=()=>{throw new Error("tapAsync is not supported on a SyncHook")},S=()=>{throw new Error("tapPromise is not supported on a SyncHook")},A=function(t){return j.setup(this,t),j.create(t)};function E(t=[],e){const r=new w(t,e);return r.constructor=E,r.tapAsync=O,r.tapPromise=S,r.compile=A,r}E.prototype=null;var P=E;const x=b;new class extends x{content({onError:t,onResult:e,resultReturns:r,onDone:n,rethrowIfPossible:o}){return this.callTapsSeries({onError:(e,r)=>t(r),onResult:(t,r,n)=>`if(${r} !== undefined) {\n${e(r)};\n} else {\n${n()}}\n`,resultReturns:r,onDone:n,rethrowIfPossible:o})}};const k=v,R=b;const $=new class extends R{content({onError:t,onResult:e,resultReturns:r,rethrowIfPossible:n}){return this.callTapsSeries({onError:(e,r)=>t(r),onResult:(t,e,r)=>{let n="";return n+=`if(${e} !== undefined) {\n`,n+=`${this._args[0]} = ${e};\n`,n+="}\n",n+=r(),n},onDone:()=>e(this._args[0]),doneReturns:r,rethrowIfPossible:n})}},I=()=>{throw new Error("tapAsync is not supported on a SyncWaterfallHook")},T=()=>{throw new Error("tapPromise is not supported on a SyncWaterfallHook")},C=function(t){return $.setup(this,t),$.create(t)};function M(t=[],e){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const r=new k(t,e);return r.constructor=M,r.tapAsync=I,r.tapPromise=T,r.compile=C,r}M.prototype=null;var D=M;const F=b;new class extends F{content({onError:t,onDone:e,rethrowIfPossible:r}){return this.callTapsLooping({onError:(e,r)=>t(r),onDone:e,rethrowIfPossible:r})}};const L=b;new class extends L{content({onError:t,onDone:e}){return this.callTapsParallel({onError:(e,r,n,o)=>t(r)+o(!0),onDone:e})}};const N=b;new class extends N{content({onError:t,onResult:e,onDone:r}){let n="";return n+=`var _results = new Array(${this.options.taps.length});\n`,n+="var _checkDone = function() {\n",n+="for(var i = 0; i < _results.length; i++) {\n",n+="var item = _results[i];\n",n+="if(item === undefined) return false;\n",n+="if(item.result !== undefined) {\n",n+=e("item.result"),n+="return true;\n",n+="}\n",n+="if(item.error) {\n",n+=t("item.error"),n+="return true;\n",n+="}\n",n+="}\n",n+="return false;\n",n+="}\n",n+=this.callTapsParallel({onError:(t,e,r,n)=>{let o="";return o+=`if(${t} < _results.length && ((_results.length = ${t+1}), (_results[${t}] = { error: ${e} }), _checkDone())) {\n`,o+=n(!0),o+="} else {\n",o+=r(),o+="}\n",o},onResult:(t,e,r,n)=>{let o="";return o+=`if(${t} < _results.length && (${e} !== undefined && (_results.length = ${t+1}), (_results[${t}] = { result: ${e} }), _checkDone())) {\n`,o+=n(!0),o+="} else {\n",o+=r(),o+="}\n",o},onTap:(t,e,r,n)=>{let o="";return t>0&&(o+=`if(${t} >= _results.length) {\n`,o+=r(),o+="} else {\n"),o+=e(),t>0&&(o+="}\n"),o},onDone:r}),n}};const U=b;new class extends U{content({onError:t,onDone:e}){return this.callTapsSeries({onError:(e,r,n,o)=>t(r)+o(!0),onDone:e})}};const W=b;new class extends W{content({onError:t,onResult:e,resultReturns:r,onDone:n}){return this.callTapsSeries({onError:(e,r,n,o)=>t(r)+o(!0),onResult:(t,r,n)=>`if(${r} !== undefined) {\n${e(r)}\n} else {\n${n()}}\n`,resultReturns:r,onDone:n})}};const q=b;new class extends q{content({onError:t,onDone:e}){return this.callTapsLooping({onError:(e,r,n,o)=>t(r)+o(!0),onDone:e})}};const B=v,H=b;const z=new class extends H{content({onError:t,onResult:e}){return this.callTapsSeries({onError:(e,r,n,o)=>t(r)+o(!0),onResult:(t,e,r)=>{let n="";return n+=`if(${e} !== undefined) {\n`,n+=`${this._args[0]} = ${e};\n`,n+="}\n",n+=r(),n},onDone:()=>e(this._args[0])})}},G=function(t){return z.setup(this,t),z.create(t)};function V(t=[],e){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const r=new B(t,e);return r.constructor=V,r.compile=G,r._call=void 0,r.call=void 0,r}V.prototype=null;var Q=V;const K=t,J=(t,e)=>e;class X{constructor(t,e){this._map=new Map,this.name=e,this._factory=t,this._interceptors=[]}get(t){return this._map.get(t)}for(t){const e=this.get(t);if(void 0!==e)return e;let r=this._factory(t);const n=this._interceptors;for(let o=0;o<n.length;o++)r=n[o].factory(t,r);return this._map.set(t,r),r}intercept(t){this._interceptors.push(Object.assign({factory:J},t))}}X.prototype.tap=K.deprecate((function(t,e,r){return this.for(t).tap(e,r)}),"HookMap#tap(key,…) is deprecated. Use HookMap#for(key).tap(…) instead."),X.prototype.tapAsync=K.deprecate((function(t,e,r){return this.for(t).tapAsync(e,r)}),"HookMap#tapAsync(key,…) is deprecated. Use HookMap#for(key).tapAsync(…) instead."),X.prototype.tapPromise=K.deprecate((function(t,e,r){return this.for(t).tapPromise(e,r)}),"HookMap#tapPromise(key,…) is deprecated. Use HookMap#for(key).tapPromise(…) instead.");var Y=P,Z=D,tt=Q;class et extends Error{constructor(t,e){super(`HTTP ${t.status} Error: ${t.statusText}`),this.response=t,this.request=e,this.name="HTTPError"}}class rt{static random(t=15){let e="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}static ensureLeft(t,e){return!1===t.startsWith(e)?e+t:t}static ensureRight(t,e){return!1===t.endsWith(e)?t+e:t}static stripLeft(t,e){return t.startsWith(e)?t.substr(e.length):t}static stripRight(t,e){return t.endsWith(e)?t.substr(0,t.length-e.length):t}static ucfirst(t){return t[0].toUpperCase()+t.slice(1)}static lcfirst(t){return t[0].toLowerCase()+t.slice(1)}static parameters(t,e){return Object.entries(e).forEach((([e,r])=>t=t.replace(new RegExp(":"+e,"g"),r))),t}}const nt=(t,[e,r])=>Object.assign(Object.assign({},t),{[e]:r});var ot={exports:{}};const it=(t,e)=>{if("string"!=typeof t&&!Array.isArray(t))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},0===(t=Array.isArray(t)?t.map((t=>t.trim())).filter((t=>t.length)).join("-"):t.trim()).length)return"";if(1===t.length)return e.pascalCase?t.toLocaleUpperCase(e.locale):t.toLocaleLowerCase(e.locale);return t!==t.toLocaleLowerCase(e.locale)&&(t=((t,e)=>{let r=!1,n=!1,o=!1;for(let i=0;i<t.length;i++){const s=t[i];r&&/[\p{Lu}]/u.test(s)?(t=t.slice(0,i)+"-"+t.slice(i),r=!1,o=n,n=!0,i++):n&&o&&/[\p{Ll}]/u.test(s)?(t=t.slice(0,i-1)+"-"+t.slice(i-1),o=n,n=!1,r=!0):(r=s.toLocaleLowerCase(e)===s&&s.toLocaleUpperCase(e)!==s,o=n,n=s.toLocaleUpperCase(e)===s&&s.toLocaleLowerCase(e)!==s)}return t})(t,e.locale)),t=t.replace(/^[_.\- ]+/,""),t=e.preserveConsecutiveUppercase?(t=>t.replace(/^[\p{Lu}](?![\p{Lu}])/gu,(t=>t.toLowerCase())))(t):t.toLocaleLowerCase(),e.pascalCase&&(t=t.charAt(0).toLocaleUpperCase(e.locale)+t.slice(1)),((t,e)=>t.replace(/[_.\- ]+([\p{Alpha}\p{N}_]|$)/gu,((t,r)=>r.toLocaleUpperCase(e.locale))).replace(/\d+([\p{Alpha}\p{N}_]|$)/gu,(t=>t.toLocaleUpperCase(e.locale))))(t,e)};ot.exports=it,ot.exports.default=it;var st=ot.exports,at="undefined"!=typeof Symbol&&Symbol,ct=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0},ut="Function.prototype.bind called on incompatible ",lt=Array.prototype.slice,pt=Object.prototype.toString,ft=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==pt.call(e))throw new TypeError(ut+e);for(var r,n=lt.call(arguments,1),o=function(){if(this instanceof r){var o=e.apply(this,n.concat(lt.call(arguments)));return Object(o)===o?o:this}return e.apply(t,n.concat(lt.call(arguments)))},i=Math.max(0,e.length-n.length),s=[],a=0;a<i;a++)s.push("$"+a);if(r=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(o),e.prototype){var c=function(){};c.prototype=e.prototype,r.prototype=new c,c.prototype=null}return r},ht=Function.prototype.bind||ft,yt=ht.call(Function.call,Object.prototype.hasOwnProperty),dt=SyntaxError,gt=Function,mt=TypeError,vt=function(t){try{return gt('"use strict"; return ('+t+").constructor;")()}catch(e){}},bt=Object.getOwnPropertyDescriptor;if(bt)try{bt({},"")}catch(Nr){bt=null}var wt=function(){throw new mt},_t=bt?function(){try{return wt}catch(t){try{return bt(arguments,"callee").get}catch(e){return wt}}}():wt,jt="function"==typeof at&&"function"==typeof Symbol&&"symbol"==typeof at("foo")&&"symbol"==typeof Symbol("bar")&&ct(),Ot=Object.getPrototypeOf||function(t){return t.__proto__},St={},At="undefined"==typeof Uint8Array?undefined:Ot(Uint8Array),Et={"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":jt?Ot([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":St,"%AsyncGenerator%":St,"%AsyncGeneratorFunction%":St,"%AsyncIteratorPrototype%":St,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":gt,"%GeneratorFunction%":St,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":jt?Ot(Ot([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&jt?Ot((new Map)[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&jt?Ot((new Set)[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":jt?Ot(""[Symbol.iterator]()):undefined,"%Symbol%":jt?Symbol:undefined,"%SyntaxError%":dt,"%ThrowTypeError%":_t,"%TypedArray%":At,"%TypeError%":mt,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet},Pt=function t(e){var r;if("%AsyncFunction%"===e)r=vt("async function () {}");else if("%GeneratorFunction%"===e)r=vt("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=vt("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(r=Ot(o.prototype))}return Et[e]=r,r},xt={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},kt=ht,Rt=yt,$t=kt.call(Function.call,Array.prototype.concat),It=kt.call(Function.apply,Array.prototype.splice),Tt=kt.call(Function.call,String.prototype.replace),Ct=kt.call(Function.call,String.prototype.slice),Mt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Dt=/\\(\\)?/g,Ft=function(t){var e=Ct(t,0,1),r=Ct(t,-1);if("%"===e&&"%"!==r)throw new dt("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new dt("invalid intrinsic syntax, expected opening `%`");var n=[];return Tt(t,Mt,(function(t,e,r,o){n[n.length]=r?Tt(o,Dt,"$1"):e||t})),n},Lt=function(t,e){var r,n=t;if(Rt(xt,n)&&(n="%"+(r=xt[n])[0]+"%"),Rt(Et,n)){var o=Et[n];if(o===St&&(o=Pt(n)),void 0===o&&!e)throw new mt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new dt("intrinsic "+t+" does not exist!")},Nt=function(t,e){if("string"!=typeof t||0===t.length)throw new mt("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new mt('"allowMissing" argument must be a boolean');var r=Ft(t),n=r.length>0?r[0]:"",o=Lt("%"+n+"%",e),i=o.name,s=o.value,a=!1,c=o.alias;c&&(n=c[0],It(r,$t([0,1],c)));for(var u=1,l=!0;u<r.length;u+=1){var p=r[u],f=Ct(p,0,1),h=Ct(p,-1);if(('"'===f||"'"===f||"`"===f||'"'===h||"'"===h||"`"===h)&&f!==h)throw new dt("property names with quotes must have matching quotes");if("constructor"!==p&&l||(a=!0),Rt(Et,i="%"+(n+="."+p)+"%"))s=Et[i];else if(null!=s){if(!(p in s)){if(!e)throw new mt("base intrinsic for "+t+" exists, but the property is not available.");return}if(bt&&u+1>=r.length){var y=bt(s,p);s=(l=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:s[p]}else l=Rt(s,p),s=s[p];l&&!a&&(Et[i]=s)}}return s},Ut={exports:{}};!function(t){var e=ht,r=Nt,n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),i=r("%Reflect.apply%",!0)||e.call(o,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch(Nr){a=null}t.exports=function(t){var r=i(e,o,arguments);if(s&&a){var n=s(r,"length");n.configurable&&a(r,"length",{value:1+c(0,t.length-(arguments.length-1))})}return r};var u=function(){return i(e,n,arguments)};a?a(t.exports,"apply",{value:u}):t.exports.apply=u}(Ut);var Wt=Nt,qt=Ut.exports,Bt=qt(Wt("String.prototype.indexOf")),Ht=t.inspect,zt="function"==typeof Map&&Map.prototype,Gt=Object.getOwnPropertyDescriptor&&zt?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Vt=zt&&Gt&&"function"==typeof Gt.get?Gt.get:null,Qt=zt&&Map.prototype.forEach,Kt="function"==typeof Set&&Set.prototype,Jt=Object.getOwnPropertyDescriptor&&Kt?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Xt=Kt&&Jt&&"function"==typeof Jt.get?Jt.get:null,Yt=Kt&&Set.prototype.forEach,Zt="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,te="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,ee="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,re=Boolean.prototype.valueOf,ne=Object.prototype.toString,oe=Function.prototype.toString,ie=String.prototype.match,se="function"==typeof BigInt?BigInt.prototype.valueOf:null,ae=Object.getOwnPropertySymbols,ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,ue="function"==typeof Symbol&&"object"==typeof Symbol.iterator,le=Object.prototype.propertyIsEnumerable,pe=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null),fe=Ht.custom,he=fe&&ve(fe)?fe:null,ye="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function de(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function ge(t){return String(t).replace(/"/g,"&quot;")}function me(t){return!("[object Array]"!==_e(t)||ye&&"object"==typeof t&&ye in t)}function ve(t){if(ue)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!ce)return!1;try{return ce.call(t),!0}catch(Nr){}return!1}var be=Object.prototype.hasOwnProperty||function(t){return t in this};function we(t,e){return be.call(t,e)}function _e(t){return ne.call(t)}function je(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Oe(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Oe(t.slice(0,e.maxStringLength),e)+n}return de(t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,Se),"single",e)}function Se(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+e.toString(16).toUpperCase()}function Ae(t){return"Object("+t+")"}function Ee(t){return t+" { ? }"}function Pe(t,e,r,n){return t+" ("+e+") {"+(n?xe(r,n):r.join(", "))+"}"}function xe(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+t.join(","+r)+"\n"+e.prev}function ke(t,e){var r=me(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=we(t,o)?e(t[o],t):""}var i,s="function"==typeof ae?ae(t):[];if(ue){i={};for(var a=0;a<s.length;a++)i["$"+s[a]]=s[a]}for(var c in t)we(t,c)&&(r&&String(Number(c))===c&&c<t.length||ue&&i["$"+c]instanceof Symbol||(/[^\w$]/.test(c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t))));if("function"==typeof ae)for(var u=0;u<s.length;u++)le.call(t,s[u])&&n.push("["+e(s[u])+"]: "+e(t[s[u]],t));return n}var Re=Nt,$e=function(t,e){var r=Wt(t,!!e);return"function"==typeof r&&Bt(t,".prototype.")>-1?qt(r):r},Ie=function t(e,r,n,o){var i=r||{};if(we(i,"quoteStyle")&&"single"!==i.quoteStyle&&"double"!==i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(we(i,"maxStringLength")&&("number"==typeof i.maxStringLength?i.maxStringLength<0&&i.maxStringLength!==1/0:null!==i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=!we(i,"customInspect")||i.customInspect;if("boolean"!=typeof s&&"symbol"!==s)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(we(i,"indent")&&null!==i.indent&&"\t"!==i.indent&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return Oe(e,i);if("number"==typeof e)return 0===e?1/0/e>0?"0":"-0":String(e);if("bigint"==typeof e)return String(e)+"n";var a=void 0===i.depth?5:i.depth;if(void 0===n&&(n=0),n>=a&&a>0&&"object"==typeof e)return me(e)?"[Array]":"[Object]";var c=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=Array(t.indent+1).join(" ")}return{base:r,prev:Array(e+1).join(r)}}(i,n);if(void 0===o)o=[];else if(je(o,e)>=0)return"[Circular]";function u(e,r,s){if(r&&(o=o.slice()).push(r),s){var a={depth:i.depth};return we(i,"quoteStyle")&&(a.quoteStyle=i.quoteStyle),t(e,a,n+1,o)}return t(e,i,n+1,o)}if("function"==typeof e){var l=function(t){if(t.name)return t.name;var e=ie.call(oe.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),p=ke(e,u);return"[Function"+(l?": "+l:" (anonymous)")+"]"+(p.length>0?" { "+p.join(", ")+" }":"")}if(ve(e)){var f=ue?String(e).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):ce.call(e);return"object"!=typeof e||ue?f:Ae(f)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var h="<"+String(e.nodeName).toLowerCase(),y=e.attributes||[],d=0;d<y.length;d++)h+=" "+y[d].name+"="+de(ge(y[d].value),"double",i);return h+=">",e.childNodes&&e.childNodes.length&&(h+="..."),h+="</"+String(e.nodeName).toLowerCase()+">"}if(me(e)){if(0===e.length)return"[]";var g=ke(e,u);return c&&!function(t){for(var e=0;e<t.length;e++)if(je(t[e],"\n")>=0)return!1;return!0}(g)?"["+xe(g,c)+"]":"[ "+g.join(", ")+" ]"}if(function(t){return!("[object Error]"!==_e(t)||ye&&"object"==typeof t&&ye in t)}(e)){var m=ke(e,u);return 0===m.length?"["+String(e)+"]":"{ ["+String(e)+"] "+m.join(", ")+" }"}if("object"==typeof e&&s){if(he&&"function"==typeof e[he])return e[he]();if("symbol"!==s&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!Vt||!t||"object"!=typeof t)return!1;try{Vt.call(t);try{Xt.call(t)}catch(h){return!0}return t instanceof Map}catch(Nr){}return!1}(e)){var v=[];return Qt.call(e,(function(t,r){v.push(u(r,e,!0)+" => "+u(t,e))})),Pe("Map",Vt.call(e),v,c)}if(function(t){if(!Xt||!t||"object"!=typeof t)return!1;try{Xt.call(t);try{Vt.call(t)}catch(e){return!0}return t instanceof Set}catch(Nr){}return!1}(e)){var b=[];return Yt.call(e,(function(t){b.push(u(t,e))})),Pe("Set",Xt.call(e),b,c)}if(function(t){if(!Zt||!t||"object"!=typeof t)return!1;try{Zt.call(t,Zt);try{te.call(t,te)}catch(h){return!0}return t instanceof WeakMap}catch(Nr){}return!1}(e))return Ee("WeakMap");if(function(t){if(!te||!t||"object"!=typeof t)return!1;try{te.call(t,te);try{Zt.call(t,Zt)}catch(h){return!0}return t instanceof WeakSet}catch(Nr){}return!1}(e))return Ee("WeakSet");if(function(t){if(!ee||!t||"object"!=typeof t)return!1;try{return ee.call(t),!0}catch(Nr){}return!1}(e))return Ee("WeakRef");if(function(t){return!("[object Number]"!==_e(t)||ye&&"object"==typeof t&&ye in t)}(e))return Ae(u(Number(e)));if(function(t){if(!t||"object"!=typeof t||!se)return!1;try{return se.call(t),!0}catch(Nr){}return!1}(e))return Ae(u(se.call(e)));if(function(t){return!("[object Boolean]"!==_e(t)||ye&&"object"==typeof t&&ye in t)}(e))return Ae(re.call(e));if(function(t){return!("[object String]"!==_e(t)||ye&&"object"==typeof t&&ye in t)}(e))return Ae(u(String(e)));if(!function(t){return!("[object Date]"!==_e(t)||ye&&"object"==typeof t&&ye in t)}(e)&&!function(t){return!("[object RegExp]"!==_e(t)||ye&&"object"==typeof t&&ye in t)}(e)){var w=ke(e,u),_=pe?pe(e)===Object.prototype:e instanceof Object||e.constructor===Object,j=e instanceof Object?"":"null prototype",O=!_&&ye&&Object(e)===e&&ye in e?_e(e).slice(8,-1):j?"Object":"",S=(_||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(O||j?"["+[].concat(O||[],j||[]).join(": ")+"] ":"");return 0===w.length?S+"{}":c?S+"{"+xe(w,c)+"}":S+"{ "+w.join(", ")+" }"}return String(e)},Te=Re("%TypeError%"),Ce=Re("%WeakMap%",!0),Me=Re("%Map%",!0),De=$e("WeakMap.prototype.get",!0),Fe=$e("WeakMap.prototype.set",!0),Le=$e("WeakMap.prototype.has",!0),Ne=$e("Map.prototype.get",!0),Ue=$e("Map.prototype.set",!0),We=$e("Map.prototype.has",!0),qe=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},Be=String.prototype.replace,He=/%20/g,ze="RFC3986",Ge={default:ze,formatters:{RFC1738:function(t){return Be.call(t,He,"+")},RFC3986:function(t){return String(t)}},RFC1738:"RFC1738",RFC3986:ze},Ve=Ge,Qe=Object.prototype.hasOwnProperty,Ke=Array.isArray,Je=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Xe=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r},Ye={arrayToObject:Xe,assign:function(t,e){return Object.keys(e).reduce((function(t,r){return t[r]=e[r],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var o=e[n],i=o.obj[o.prop],s=Object.keys(i),a=0;a<s.length;++a){var c=s[a],u=i[c];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(e.push({obj:i,prop:c}),r.push(u))}return function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(Ke(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);e.obj[e.prop]=n}}}(e),t},decode:function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(Nr){return n}},encode:function(t,e,r,n,o){if(0===t.length)return t;var i=t;if("symbol"==typeof t?i=Symbol.prototype.toString.call(t):"string"!=typeof t&&(i=String(t)),"iso-8859-1"===r)return escape(i).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var s="",a=0;a<i.length;++a){var c=i.charCodeAt(a);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===Ve.RFC1738&&(40===c||41===c)?s+=i.charAt(a):c<128?s+=Je[c]:c<2048?s+=Je[192|c>>6]+Je[128|63&c]:c<55296||c>=57344?s+=Je[224|c>>12]+Je[128|c>>6&63]+Je[128|63&c]:(c=65536+((1023&c)<<10|1023&i.charCodeAt(a+=1)),s+=Je[240|c>>18]+Je[128|c>>12&63]+Je[128|c>>6&63]+Je[128|63&c])}return s},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(Ke(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)},merge:function t(e,r,n){if(!r)return e;if("object"!=typeof r){if(Ke(e))e.push(r);else{if(!e||"object"!=typeof e)return[e,r];(n&&(n.plainObjects||n.allowPrototypes)||!Qe.call(Object.prototype,r))&&(e[r]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(r);var o=e;return Ke(e)&&!Ke(r)&&(o=Xe(e,n)),Ke(e)&&Ke(r)?(r.forEach((function(r,o){if(Qe.call(e,o)){var i=e[o];i&&"object"==typeof i&&r&&"object"==typeof r?e[o]=t(i,r,n):e.push(r)}else e[o]=r})),e):Object.keys(r).reduce((function(e,o){var i=r[o];return e[o]=Qe.call(e,o)?t(e[o],i,n):i,e}),o)}},Ze=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new Te("Side channel does not contain "+Ie(t))},get:function(n){if(Ce&&n&&("object"==typeof n||"function"==typeof n)){if(t)return De(t,n)}else if(Me){if(e)return Ne(e,n)}else if(r)return function(t,e){var r=qe(t,e);return r&&r.value}(r,n)},has:function(n){if(Ce&&n&&("object"==typeof n||"function"==typeof n)){if(t)return Le(t,n)}else if(Me){if(e)return We(e,n)}else if(r)return function(t,e){return!!qe(t,e)}(r,n);return!1},set:function(n,o){Ce&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new Ce),Fe(t,n,o)):Me?(e||(e=new Me),Ue(e,n,o)):(r||(r={key:{},next:null}),function(t,e,r){var n=qe(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,o))}};return n},tr=Ye,er=Ge,rr=Object.prototype.hasOwnProperty,nr={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},or=Array.isArray,ir=Array.prototype.push,sr=function(t,e){ir.apply(t,or(e)?e:[e])},ar=Date.prototype.toISOString,cr=er.default,ur={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:tr.encode,encodeValuesOnly:!1,format:cr,formatter:er.formatters[cr],indices:!1,serializeDate:function(t){return ar.call(t)},skipNulls:!1,strictNullHandling:!1},lr=function t(e,r,n,o,i,s,a,c,u,l,p,f,h,y,d){var g,m=e;if(d.has(e))throw new RangeError("Cyclic object value");if("function"==typeof a?m=a(r,m):m instanceof Date?m=l(m):"comma"===n&&or(m)&&(m=tr.maybeMap(m,(function(t){return t instanceof Date?l(t):t}))),null===m){if(o)return s&&!h?s(r,ur.encoder,y,"key",p):r;m=""}if("string"==typeof(g=m)||"number"==typeof g||"boolean"==typeof g||"symbol"==typeof g||"bigint"==typeof g||tr.isBuffer(m))return s?[f(h?r:s(r,ur.encoder,y,"key",p))+"="+f(s(m,ur.encoder,y,"value",p))]:[f(r)+"="+f(String(m))];var v,b=[];if(void 0===m)return b;if("comma"===n&&or(m))v=[{value:m.length>0?m.join(",")||null:void 0}];else if(or(a))v=a;else{var w=Object.keys(m);v=c?w.sort(c):w}for(var _=0;_<v.length;++_){var j=v[_],O="object"==typeof j&&void 0!==j.value?j.value:m[j];if(!i||null!==O){var S=or(m)?"function"==typeof n?n(r,j):r:r+(u?"."+j:"["+j+"]");d.set(e,!0);var A=Ze();sr(b,t(O,S,n,o,i,s,a,c,u,l,p,f,h,y,A))}}return b},pr=Ye,fr=Object.prototype.hasOwnProperty,hr=Array.isArray,yr={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:pr.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},dr=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},gr=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},mr=function(t,e,r,n){if(t){var o=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(o),a=s?o.slice(0,s.index):o,c=[];if(a){if(!r.plainObjects&&fr.call(Object.prototype,a)&&!r.allowPrototypes)return;c.push(a)}for(var u=0;r.depth>0&&null!==(s=i.exec(o))&&u<r.depth;){if(u+=1,!r.plainObjects&&fr.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+o.slice(s.index)+"]"),function(t,e,r,n){for(var o=n?e:gr(e,r),i=t.length-1;i>=0;--i){var s,a=t[i];if("[]"===a&&r.parseArrays)s=[].concat(o);else{s=r.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(c,10);r.parseArrays||""!==c?!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(s=[])[u]=o:s[c]=o:s={0:o}}o=s}return o}(c,e,r,n)}},vr=function(t,e){var r,n=t,o=function(t){if(!t)return ur;if(null!=t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||ur.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=er.default;if(void 0!==t.format){if(!rr.call(er.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n=er.formatters[r],o=ur.filter;return("function"==typeof t.filter||or(t.filter))&&(o=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:ur.addQueryPrefix,allowDots:void 0===t.allowDots?ur.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:ur.charsetSentinel,delimiter:void 0===t.delimiter?ur.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:ur.encode,encoder:"function"==typeof t.encoder?t.encoder:ur.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:ur.encodeValuesOnly,filter:o,format:r,formatter:n,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:ur.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:ur.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:ur.strictNullHandling}}(e);"function"==typeof o.filter?n=(0,o.filter)("",n):or(o.filter)&&(r=o.filter);var i=[];if("object"!=typeof n||null===n)return"";var s=nr[e&&e.arrayFormat in nr?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices"];r||(r=Object.keys(n)),o.sort&&r.sort(o.sort);for(var a=Ze(),c=0;c<r.length;++c){var u=r[c];o.skipNulls&&null===n[u]||sr(i,lr(n[u],u,s,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,a))}var l=i.join(o.delimiter),p=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&(p+="iso-8859-1"===o.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),l.length>0?p+l:""},br={formats:Ge,parse:function(t,e){var r=function(t){if(!t)return yr;if(null!=t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===t.allowDots?yr.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:yr.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:yr.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:yr.arrayLimit,charset:void 0===t.charset?yr.charset:t.charset,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:yr.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:yr.comma,decoder:"function"==typeof t.decoder?t.decoder:yr.decoder,delimiter:"string"==typeof t.delimiter||pr.isRegExp(t.delimiter)?t.delimiter:yr.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:yr.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:yr.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:yr.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:yr.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:yr.strictNullHandling}}(e);if(""===t||null==t)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof t?function(t,e){var r,n={},o=(e.ignoreQueryPrefix?t.replace(/^\?/,""):t).split(e.delimiter,e.parameterLimit===1/0?void 0:e.parameterLimit),i=-1,s=e.charset;if(e.charsetSentinel)for(r=0;r<o.length;++r)0===o[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===o[r]?s="utf-8":"utf8=%26%2310003%3B"===o[r]&&(s="iso-8859-1"),i=r,r=o.length);for(r=0;r<o.length;++r)if(r!==i){var a,c,u=o[r],l=u.indexOf("]="),p=-1===l?u.indexOf("="):l+1;-1===p?(a=e.decoder(u,yr.decoder,s,"key"),c=e.strictNullHandling?null:""):(a=e.decoder(u.slice(0,p),yr.decoder,s,"key"),c=pr.maybeMap(gr(u.slice(p+1),e),(function(t){return e.decoder(t,yr.decoder,s,"value")}))),c&&e.interpretNumericEntities&&"iso-8859-1"===s&&(c=dr(c)),u.indexOf("[]=")>-1&&(c=hr(c)?[c]:c),n[a]=fr.call(n,a)?pr.combine(n[a],c):c}return n}(t,r):t,o=r.plainObjects?Object.create(null):{},i=Object.keys(n),s=0;s<i.length;++s){var a=i[s],c=mr(a,n[a],r,"string"==typeof t);o=pr.merge(o,c,r)}return!0===r.allowSparse?o:pr.compact(o)},stringify:vr};function wr(t,e,r){return n(this,void 0,void 0,(function*(){const o=t.clone();o.request=e,o.config=r,o.data=yield function(t,e){return n(this,void 0,void 0,(function*(){try{if(e.responseType)switch(e.responseType){case"blob":return yield t.blob();case"arraybuffer":return yield t.arrayBuffer();case"document":case"text":return yield t.text();case"json":return yield t.json();case"stream":return(yield t.blob()).stream()}return"application/json"===t.headers.get("content-type")?t.json():t.text()}catch(Nr){return{}}}))}(t,r);let i=Array.from(t.headers.entries());if(Object.entries(f.all([i.map((([t,e])=>[st(t),e])).reduce(nt,{}),i.map((([t,e])=>[t.split("-").map((t=>rt.ucfirst(t))).join("-"),e])).reduce(nt,{}),i.reduce(nt,{})])).forEach((([t,e])=>{o.headers[t]=e,o.headers.set(t,e)})),!t.ok){try{o.errorText=yield t.text()}catch(Nr){o.errorText=""}o.error=new et(t,e)}return o}))}class _r{constructor(t){this.hooks={createRequest:new Z(["factory"]),request:new Z(["request"]),response:new tt(["response","request"])},this.config=f({headers:{"X-Requested-With":"XMLHttpRequest"},request:{method:"GET",credentials:"include",errorHandling:"throw"}},t)}request(t,e,r={}){return n(this,void 0,void 0,(function*(){r=this.getRequestConfig(t,e,r);let n=this.createRequest(r);n=this.hooks.request.call(n);let o=yield fetch(n),i=yield wr(o,n,r);if(i=yield this.hooks.response.promise(i,n),i.error&&"throw"===r.errorHandling)throw i.error;return i}))}createRequest(t={}){let e=this.createRequestFactory(t);return e.headers(this.config.headers),e=this.hooks.createRequest.call(e),e.make()}createRequestFactory(t={}){return function(t,e=Request){return new jr(t,e)}(this.config).merge(t)}getRequestConfig(t,e,r={}){return this.mergeRequestConfig(r,{method:t,url:e})}mergeRequestConfig(...t){return f.all([this.config.request,...t||[]],{clone:!0})}}class jr{constructor(t,e){return this._clientConfig=t,this._Request=e,this._config={},this._params={},this._headers=new Headers,new Proxy(this,{get:(t,e,r)=>Reflect.has(t,e)?Reflect.get(t,e,r):r=>(t._config[e]=r,t),set:(t,e,r,n)=>"function"==typeof t[e]?t[e](r):Reflect.set(t,e,r,n)})}getConfig(){return"json"===this._config.responseType&&(this._headers.has("accept")||this._headers.set("accept","application/json")),Object.assign(Object.assign({},this._config),{headers:this._headers,url:this._config.url?this.getUri(this._config.url):this._config.url})}hasParams(){return Object.keys(this._params).length>0}stringifyParams(t={}){return br.stringify(this._params,Object.assign(Object.assign({},t),{arrayFormat:"indices"}))}getUri(t){let e="";return this.hasParams()&&(e=this.stringifyParams({addQueryPrefix:!0})),rt.ensureRight(this._clientConfig.baseURL,"/")+rt.stripLeft(t,"/")+e}merge(t){return Object.entries(t).forEach((([t,e])=>this[t](e))),this}header(t,e){return this._headers.set(t,e),this}param(t,e){return this._params[t]=e,this}headers(t){var e;return e=this._headers,new Headers(t).forEach(((t,r)=>e.set(r,t))),this}params(t){return this._params=f.all([this._params,t]),this}data(t){return this._headers.set("Content-Type","application/json"),this._config.body=JSON.stringify(t),this}basic(t,e){return this.authorization("Basic",btoa(t+":"+e))}bearer(t){return this.authorization("Bearer",t)}authorization(t,e){return this._headers.set("Authorization",t+" "+e),this}make(){const t=this.getConfig();return new this._Request(t.url,t)}}class Or extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Array.prototype)}}class Sr{constructor(t,e={},r=!0){return this._stream=t,this._data=e,this._fresh=r,new Proxy(this,{get:(t,e,r)=>Reflect.has(t,e)?Reflect.get(t,e,r):Reflect.has(t._data,e)?Reflect.get(t._data,e):void 0,set:(t,e,r,n)=>Reflect.has(t,e)?Reflect.set(t,e,r,n):Reflect.set(t._data,e,r)})}get http(){return this._stream.streams.http}get stream(){return this._stream}save(){return n(this,void 0,void 0,(function*(){try{return this._fresh?(yield this.http.postEntry(this._stream.id,this._data),!0):(yield this.http.patchEntry(this._stream.id,this._data.id,this._data),!0)}catch(Nr){return!1}}))}validator(){}}class Ar extends Or{constructor(t,e,r){super(...t),this.meta=e,this.links=r}static fromResponse(t,e){const r=Object.values(t.data.data).map((t=>new Sr(e,t,!1)));return new Ar(r,t.data.meta,t.data.links)}}class Er extends Or{constructor(t,e,r){super(...t),this.meta=e,this.links=r}static fromResponse(t,e){const r=Object.values(t.data.data).map((t=>new Sr(e,t,!1)));return new Er(r,t.data.meta,t.data.links)}}const Pr=[">","<","==","!=",">=","<=","!<","!>","<>"],xr=["BETWEEN","EXISTS","OR","AND","NOT","IN","ALL","ANY","LIKE","IS NULL","UNIQUE"],kr=[].concat(Pr).concat(xr),Rr=t=>kr.includes(t);class $r{constructor(t){this.stream=t,this.parameters=[]}get http(){return this.stream.streams.http}find(t){return n(this,void 0,void 0,(function*(){return this.where("id",t).first()}))}first(){return n(this,void 0,void 0,(function*(){return(yield this.limit(1).get())[0]}))}cache(){return this}orderBy(t,e="desc"){return this.addParameter("orderBy",[t,e]),this}limit(t){return this.addParameter("limit",t),this}where(...t){let e,r,n,o;if(2===t.length?(e=t[0],r="==",n=t[1]):3===t.length?(e=t[0],r=t[1],n=t[2]):4===t.length&&(e=t[0],r=t[1],n=t[2],o=t[3]),!Rr(r))throw new Error(`Criteria where() operator "${r}" not valid `);return this.addParameter("where",[e,r,n,o]),this}orWhere(...t){let e,r,n;if(2===t.length?(e=t[0],r="==",n=t[1]):(e=t[0],r=t[1],n=t[2]),!Rr(r))throw new Error(`Criteria orWhere() operator "${r}" not valid `);return this.addParameter("where",[e,r,n,"or"]),this}get(){return n(this,void 0,void 0,(function*(){const t={parameters:this.compileParameters()},e=yield this.http.getEntries(this.stream.id,t);return Ar.fromResponse(e,this.stream)}))}paginate(t=100,e=1){return n(this,void 0,void 0,(function*(){let r={parameters:this.compileParameters(),paginate:!0,per_page:t,page:e};const n=yield this.http.getEntries(this.stream.id,r);return Er.fromResponse(n,this.stream)}))}create(t){return n(this,void 0,void 0,(function*(){let e=this.newInstance(t);return yield e.save(),e}))}save(t){return n(this,void 0,void 0,(function*(){return t.save()}))}delete(){return this}newInstance(t){return new Sr(this.stream,t,!0)}getParameters(){return this.parameters}setParameters(t){return this.parameters=t,this}addParameter(t,e){return this.parameters.push({name:t,value:e}),this}compileParameters(){return this.parameters.map((t=>{return{[t.name]:(e=t.value,Array.isArray(e)?e:[e])};var e}))}}class Ir{constructor(t){Object.assign(this,t)}}class Tr extends Or{}class Cr{constructor(t){this.streams=t}get client(){return this.streams.client}get config(){return this.streams.config}getStreams(t={},e={}){return n(this,void 0,void 0,(function*(){return this.client.request("get","/streams",Object.assign({params:t},e))}))}postStream(t,e={}){return n(this,void 0,void 0,(function*(){return this.client.request("post","/streams",Object.assign({data:t},e))}))}getStream(t,e={},r={}){return n(this,void 0,void 0,(function*(){return this.client.request("get",`/streams/${t}`,r)}))}patchStream(t,e={},r={}){return n(this,void 0,void 0,(function*(){return this.client.request("patch",`/streams/${t}`,Object.assign({data:e},r))}))}putStream(t,e={},r={}){return n(this,void 0,void 0,(function*(){return this.client.request("put",`/streams/${t}`,Object.assign({data:e},r))}))}deleteStream(t,e={}){return n(this,void 0,void 0,(function*(){return this.client.request("delete",`/streams/${t}`,e)}))}getEntries(t,e={},r={}){return n(this,void 0,void 0,(function*(){return this.client.request("get",`/streams/${t}/entries`,Object.assign({params:e},r))}))}postEntry(t,e={},r={}){return n(this,void 0,void 0,(function*(){return this.client.request("post",`/streams/${t}/entries`,Object.assign({data:e},r))}))}getEntry(t,e,r={}){return n(this,void 0,void 0,(function*(){return this.client.request("get",`/streams/${t}/entries/${e}`,r)}))}patchEntry(t,e,r={},o={}){return n(this,void 0,void 0,(function*(){return this.client.request("patch",`/streams/${t}/entries/${e}`,Object.assign({data:r},o))}))}putEntry(t,e,r={},o={}){return n(this,void 0,void 0,(function*(){return this.client.request("put",`/streams/${t}/entries/${e}`,Object.assign({data:r},o))}))}deleteEntry(t,e,r={}){return n(this,void 0,void 0,(function*(){return this.client.request("patch",`/streams/${t}/entries/${e}`,r)}))}request(t,e,r={}){return n(this,void 0,void 0,(function*(){return(yield this.client.request(t,e,r)).data}))}}class Mr{constructor(t){this.stream=t}get http(){return this.stream.streams.http}all(){return n(this,void 0,void 0,(function*(){let t=yield this.http.getEntries(this.stream.id),e=t.data.data.map((t=>new Sr(this.stream,t,!1)));return new Ar(e,t.data.meta,t.data.links)}))}find(t){return n(this,void 0,void 0,(function*(){return this.stream.entries().where("id",t).first()}))}findAll(t){return n(this,void 0,void 0,(function*(){return this.stream.entries().where("id","IN",t).get()}))}findBy(t,e){return n(this,void 0,void 0,(function*(){return this.stream.entries().where(t,e).first()}))}findAllWhere(t,e){return n(this,void 0,void 0,(function*(){return this.stream.entries().where(t,e).get()}))}create(t){return n(this,void 0,void 0,(function*(){let e=this.newCriteria().newInstance(t);return e.save(),e}))}save(t){return n(this,void 0,void 0,(function*(){return t.save()}))}delete(t){return n(this,void 0,void 0,(function*(){return yield this.http.deleteEntry(this.stream.id,t.id),!0}))}truncate(){return this}newInstance(t){return this.newCriteria().newInstance(t)}newCriteria(){return new $r(this.stream)}}class Dr{constructor(t,e,r,n){this.streams=t,this.meta=r,this.links=n,e.fields&&(this.fields=new Map(Object.entries(e.fields).map((([t,e])=>[t,new Ir(e)]))),delete e.fields),Object.assign(this,e)}get repository(){return this._repository||(this._repository=new Mr(this)),this._repository}entries(){return this.repository.newCriteria()}}class Fr{constructor(t){this.config=t,this.hooks={all:new tt(["data"]),make:new tt(["data"]),maked:new Y(["stream"]),create:new tt(["data"]),created:new Y(["stream"])},this.client=new t.Client(this.config),this.http=new t.Http(this)}all(){return n(this,void 0,void 0,(function*(){const t=yield this.http.getStreams(),e=[];for(let r of t.data.data){r=yield this.hooks.all.promise(r);const n=new Dr(this,r,t.data.meta,t.data.links);e.push(n)}return e}))}make(t){return n(this,void 0,void 0,(function*(){let e=yield this.http.getStream(t);e.data=yield this.hooks.make.promise(e.data);const{data:r,meta:n,links:o}=e.data,i=new Dr(this,r,n,o);return this.hooks.maked.call(i),i}))}create(t,e){return n(this,void 0,void 0,(function*(){let r=yield this.http.postStream(Object.assign({id:t,name:t},e));r.data=yield this.hooks.create.promise(r.data);const{data:n,meta:o,links:i}=r.data,s=new Dr(this,n,o,i);return this.hooks.created.call(s),s}))}entries(t){return n(this,void 0,void 0,(function*(){const e=yield this.make(t);return new $r(e)}))}repository(t){return n(this,void 0,void 0,(function*(){const e=yield this.make(t);return new Mr(e)}))}collection(){}}var Lr;!function(t){t.connect="CONNECT",t.delete="DELETE",t.get="GET",t.head="HEAD",t.options="OPTIONS",t.patch="PATCH",t.post="POST",t.put="PUT",t.trace="TRACE"}(Lr||(Lr={}));export{_r as Client,Or as Collection,$r as Criteria,Sr as Entry,Ar as EntryCollection,Ir as Field,Tr as FieldCollection,et as HTTPError,Cr as Http,Lr as Method,Er as PaginatedEntryCollection,Mr as Repository,jr as RequestFactory,rt as Str,Dr as Stream,Fr as Streams,Pr as comparisonOperators,xr as logicalOperators,nt as objectify,kr as operators};
