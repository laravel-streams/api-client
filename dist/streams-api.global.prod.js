var streamsApi=function(t,e){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n,o=r(e),i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t){!function(e){var r="object"==typeof i?i:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=o(t);function o(t,e){return function(r,n){"function"!=typeof t[r]&&Object.defineProperty(t,r,{configurable:!0,writable:!0,value:n}),e&&e(r,n)}}void 0===r.Reflect?r.Reflect=t:n=o(r.Reflect,n),function(t){var e=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,s={__proto__:[]}instanceof Array,u=!i&&!s,a={create:i?function(){return nt(Object.create(null))}:s?function(){return nt({__proto__:null})}:function(){return nt({})},has:u?function(t,r){return e.call(t,r)}:function(t,e){return e in t},get:u?function(t,r){return e.call(t,r)?t[r]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),h="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,f=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?et():Set,l=new(h||"function"!=typeof WeakMap?rt():WeakMap);function d(t,e,r,n){if(M(r)){if(!z(t))throw new TypeError;if(!B(e))throw new TypeError;return $(t,e)}if(!z(t))throw new TypeError;if(!q(e))throw new TypeError;if(!q(n)&&!M(n)&&!L(n))throw new TypeError;return L(n)&&(n=void 0),P(t,e,r=N(r),n)}function y(t,e){function r(r,n){if(!q(r))throw new TypeError;if(!M(n)&&!G(n))throw new TypeError;j(t,e,r,n)}return r}function v(t,e,r,n){if(!q(r))throw new TypeError;return M(n)||(n=N(n)),j(t,e,r,n)}function _(t,e,r){if(!q(e))throw new TypeError;return M(r)||(r=N(r)),R(t,e,r)}function g(t,e,r){if(!q(e))throw new TypeError;return M(r)||(r=N(r)),T(t,e,r)}function m(t,e,r){if(!q(e))throw new TypeError;return M(r)||(r=N(r)),A(t,e,r)}function w(t,e,r){if(!q(e))throw new TypeError;return M(r)||(r=N(r)),x(t,e,r)}function b(t,e){if(!q(t))throw new TypeError;return M(e)||(e=N(e)),S(t,e)}function E(t,e){if(!q(t))throw new TypeError;return M(e)||(e=N(e)),C(t,e)}function k(t,e,r){if(!q(e))throw new TypeError;M(r)||(r=N(r));var n=O(e,r,!1);if(M(n))return!1;if(!n.delete(t))return!1;if(n.size>0)return!0;var o=l.get(e);return o.delete(r),o.size>0||l.delete(e),!0}function $(t,e){for(var r=t.length-1;r>=0;--r){var n=(0,t[r])(e);if(!M(n)&&!L(n)){if(!B(n))throw new TypeError;e=n}}return e}function P(t,e,r,n){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(e,r,n);if(!M(i)&&!L(i)){if(!q(i))throw new TypeError;n=i}}return n}function O(t,e,r){var n=l.get(t);if(M(n)){if(!r)return;n=new p,l.set(t,n)}var o=n.get(e);if(M(o)){if(!r)return;o=new p,n.set(e,o)}return o}function R(t,e,r){if(T(t,e,r))return!0;var n=Z(e);return!L(n)&&R(t,n,r)}function T(t,e,r){var n=O(e,r,!1);return!M(n)&&W(n.has(t))}function A(t,e,r){if(T(t,e,r))return x(t,e,r);var n=Z(e);return L(n)?void 0:A(t,n,r)}function x(t,e,r){var n=O(e,r,!1);if(!M(n))return n.get(t)}function j(t,e,r,n){O(r,n,!0).set(t,e)}function S(t,e){var r=C(t,e),n=Z(t);if(null===n)return r;var o=S(n,e);if(o.length<=0)return r;if(r.length<=0)return o;for(var i=new f,s=[],u=0,a=r;u<a.length;u++){i.has(p=a[u])||(i.add(p),s.push(p))}for(var c=0,h=o;c<h.length;c++){var p;i.has(p=h[c])||(i.add(p),s.push(p))}return s}function C(t,e){var r=[],n=O(t,e,!1);if(M(n))return r;for(var o=V(n.keys()),i=0;;){var s=J(o);if(!s)return r.length=i,r;var u=Y(s);try{r[i]=u}catch(a){try{Q(o)}finally{throw a}}i++}}function I(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function M(t){return void 0===t}function L(t){return null===t}function D(t){return"symbol"==typeof t}function q(t){return"object"==typeof t?null!==t:"function"==typeof t}function U(t,e){switch(I(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var r=3===e?"string":5===e?"number":"default",o=X(t,n);if(void 0!==o){var i=o.call(t,r);if(q(i))throw new TypeError;return i}return H(t,"default"===r?"number":r)}function H(t,e){if("string"===e){var r=t.toString;if(K(r))if(!q(o=r.call(t)))return o;if(K(n=t.valueOf))if(!q(o=n.call(t)))return o}else{var n;if(K(n=t.valueOf))if(!q(o=n.call(t)))return o;var o,i=t.toString;if(K(i))if(!q(o=i.call(t)))return o}throw new TypeError}function W(t){return!!t}function F(t){return""+t}function N(t){var e=U(t,3);return D(e)?e:F(e)}function z(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function K(t){return"function"==typeof t}function B(t){return"function"==typeof t}function G(t){switch(I(t)){case 3:case 4:return!0;default:return!1}}function X(t,e){var r=t[e];if(null!=r){if(!K(r))throw new TypeError;return r}}function V(t){var e=X(t,o);if(!K(e))throw new TypeError;var r=e.call(t);if(!q(r))throw new TypeError;return r}function Y(t){return t.value}function J(t){var e=t.next();return!e.done&&e}function Q(t){var e=t.return;e&&e.call(t)}function Z(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var r=t.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return e;var o=n.constructor;return"function"!=typeof o||o===t?e:o}function tt(){var t={},e=[],r=function(){function t(t,e,r){this._index=0,this._keys=t,this._values=e,this._selector=r}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var r=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var r=this._find(t,!0);return this._values[r]=e,this},e.prototype.delete=function(e){var r=this._find(e,!1);if(r>=0){for(var n=this._keys.length,o=r+1;o<n;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new r(this._keys,this._values,n)},e.prototype.values=function(){return new r(this._keys,this._values,i)},e.prototype.entries=function(){return new r(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function n(t,e){return t}function i(t,e){return e}function s(t,e){return[t,e]}}function et(){return function(){function t(){this._map=new p}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}()}function rt(){var t=16,r=a.create(),n=o();return function(){function t(){this._key=o()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&a.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?a.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=o()},t}();function o(){var t;do{t="@@WeakMap@@"+c()}while(a.has(r,t));return r[t]=!0,t}function i(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:a.create()})}return t[n]}function s(t,e){for(var r=0;r<e;++r)t[r]=255*Math.random()|0;return t}function u(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t)}function c(){var e=u(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var r="",n=0;n<t;++n){var o=e[n];4!==n&&6!==n&&8!==n||(r+="-"),o<16&&(r+="0"),r+=o.toString(16).toLowerCase()}return r}}function nt(t){return t.__=void 0,delete t.__,t}t("decorate",d),t("metadata",y),t("defineMetadata",v),t("hasMetadata",_),t("hasOwnMetadata",g),t("getMetadata",m),t("getOwnMetadata",w),t("getMetadataKeys",b),t("getOwnMetadataKeys",E),t("deleteMetadata",k)}(n)}()}(n||(n={}));
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */
var s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},s(t,e)};function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var a=function(){return a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)};function c(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function u(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))}function h(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var p=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===f}(t)}(t)};var f="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function l(t,e){return!1!==e.clone&&e.isMergeableObject(t)?g(Array.isArray(t)?[]:{},t,e):t}function d(t,e,r){return t.concat(e).map((function(t){return l(t,r)}))}function y(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function v(t,e){try{return e in t}catch(r){return!1}}function _(t,e,r){var n={};return r.isMergeableObject(t)&&y(t).forEach((function(e){n[e]=l(t[e],r)})),y(e).forEach((function(o){(function(t,e){return v(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(n[o]=v(t,o)&&r.isMergeableObject(e[o])?function(t,e){if(!e.customMerge)return g;var r=e.customMerge(t);return"function"==typeof r?r:g}(o,r)(t[o],e[o],r):l(e[o],r))})),n}function g(t,e,r){(r=r||{}).arrayMerge=r.arrayMerge||d,r.isMergeableObject=r.isMergeableObject||p,r.cloneUnlessOtherwiseSpecified=l;var n=Array.isArray(e);return n===Array.isArray(t)?n?r.arrayMerge(t,e,r):_(t,e,r):l(e,r)}g.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,r){return g(t,r,e)}),{})};var m=g;const w=o.default.deprecate((()=>{}),"Hook.context is deprecated and will be removed"),b=function(...t){return this.call=this._createCall("sync"),this.call(...t)},E=function(...t){return this.callAsync=this._createCall("async"),this.callAsync(...t)},k=function(...t){return this.promise=this._createCall("promise"),this.promise(...t)};class ${constructor(t=[],e){this._args=t,this.name=e,this.taps=[],this.interceptors=[],this._call=b,this.call=b,this._callAsync=E,this.callAsync=E,this._promise=k,this.promise=k,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}compile(t){throw new Error("Abstract: should be overridden")}_createCall(t){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:t})}_tap(t,e,r){if("string"==typeof e)e={name:e.trim()};else if("object"!=typeof e||null===e)throw new Error("Invalid tap options");if("string"!=typeof e.name||""===e.name)throw new Error("Missing name for tap");void 0!==e.context&&w(),e=Object.assign({type:t,fn:r},e),e=this._runRegisterInterceptors(e),this._insert(e)}tap(t,e){this._tap("sync",t,e)}tapAsync(t,e){this._tap("async",t,e)}tapPromise(t,e){this._tap("promise",t,e)}_runRegisterInterceptors(t){for(const e of this.interceptors)if(e.register){const r=e.register(t);void 0!==r&&(t=r)}return t}withOptions(t){const e=e=>Object.assign({},t,"string"==typeof e?{name:e}:e);return{name:this.name,tap:(t,r)=>this.tap(e(t),r),tapAsync:(t,r)=>this.tapAsync(e(t),r),tapPromise:(t,r)=>this.tapPromise(e(t),r),intercept:t=>this.intercept(t),isUsed:()=>this.isUsed(),withOptions:t=>this.withOptions(e(t))}}isUsed(){return this.taps.length>0||this.interceptors.length>0}intercept(t){if(this._resetCompilation(),this.interceptors.push(Object.assign({},t)),t.register)for(let e=0;e<this.taps.length;e++)this.taps[e]=t.register(this.taps[e])}_resetCompilation(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}_insert(t){let e;this._resetCompilation(),"string"==typeof t.before?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));let r=0;"number"==typeof t.stage&&(r=t.stage);let n=this.taps.length;for(;n>0;){n--;const t=this.taps[n];this.taps[n+1]=t;const o=t.stage||0;if(e){if(e.has(t.name)){e.delete(t.name);continue}if(e.size>0)continue}if(!(o>r)){n++;break}}this.taps[n]=t}}Object.setPrototypeOf($.prototype,null);var P=$;var O=class{constructor(t){this.config=t,this.options=void 0,this._args=void 0}create(t){let e;switch(this.init(t),this.options.type){case"sync":e=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:t=>`throw ${t};\n`,onResult:t=>`return ${t};\n`,resultReturns:!0,onDone:()=>"",rethrowIfPossible:!0}));break;case"async":e=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:t=>`_callback(${t});\n`,onResult:t=>`_callback(null, ${t});\n`,onDone:()=>"_callback();\n"}));break;case"promise":let t=!1;const r=this.contentWithInterceptors({onError:e=>(t=!0,`_error(${e});\n`),onResult:t=>`_resolve(${t});\n`,onDone:()=>"_resolve();\n"});let n="";n+='"use strict";\n',n+=this.header(),n+="return new Promise((function(_resolve, _reject) {\n",t&&(n+="var _sync = true;\n",n+="function _error(_err) {\n",n+="if(_sync)\n",n+="_resolve(Promise.resolve().then((function() { throw _err; })));\n",n+="else\n",n+="_reject(_err);\n",n+="};\n"),n+=r,t&&(n+="_sync = false;\n"),n+="}));\n",e=new Function(this.args(),n)}return this.deinit(),e}setup(t,e){t._x=e.taps.map((t=>t.fn))}init(t){this.options=t,this._args=t.args.slice()}deinit(){this.options=void 0,this._args=void 0}contentWithInterceptors(t){if(this.options.interceptors.length>0){const e=t.onError,r=t.onResult,n=t.onDone;let o="";for(let t=0;t<this.options.interceptors.length;t++){const e=this.options.interceptors[t];e.call&&(o+=`${this.getInterceptor(t)}.call(${this.args({before:e.context?"_context":void 0})});\n`)}return o+=this.content(Object.assign(t,{onError:e&&(t=>{let r="";for(let e=0;e<this.options.interceptors.length;e++){this.options.interceptors[e].error&&(r+=`${this.getInterceptor(e)}.error(${t});\n`)}return r+=e(t),r}),onResult:r&&(t=>{let e="";for(let r=0;r<this.options.interceptors.length;r++){this.options.interceptors[r].result&&(e+=`${this.getInterceptor(r)}.result(${t});\n`)}return e+=r(t),e}),onDone:n&&(()=>{let t="";for(let e=0;e<this.options.interceptors.length;e++){this.options.interceptors[e].done&&(t+=`${this.getInterceptor(e)}.done();\n`)}return t+=n(),t})})),o}return this.content(t)}header(){let t="";return this.needContext()?t+="var _context = {};\n":t+="var _context;\n",t+="var _x = this._x;\n",this.options.interceptors.length>0&&(t+="var _taps = this.taps;\n",t+="var _interceptors = this.interceptors;\n"),t}needContext(){for(const t of this.options.taps)if(t.context)return!0;return!1}callTap(t,{onError:e,onResult:r,onDone:n,rethrowIfPossible:o}){let i="",s=!1;for(let a=0;a<this.options.interceptors.length;a++){const e=this.options.interceptors[a];e.tap&&(s||(i+=`var _tap${t} = ${this.getTap(t)};\n`,s=!0),i+=`${this.getInterceptor(a)}.tap(${e.context?"_context, ":""}_tap${t});\n`)}i+=`var _fn${t} = ${this.getTapFn(t)};\n`;const u=this.options.taps[t];switch(u.type){case"sync":o||(i+=`var _hasError${t} = false;\n`,i+="try {\n"),i+=r?`var _result${t} = _fn${t}(${this.args({before:u.context?"_context":void 0})});\n`:`_fn${t}(${this.args({before:u.context?"_context":void 0})});\n`,o||(i+="} catch(_err) {\n",i+=`_hasError${t} = true;\n`,i+=e("_err"),i+="}\n",i+=`if(!_hasError${t}) {\n`),r&&(i+=r(`_result${t}`)),n&&(i+=n()),o||(i+="}\n");break;case"async":let s="";s+=r?`(function(_err${t}, _result${t}) {\n`:`(function(_err${t}) {\n`,s+=`if(_err${t}) {\n`,s+=e(`_err${t}`),s+="} else {\n",r&&(s+=r(`_result${t}`)),n&&(s+=n()),s+="}\n",s+="})",i+=`_fn${t}(${this.args({before:u.context?"_context":void 0,after:s})});\n`;break;case"promise":i+=`var _hasResult${t} = false;\n`,i+=`var _promise${t} = _fn${t}(${this.args({before:u.context?"_context":void 0})});\n`,i+=`if (!_promise${t} || !_promise${t}.then)\n`,i+=`  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${t} + ')');\n`,i+=`_promise${t}.then((function(_result${t}) {\n`,i+=`_hasResult${t} = true;\n`,r&&(i+=r(`_result${t}`)),n&&(i+=n()),i+=`}), function(_err${t}) {\n`,i+=`if(_hasResult${t}) throw _err${t};\n`,i+=e(`_err${t}`),i+="});\n"}return i}callTapsSeries({onError:t,onResult:e,resultReturns:r,onDone:n,doneReturns:o,rethrowIfPossible:i}){if(0===this.options.taps.length)return n();const s=this.options.taps.findIndex((t=>"sync"!==t.type)),u=r||o;let a="",c=n,h=0;for(let p=this.options.taps.length-1;p>=0;p--){const r=p;c!==n&&("sync"!==this.options.taps[r].type||h++>20)&&(h=0,a+=`function _next${r}() {\n`,a+=c(),a+="}\n",c=()=>`${u?"return ":""}_next${r}();\n`);const o=c,f=t=>t?"":n(),l=this.callTap(r,{onError:e=>t(r,e,o,f),onResult:e&&(t=>e(r,t,o,f)),onDone:!e&&o,rethrowIfPossible:i&&(s<0||r<s)});c=()=>l}return a+=c(),a}callTapsLooping({onError:t,onDone:e,rethrowIfPossible:r}){if(0===this.options.taps.length)return e();const n=this.options.taps.every((t=>"sync"===t.type));let o="";n||(o+="var _looper = (function() {\n",o+="var _loopAsync = false;\n"),o+="var _loop;\n",o+="do {\n",o+="_loop = false;\n";for(let i=0;i<this.options.interceptors.length;i++){const t=this.options.interceptors[i];t.loop&&(o+=`${this.getInterceptor(i)}.loop(${this.args({before:t.context?"_context":void 0})});\n`)}return o+=this.callTapsSeries({onError:t,onResult:(t,e,r,o)=>{let i="";return i+=`if(${e} !== undefined) {\n`,i+="_loop = true;\n",n||(i+="if(_loopAsync) _looper();\n"),i+=o(!0),i+="} else {\n",i+=r(),i+="}\n",i},onDone:e&&(()=>{let t="";return t+="if(!_loop) {\n",t+=e(),t+="}\n",t}),rethrowIfPossible:r&&n}),o+="} while(_loop);\n",n||(o+="_loopAsync = true;\n",o+="});\n",o+="_looper();\n"),o}callTapsParallel({onError:t,onResult:e,onDone:r,rethrowIfPossible:n,onTap:o=((t,e)=>e())}){if(this.options.taps.length<=1)return this.callTapsSeries({onError:t,onResult:e,onDone:r,rethrowIfPossible:n});let i="";i+="do {\n",i+=`var _counter = ${this.options.taps.length};\n`,r&&(i+="var _done = (function() {\n",i+=r(),i+="});\n");for(let s=0;s<this.options.taps.length;s++){const u=()=>r?"if(--_counter === 0) _done();\n":"--_counter;",a=t=>t||!r?"_counter = 0;\n":"_counter = 0;\n_done();\n";i+="if(_counter <= 0) break;\n",i+=o(s,(()=>this.callTap(s,{onError:e=>{let r="";return r+="if(_counter > 0) {\n",r+=t(s,e,u,a),r+="}\n",r},onResult:e&&(t=>{let r="";return r+="if(_counter > 0) {\n",r+=e(s,t,u,a),r+="}\n",r}),onDone:!e&&(()=>u()),rethrowIfPossible:n})),u,a)}return i+="} while(false);\n",i}args({before:t,after:e}={}){let r=this._args;return t&&(r=[t].concat(r)),e&&(r=r.concat(e)),0===r.length?"":r.join(", ")}getTapFn(t){return`_x[${t}]`}getTap(t){return`_taps[${t}]`}getInterceptor(t){return`_interceptors[${t}]`}};const R=P,T=O;const A=new class extends T{content({onError:t,onDone:e,rethrowIfPossible:r}){return this.callTapsSeries({onError:(e,r)=>t(r),onDone:e,rethrowIfPossible:r})}},x=()=>{throw new Error("tapAsync is not supported on a SyncHook")},j=()=>{throw new Error("tapPromise is not supported on a SyncHook")},S=function(t){return A.setup(this,t),A.create(t)};function C(t=[],e){const r=new R(t,e);return r.constructor=C,r.tapAsync=x,r.tapPromise=j,r.compile=S,r}C.prototype=null;var I=C;const M=O;new class extends M{content({onError:t,onResult:e,resultReturns:r,onDone:n,rethrowIfPossible:o}){return this.callTapsSeries({onError:(e,r)=>t(r),onResult:(t,r,n)=>`if(${r} !== undefined) {\n${e(r)};\n} else {\n${n()}}\n`,resultReturns:r,onDone:n,rethrowIfPossible:o})}};const L=P,D=O;const q=new class extends D{content({onError:t,onResult:e,resultReturns:r,rethrowIfPossible:n}){return this.callTapsSeries({onError:(e,r)=>t(r),onResult:(t,e,r)=>{let n="";return n+=`if(${e} !== undefined) {\n`,n+=`${this._args[0]} = ${e};\n`,n+="}\n",n+=r(),n},onDone:()=>e(this._args[0]),doneReturns:r,rethrowIfPossible:n})}},U=()=>{throw new Error("tapAsync is not supported on a SyncWaterfallHook")},H=()=>{throw new Error("tapPromise is not supported on a SyncWaterfallHook")},W=function(t){return q.setup(this,t),q.create(t)};function F(t=[],e){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const r=new L(t,e);return r.constructor=F,r.tapAsync=U,r.tapPromise=H,r.compile=W,r}F.prototype=null;var N=F;const z=O;new class extends z{content({onError:t,onDone:e,rethrowIfPossible:r}){return this.callTapsLooping({onError:(e,r)=>t(r),onDone:e,rethrowIfPossible:r})}};const K=O;new class extends K{content({onError:t,onDone:e}){return this.callTapsParallel({onError:(e,r,n,o)=>t(r)+o(!0),onDone:e})}};const B=O;new class extends B{content({onError:t,onResult:e,onDone:r}){let n="";return n+=`var _results = new Array(${this.options.taps.length});\n`,n+="var _checkDone = function() {\n",n+="for(var i = 0; i < _results.length; i++) {\n",n+="var item = _results[i];\n",n+="if(item === undefined) return false;\n",n+="if(item.result !== undefined) {\n",n+=e("item.result"),n+="return true;\n",n+="}\n",n+="if(item.error) {\n",n+=t("item.error"),n+="return true;\n",n+="}\n",n+="}\n",n+="return false;\n",n+="}\n",n+=this.callTapsParallel({onError:(t,e,r,n)=>{let o="";return o+=`if(${t} < _results.length && ((_results.length = ${t+1}), (_results[${t}] = { error: ${e} }), _checkDone())) {\n`,o+=n(!0),o+="} else {\n",o+=r(),o+="}\n",o},onResult:(t,e,r,n)=>{let o="";return o+=`if(${t} < _results.length && (${e} !== undefined && (_results.length = ${t+1}), (_results[${t}] = { result: ${e} }), _checkDone())) {\n`,o+=n(!0),o+="} else {\n",o+=r(),o+="}\n",o},onTap:(t,e,r,n)=>{let o="";return t>0&&(o+=`if(${t} >= _results.length) {\n`,o+=r(),o+="} else {\n"),o+=e(),t>0&&(o+="}\n"),o},onDone:r}),n}};const G=O;new class extends G{content({onError:t,onDone:e}){return this.callTapsSeries({onError:(e,r,n,o)=>t(r)+o(!0),onDone:e})}};const X=O;new class extends X{content({onError:t,onResult:e,resultReturns:r,onDone:n}){return this.callTapsSeries({onError:(e,r,n,o)=>t(r)+o(!0),onResult:(t,r,n)=>`if(${r} !== undefined) {\n${e(r)}\n} else {\n${n()}}\n`,resultReturns:r,onDone:n})}};const V=O;new class extends V{content({onError:t,onDone:e}){return this.callTapsLooping({onError:(e,r,n,o)=>t(r)+o(!0),onDone:e})}};const Y=P,J=O;const Q=new class extends J{content({onError:t,onResult:e}){return this.callTapsSeries({onError:(e,r,n,o)=>t(r)+o(!0),onResult:(t,e,r)=>{let n="";return n+=`if(${e} !== undefined) {\n`,n+=`${this._args[0]} = ${e};\n`,n+="}\n",n+=r(),n},onDone:()=>e(this._args[0])})}},Z=function(t){return Q.setup(this,t),Q.create(t)};function tt(t=[],e){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const r=new Y(t,e);return r.constructor=tt,r.compile=Z,r._call=void 0,r.call=void 0,r}tt.prototype=null;var et=tt;const rt=o.default,nt=(t,e)=>e;class ot{constructor(t,e){this._map=new Map,this.name=e,this._factory=t,this._interceptors=[]}get(t){return this._map.get(t)}for(t){const e=this.get(t);if(void 0!==e)return e;let r=this._factory(t);const n=this._interceptors;for(let o=0;o<n.length;o++)r=n[o].factory(t,r);return this._map.set(t,r),r}intercept(t){this._interceptors.push(Object.assign({factory:nt},t))}}ot.prototype.tap=rt.deprecate((function(t,e,r){return this.for(t).tap(e,r)}),"HookMap#tap(key,…) is deprecated. Use HookMap#for(key).tap(…) instead."),ot.prototype.tapAsync=rt.deprecate((function(t,e,r){return this.for(t).tapAsync(e,r)}),"HookMap#tapAsync(key,…) is deprecated. Use HookMap#for(key).tapAsync(…) instead."),ot.prototype.tapPromise=rt.deprecate((function(t,e,r){return this.for(t).tapPromise(e,r)}),"HookMap#tapPromise(key,…) is deprecated. Use HookMap#for(key).tapPromise(…) instead.");var it,st=I,ut=N,at=et;t.Method=void 0,(it=t.Method||(t.Method={})).connect="CONNECT",it.delete="DELETE",it.get="GET",it.head="HEAD",it.options="OPTIONS",it.patch="PATCH",it.post="POST",it.put="PUT",it.trace="TRACE";var ct=function(t){function e(e,r){var n=t.call(this,"HTTP "+e.status+" Error: "+e.statusText)||this;return n.response=e,n.request=r,n.name="HTTPError",n}return u(e,t),e}(Error),ht=function(){function t(){}return t.random=function(t){void 0===t&&(t=15);for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*r.length));return e},t.ensureLeft=function(t,e){return!1===t.startsWith(e)?e+t:t},t.ensureRight=function(t,e){return!1===t.endsWith(e)?t+e:t},t.stripLeft=function(t,e){return t.startsWith(e)?t.substr(e.length):t},t.stripRight=function(t,e){return t.endsWith(e)?t.substr(0,t.length-e.length):t},t.ucfirst=function(t){return t[0].toUpperCase()+t.slice(1)},t.lcfirst=function(t){return t[0].toLowerCase()+t.slice(1)},t.parameters=function(t,e){return Object.entries(e).forEach((function(e){var r=e[1];return t=t.replace(new RegExp(":"+e[0],"g"),r)})),t},t}(),pt=function(t,e){var r,n=e[0],o=e[1];return a(a({},t),((r={})[n]=o,r))},ft={exports:{}};const lt=(t,e)=>{if("string"!=typeof t&&!Array.isArray(t))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},0===(t=Array.isArray(t)?t.map((t=>t.trim())).filter((t=>t.length)).join("-"):t.trim()).length)return"";if(1===t.length)return e.pascalCase?t.toLocaleUpperCase(e.locale):t.toLocaleLowerCase(e.locale);return t!==t.toLocaleLowerCase(e.locale)&&(t=((t,e)=>{let r=!1,n=!1,o=!1;for(let i=0;i<t.length;i++){const s=t[i];r&&/[\p{Lu}]/u.test(s)?(t=t.slice(0,i)+"-"+t.slice(i),r=!1,o=n,n=!0,i++):n&&o&&/[\p{Ll}]/u.test(s)?(t=t.slice(0,i-1)+"-"+t.slice(i-1),o=n,n=!1,r=!0):(r=s.toLocaleLowerCase(e)===s&&s.toLocaleUpperCase(e)!==s,o=n,n=s.toLocaleUpperCase(e)===s&&s.toLocaleLowerCase(e)!==s)}return t})(t,e.locale)),t=t.replace(/^[_.\- ]+/,""),t=e.preserveConsecutiveUppercase?(t=>t.replace(/^[\p{Lu}](?![\p{Lu}])/gu,(t=>t.toLowerCase())))(t):t.toLocaleLowerCase(),e.pascalCase&&(t=t.charAt(0).toLocaleUpperCase(e.locale)+t.slice(1)),((t,e)=>t.replace(/[_.\- ]+([\p{Alpha}\p{N}_]|$)/gu,((t,r)=>r.toLocaleUpperCase(e.locale))).replace(/\d+([\p{Alpha}\p{N}_]|$)/gu,(t=>t.toLocaleUpperCase(e.locale))))(t,e)};ft.exports=lt,ft.exports.default=lt;var dt=ft.exports;var yt=function(){function e(t){this.hooks={createRequest:new ut(["factory"]),request:new ut(["request"]),response:new at(["response","request"])},this.config=m({headers:{"X-Requested-With":"XMLHttpRequest"},request:{method:"GET",credentials:"include"}},t)}return e.prototype.request=function(t,e,r){return void 0===r&&(r={}),c(this,void 0,void 0,(function(){var n,o,i;return h(this,(function(s){switch(s.label){case 0:return n=this.createRequest(t,e,r),n=this.hooks.request.call(n),[4,fetch(n)];case 1:return o=s.sent(),i=function(t){var e=t.clone(),r=Array.from(t.headers.entries());return Object.entries(m.all([r.map((function(t){var e=t[1];return[dt(t[0]),e]})).reduce(pt,{}),r.map((function(t){var e=t[1];return[t[0].split("-").map((function(t){return ht.ucfirst(t)})).join("-"),e]})).reduce(pt,{}),r.reduce(pt,{})])).forEach((function(t){var r=t[0],n=t[1];e.headers[r]=n,e.headers.set(r,n)})),e}(o),[4,this.hooks.response.promise(i,n)];case 2:if(!(i=s.sent()).ok)throw new ct(i,n);return[2,i]}}))}))},e.prototype.createRequest=function(t,e,r){void 0===r&&(r={});var n=this.createRequestFactory(t,e,r);return n.headers(this.config.headers),(n=this.hooks.createRequest.call(n)).make()},e.prototype.createRequestFactory=function(e,r,n){return void 0===n&&(n={}),(n=this.getRequestConfig(n)).method=t.Method[e],n.url=r,function(t,e){void 0===e&&(e=Request);return new vt(t,e)}(this.config).merge(n)},e.prototype.getRequestConfig=function(t){return void 0===t&&(t={}),m(this.config.request,t,{clone:!0})},e}(),vt=function(){function t(t,e){return this._clientConfig=t,this._Request=e,this._config={},this._params=new URLSearchParams,this._headers=new Headers,new Proxy(this,{get:function(t,e,r){return Reflect.has(t,e)?Reflect.get(t,e,r):function(r){return t._config[e]=r,t}},set:function(t,e,r,n){return"function"==typeof t[e]?t[e](r):Reflect.set(t,e,r,n)}})}return t.prototype.merge=function(t){var e=this;return Object.entries(t).forEach((function(t){return e[t[0]](t[1])})),this},t.prototype.getConfig=function(){return a(a({},this._config),{headers:this._headers,params:this._params,url:this._config.url?this.getUri(this._config.url):this._config.url})},t.prototype.header=function(t,e){return this._headers.set(t,e),this},t.prototype.param=function(t,e){return this._headers.set(t,e),this},t.prototype.headers=function(t){var e;return e=this._headers,new Headers(t).forEach((function(t,r){return e.set(r,t)})),this},t.prototype.params=function(t){var e;return e=this._params,new URLSearchParams(t).forEach((function(t,r){return e.set(r,t)})),this},t.prototype.data=function(t){return this._headers.set("Content-Type","application/json"),this._config.body=JSON.stringify(t),this},t.prototype.getUri=function(t){var e=this._params.toString();return e.length&&(e="?"+e),ht.ensureRight(this._clientConfig.baseURL,"/")+ht.stripLeft(t,"/")+e},t.prototype.basic=function(t,e){return this.authorization("Basic",btoa(t+":"+e))},t.prototype.bearer=function(t){return this.authorization("Bearer",t)},t.prototype.authorization=function(t,e){return this._headers.set("Authorization",t+" "+e),this},t.prototype.make=function(){var t=this.getConfig();return new this._Request(t.url,t)},t}();var _t=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,e)||this;return Object.setPrototypeOf(n,Array.prototype),n}return u(e,t),e}(Array),gt=function(){function t(t,e,r){return void 0===e&&(e={}),void 0===r&&(r=!0),this._stream=t,this._data=e,this._fresh=r,new Proxy(this,{get:function(t,e,r){return Reflect.has(t,e)?Reflect.get(t,e,r):Reflect.has(t._data,e)?Reflect.get(t._data,e):void 0},set:function(t,e,r,n){return Reflect.has(t,e)?Reflect.set(t,e,r,n):Reflect.set(t._data,e,r)}})}return Object.defineProperty(t.prototype,"http",{get:function(){return this._stream.streams.http},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stream",{get:function(){return this._stream},enumerable:!1,configurable:!0}),t.prototype.save=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),this._fresh?[4,this.http.postEntry(this._stream.id,this._data)]:[3,2];case 1:case 3:return t.sent(),[2,!0];case 2:return[4,this.http.patchEntry(this._stream.id,this._data.id,this._data)];case 4:return t.sent(),[2,!1];case 5:return[2]}}))}))},t.prototype.validator=function(){},t}(),mt=function(t){function e(e,r,n){var o=t.apply(this,e)||this;return o.meta=r,o.links=n,o}return u(e,t),e.fromResponse=function(t,r){return new e(Object.values(t.data).map((function(t){return new gt(r,t,!1)})),t.meta,t.links)},e}(_t),wt=function(t){function e(e,r,n){var o=t.apply(this,e)||this;return o.meta=r,o.links=n,o}return u(e,t),e.fromResponse=function(t,r){return new e(Object.values(t.data).map((function(t){return new gt(r,t,!1)})),t.meta,t.links)},e}(_t),bt=[">","<","==","!=",">=","<=","!<","!>","<>"],Et=["BETWEEN","EXISTS","OR","AND","NOT","IN","ALL","ANY","LIKE","IS NULL","UNIQUE"],kt=[].concat(bt).concat(Et),$t=function(t){return kt.includes(t)},Pt=function(){function t(t){this.stream=t,this.parameters=[]}return Object.defineProperty(t.prototype,"http",{get:function(){return this.stream.streams.http},enumerable:!1,configurable:!0}),t.prototype.find=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){return[2,this.where("id",t).first()]}))}))},t.prototype.first=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.limit(1).get()];case 1:return[2,t.sent()[0]]}}))}))},t.prototype.cache=function(){return this},t.prototype.orderBy=function(t,e){return void 0===e&&(e="desc"),this.addParameter("orderBy",[t,e]),this},t.prototype.limit=function(t){return this.addParameter("limit",t),this},t.prototype.where=function(){for(var t,e,r,n,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(2===o.length?(t=o[0],e="==",r=o[1]):3===o.length?(t=o[0],e=o[1],r=o[2]):4===o.length&&(t=o[0],e=o[1],r=o[2],n=o[3]),!$t(e))throw new Error('Criteria where() operator "'+e+'" not valid ');return this.addParameter("where",[t,e,r,n]),this},t.prototype.orWhere=function(){for(var t,e,r,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(2===n.length?(t=n[0],e="==",r=n[1]):(t=n[0],e=n[1],r=n[2]),!$t(e))throw new Error('Criteria orWhere() operator "'+e+'" not valid ');return this.addParameter("where",[t,e,r,"or"]),this},t.prototype.get=function(){return c(this,void 0,void 0,(function(){var t,e;return h(this,(function(r){switch(r.label){case 0:return t=this.compileStatements(),[4,this.http.getEntries(this.stream.id,{query:t},{})];case 1:return e=r.sent(),[2,mt.fromResponse(e,this.stream)]}}))}))},t.prototype.create=function(t){return c(this,void 0,void 0,(function(){var e;return h(this,(function(r){switch(r.label){case 0:return[4,(e=this.newInstance(t)).save()];case 1:return r.sent(),[2,e]}}))}))},t.prototype.save=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,t.save()];case 1:return[2,e.sent()]}}))}))},t.prototype.delete=function(){return this},t.prototype.paginate=function(t,e){return void 0===t&&(t=100),void 0===e&&(e=1),c(this,void 0,void 0,(function(){var r,n;return h(this,(function(o){switch(o.label){case 0:return r=this.compileStatements(),[4,this.http.getEntries(this.stream.id,{query:r},{paginate:!0,per_page:t,page:e})];case 1:return n=o.sent(),[2,wt.fromResponse(n,this.stream)]}}))}))},t.prototype.newInstance=function(t){return new gt(this.stream,t,!0)},t.prototype.getParameters=function(){return this.parameters},t.prototype.setParameters=function(t){return this.parameters=t,this},t.prototype.addParameter=function(t,e){return this.parameters.push({name:t,value:e}),this},t.prototype.compileStatements=function(){return this.parameters.map((function(t){var e,r;return(e={})[t.name]=(r=t.value,Array.isArray(r)?r:[r]),e}))},t}(),Ot=function(t){Object.assign(this,t)},Rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e}(_t),Tt=function(){function t(t){this.streams=t}return Object.defineProperty(t.prototype,"client",{get:function(){return this.streams.client},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.streams.config},enumerable:!1,configurable:!0}),t.prototype.getStreams=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),c(this,void 0,void 0,(function(){return h(this,(function(r){return e.params=t,[2,this.get("/streams",e)]}))}))},t.prototype.postStream=function(t,e){return void 0===e&&(e={}),c(this,void 0,void 0,(function(){return h(this,(function(r){return[2,this.post("/streams",t,e)]}))}))},t.prototype.getStream=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return r.params=e,[4,this.get("/streams/"+t,r)];case 1:return[2,n.sent()]}}))}))},t.prototype.patchStream=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),c(this,void 0,void 0,(function(){return h(this,(function(n){return[2,this.patch("/streams/"+t,e,r)]}))}))},t.prototype.putStream=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),c(this,void 0,void 0,(function(){return h(this,(function(n){return[2,this.put("/streams/"+t,e,r)]}))}))},t.prototype.deleteStream=function(t,e){return void 0===e&&(e={}),c(this,void 0,void 0,(function(){return h(this,(function(r){return[2,this.delete("/streams/"+t,e)]}))}))},t.prototype.getEntries=function(t,e,r,n){return void 0===e&&(e={}),void 0===r&&(r={}),void 0===n&&(n={}),c(this,void 0,void 0,(function(){return h(this,(function(o){return n.body=e,n.params=r,[2,this.get("/streams/"+t+"/entries",a(a({},n),{headers:{"Content-Type":"application/json"}}))]}))}))},t.prototype.postEntry=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),c(this,void 0,void 0,(function(){return h(this,(function(n){return[2,this.post("/streams/"+t+"/entries",e,r)]}))}))},t.prototype.getEntry=function(t,e,r){return void 0===r&&(r={}),c(this,void 0,void 0,(function(){return h(this,(function(n){return[2,this.get("/streams/"+t+"/entries/"+e,r)]}))}))},t.prototype.patchEntry=function(t,e,r,n){return void 0===r&&(r={}),void 0===n&&(n={}),c(this,void 0,void 0,(function(){return h(this,(function(o){return[2,this.patch("/streams/"+t+"/entries/"+e,r,n)]}))}))},t.prototype.putEntry=function(t,e,r,n){return void 0===r&&(r={}),void 0===n&&(n={}),c(this,void 0,void 0,(function(){return h(this,(function(o){return[2,this.put("/streams/"+t+"/entries/"+e,r,n)]}))}))},t.prototype.deleteEntry=function(t,e,r){return void 0===r&&(r={}),c(this,void 0,void 0,(function(){return h(this,(function(n){return ht.parameters("/streams/:stream/entries/:entry",{stream:t,entry:e}),[2,this.patch("/streams/"+t+"/entries/"+e,r)]}))}))},t.prototype.get=function(t,e){return void 0===e&&(e={}),c(this,void 0,void 0,(function(){return h(this,(function(r){return[2,this.request("get",t,e)]}))}))},t.prototype.delete=function(t,e){return void 0===e&&(e={}),c(this,void 0,void 0,(function(){return h(this,(function(r){return[2,this.request("delete",t,e)]}))}))},t.prototype.head=function(t,e){return void 0===e&&(e={}),c(this,void 0,void 0,(function(){return h(this,(function(r){return[2,this.request("head",t,e)]}))}))},t.prototype.options=function(t,e){return void 0===e&&(e={}),c(this,void 0,void 0,(function(){return h(this,(function(r){return[2,this.request("options",t,e)]}))}))},t.prototype.post=function(t,e,r){return void 0===r&&(r={}),c(this,void 0,void 0,(function(){return h(this,(function(n){return[2,this.request("post",t,a({data:e},r))]}))}))},t.prototype.put=function(t,e,r){return void 0===r&&(r={}),c(this,void 0,void 0,(function(){return h(this,(function(n){return[2,this.request("put",t,a({data:e},r))]}))}))},t.prototype.patch=function(t,e,r){return void 0===r&&(r={}),c(this,void 0,void 0,(function(){return h(this,(function(n){return[2,this.request("patch",t,a({data:e},r))]}))}))},t.prototype.request=function(t,e,r){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.client.request(t,e,r)];case 1:return[2,n.sent()];case 2:throw n.sent();case 3:return[2]}}))}))},t}(),At=function(){function t(t){this.stream=t}return Object.defineProperty(t.prototype,"http",{get:function(){return this.stream.streams.http},enumerable:!1,configurable:!0}),t.prototype.all=function(){return c(this,void 0,void 0,(function(){var t,e,r=this;return h(this,(function(n){switch(n.label){case 0:return[4,this.http.getEntries(this.stream.id)];case 1:return t=n.sent(),e=t.data.map((function(t){return new gt(r.stream,t,!1)})),[2,new mt(e,t.meta,t.links)]}}))}))},t.prototype.find=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){return[2,this.stream.entries().where("id",t).first()]}))}))},t.prototype.findAll=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){return[2,this.stream.entries().where("id","IN",t).get()]}))}))},t.prototype.findBy=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(r){return[2,this.stream.entries().where(t,e).first()]}))}))},t.prototype.findAllWhere=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(r){return[2,this.stream.entries().where(t,e).get()]}))}))},t.prototype.create=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){return[2,this.newCriteria().newInstance(t).save()]}))}))},t.prototype.save=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){return[2,t.save()]}))}))},t.prototype.delete=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.http.deleteEntry(this.stream.id,t.id)];case 1:return e.sent(),[2,!0]}}))}))},t.prototype.truncate=function(){return this},t.prototype.newInstance=function(t){return this.newCriteria().newInstance(t)},t.prototype.newCriteria=function(){return new Pt(this.stream)},t}(),xt=function(){function t(t,e,r,n){this.streams=t,this.meta=r,this.links=n,e.fields&&(this.fields=new Map(Object.entries(e.fields).map((function(t){return[t[0],new Ot(t[1])]}))),delete e.fields),Object.assign(this,e)}return Object.defineProperty(t.prototype,"repository",{get:function(){return this._repository||(this._repository=new At(this)),this._repository},enumerable:!1,configurable:!0}),t.prototype.entries=function(){return this.repository.newCriteria()},t}(),jt=function(){function t(t){this.config=t,this.hooks={all:new at(["data"]),make:new at(["data"]),maked:new st(["stream"]),create:new at(["data"]),created:new st(["stream"])},this.client=new t.Client(this.config),this.http=new t.Http(this)}return t.prototype.all=function(){return c(this,void 0,void 0,(function(){var t,e,r,n,o,i;return h(this,(function(s){switch(s.label){case 0:return[4,this.http.getStreams()];case 1:t=s.sent(),e=[],r=0,n=t.data,s.label=2;case 2:return r<n.length?[4,this.hooks.all.promise(o=n[r])]:[3,5];case 3:o=s.sent(),i=new xt(this,o),e.push(i),s.label=4;case 4:return r++,[3,2];case 5:return[2,e]}}))}))},t.prototype.make=function(t){return c(this,void 0,void 0,(function(){var e,r;return h(this,(function(n){switch(n.label){case 0:return[4,this.http.getStream(t)];case 1:return e=n.sent(),[4,this.hooks.make.promise(e.data)];case 2:return n.sent(),r=new xt(this,e.data,e.meta,e.links),this.hooks.maked.call(r),[2,r]}}))}))},t.prototype.create=function(t,e){return c(this,void 0,void 0,(function(){var r,n;return h(this,(function(o){switch(o.label){case 0:return[4,this.http.postStream(a({id:t,name:t},e))];case 1:return r=o.sent(),[4,this.hooks.create.promise(r.data)];case 2:return o.sent(),n=new xt(this,r.data,r.meta,r.links),this.hooks.created.call(n),[2,n]}}))}))},t.prototype.entries=function(t){return c(this,void 0,void 0,(function(){var e;return h(this,(function(r){switch(r.label){case 0:return[4,this.make(t)];case 1:return e=r.sent(),[2,new Pt(e)]}}))}))},t.prototype.repository=function(t){return c(this,void 0,void 0,(function(){var e;return h(this,(function(r){switch(r.label){case 0:return[4,this.make(t)];case 1:return e=r.sent(),[2,new At(e)]}}))}))},t.prototype.collection=function(){},t}();return t.Client=yt,t.Collection=_t,t.Criteria=Pt,t.Entry=gt,t.EntryCollection=mt,t.Field=Ot,t.FieldCollection=Rt,t.HTTPError=ct,t.Http=Tt,t.PaginatedEntryCollection=wt,t.Repository=At,t.RequestFactory=vt,t.Str=ht,t.Stream=xt,t.Streams=jt,t.comparisonOperators=bt,t.logicalOperators=Et,t.objectify=pt,t.operators=kt,Object.defineProperty(t,"__esModule",{value:!0}),t}({},require$$0);
