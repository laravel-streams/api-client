var streamsApi=function(t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},e(t,r)};function r(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var n=function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)};function o(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function u(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}c((n=n.apply(t,e||[])).next())}))}function i(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var s=function(){function t(t,e,r){return void 0===e&&(e={}),void 0===r&&(r=!0),this._stream=t,this._data=e,this._fresh=r,new Proxy(this,{get:function(t,e,r){return Reflect.has(t,e)?Reflect.get(t,e,r):Reflect.has(t._data,e)?Reflect.get(t._data,e):void 0},set:function(t,e,r,n){return Reflect.has(t,e)?Reflect.set(t,e,r,n):Reflect.set(t._data,e,r)}})}return Object.defineProperty(t.prototype,"http",{get:function(){return this._stream.streams.http},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stream",{get:function(){return this._stream},enumerable:!1,configurable:!0}),t.prototype.save=function(){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),this._fresh?[4,this.http.postEntry(this._stream.id,this._data)]:[3,2];case 1:case 3:return t.sent(),[2,!0];case 2:return[4,this.http.patchEntry(this._stream.id,this._data.id,this._data)];case 4:return t.sent(),[2,!1];case 5:return[2]}}))}))},t.prototype.validator=function(){},t}(),u=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,e)||this;return Object.setPrototypeOf(n,Array.prototype),n}return r(e,t),e}(Array),c=function(t){function e(e,r,n){var o=t.apply(this,e)||this;return o.meta=r,o.links=n,o}return r(e,t),e.fromResponse=function(t,r){return new e(Object.values(t.data).map((function(t){return new s(r,t,!1)})),t.meta,t.links)},e}(u),a=function(t){function e(e,r,n){var o=t.apply(this,e)||this;return o.meta=r,o.links=n,o}return r(e,t),e.fromResponse=function(t,r){return new e(Object.values(t.data).map((function(t){return new s(r,t,!1)})),t.meta,t.links)},e}(u),p=[">","<","==","!=",">=","<=","!<","!>","<>"],l=["BETWEEN","EXISTS","OR","AND","NOT","IN","ALL","ANY","LIKE","IS NULL","UNIQUE"],h=[].concat(p).concat(l),f=function(t){return h.includes(t)},d=function(){function t(t){this.stream=t,this.parameters=[]}return Object.defineProperty(t.prototype,"http",{get:function(){return this.stream.streams.http},enumerable:!1,configurable:!0}),t.prototype.find=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2,this.where("id",t).first()]}))}))},t.prototype.first=function(){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.limit(1).get()];case 1:return[2,t.sent()[0]]}}))}))},t.prototype.cache=function(){return this},t.prototype.orderBy=function(t,e){return void 0===e&&(e="desc"),this.addParameter("orderBy",[t,e]),this},t.prototype.limit=function(t){return this.addParameter("limit",t),this},t.prototype.where=function(){for(var t,e,r,n,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(2===o.length?(t=o[0],e="==",r=o[1]):3===o.length?(t=o[0],e=o[1],r=o[2]):4===o.length&&(t=o[0],e=o[1],r=o[2],n=o[3]),!f(e))throw new Error('Criteria where() operator "'+e+'" not valid ');return this.addParameter("where",[t,e,r,n]),this},t.prototype.orWhere=function(){for(var t,e,r,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(2===n.length?(t=n[0],e="==",r=n[1]):(t=n[0],e=n[1],r=n[2]),!f(e))throw new Error('Criteria orWhere() operator "'+e+'" not valid ');return this.addParameter("where",[t,e,r,"or"]),this},t.prototype.get=function(){return o(this,void 0,void 0,(function(){var t,e;return i(this,(function(r){switch(r.label){case 0:return t=this.compileStatements(),[4,this.http.getEntries(this.stream.id,{query:t},{})];case 1:return e=r.sent(),[2,c.fromResponse(e,this.stream)]}}))}))},t.prototype.create=function(t){return o(this,void 0,void 0,(function(){var e;return i(this,(function(r){switch(r.label){case 0:return[4,(e=this.newInstance(t)).save()];case 1:return r.sent(),[2,e]}}))}))},t.prototype.save=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,t.save()];case 1:return[2,e.sent()]}}))}))},t.prototype.delete=function(){return this},t.prototype.paginate=function(t,e){return void 0===t&&(t=100),void 0===e&&(e=1),o(this,void 0,void 0,(function(){var r,n;return i(this,(function(o){switch(o.label){case 0:return r=this.compileStatements(),[4,this.http.getEntries(this.stream.id,{query:r},{paginate:!0,per_page:t,page:e})];case 1:return n=o.sent(),[2,a.fromResponse(n,this.stream)]}}))}))},t.prototype.newInstance=function(t){return new s(this.stream,t,!0)},t.prototype.getParameters=function(){return this.parameters},t.prototype.setParameters=function(t){return this.parameters=t,this},t.prototype.addParameter=function(t,e){return this.parameters.push({name:t,value:e}),this},t.prototype.compileStatements=function(){return this.parameters.map((function(t){var e,r;return(e={})[t.name]=(r=t.value,Array.isArray(r)?r:[r]),e}))},t}(),y=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===v}(t)}(t)};var v="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function g(t,e){return!1!==e.clone&&e.isMergeableObject(t)?E(Array.isArray(t)?[]:{},t,e):t}function m(t,e,r){return t.concat(e).map((function(t){return g(t,r)}))}function w(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function b(t,e){try{return e in t}catch(r){return!1}}function _(t,e,r){var n={};return r.isMergeableObject(t)&&w(t).forEach((function(e){n[e]=g(t[e],r)})),w(e).forEach((function(o){(function(t,e){return b(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(n[o]=b(t,o)&&r.isMergeableObject(e[o])?function(t,e){if(!e.customMerge)return E;var r=e.customMerge(t);return"function"==typeof r?r:E}(o,r)(t[o],e[o],r):g(e[o],r))})),n}function E(t,e,r){(r=r||{}).arrayMerge=r.arrayMerge||m,r.isMergeableObject=r.isMergeableObject||y,r.cloneUnlessOtherwiseSpecified=g;var n=Array.isArray(e);return n===Array.isArray(t)?n?r.arrayMerge(t,e,r):_(t,e,r):g(e,r)}E.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,r){return E(t,r,e)}),{})};var O=E;function P(t,e){return t(e={exports:{}},e.exports),e.exports}var $=function(t){return t instanceof Buffer},k=P((function(t){t.exports="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}})),S=R,j=P((function(t){try{if("function"!=typeof S.inherits)throw"";t.exports=S.inherits}catch(e){t.exports=k}})),R=P((function(t,e){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},n=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(s(arguments[r]));return e.join(" ")}r=1;for(var o=arguments,i=o.length,u=String(t).replace(n,(function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(o[r++]);case"%d":return Number(o[r++]);case"%j":try{return JSON.stringify(o[r++])}catch(e){return"[Circular]"}default:return t}})),c=o[r];r<i;c=o[++r])d(c)||!w(c)?u+=" "+c:u+=" "+s(c);return u},e.deprecate=function(t,r){if("undefined"!=typeof process&&!0===process.noDeprecation)return t;if("undefined"==typeof process)return function(){return e.deprecate(t,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return t.apply(this,arguments)}};var o,i={};function s(t,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),f(r)?n.showHidden=r:r&&e._extend(n,r),g(n.showHidden)&&(n.showHidden=!1),g(n.depth)&&(n.depth=2),g(n.colors)&&(n.colors=!1),g(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),a(n,t,n.depth)}function u(t,e){var r=s.styles[e];return r?"["+s.colors[r][0]+"m"+t+"["+s.colors[r][1]+"m":t}function c(t,e){return t}function a(t,r,n){if(t.customInspect&&r&&E(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,t);return v(o)||(o=a(t,o,n)),o}var i=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(v(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(y(e))return t.stylize(""+e,"number");if(f(e))return t.stylize(""+e,"boolean");if(d(e))return t.stylize("null","null")}(t,r);if(i)return i;var s=Object.keys(r),u=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),_(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(r);if(0===s.length){if(E(r))return t.stylize("[Function"+(r.name?": "+r.name:"")+"]","special");if(m(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(b(r))return t.stylize(Date.prototype.toString.call(r),"date");if(_(r))return p(r)}var c,w="",O=!1,P=["{","}"];(h(r)&&(O=!0,P=["[","]"]),E(r))&&(w=" [Function"+(r.name?": "+r.name:"")+"]");return m(r)&&(w=" "+RegExp.prototype.toString.call(r)),b(r)&&(w=" "+Date.prototype.toUTCString.call(r)),_(r)&&(w=" "+p(r)),0!==s.length||O&&0!=r.length?n<0?m(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),c=O?function(t,e,r,n,o){for(var i=[],s=0,u=e.length;s<u;++s)R(e,String(s))?i.push(l(t,e,r,n,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(l(t,e,r,n,o,!0))})),i}(t,r,n,u,s):s.map((function(e){return l(t,r,n,u,e,O)})),t.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(c,w,P)):P[0]+w+P[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,r,n,o,i){var s,u,c;if((c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?u=t.stylize(c.set?"[Getter/Setter]":"[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),R(n,o)||(s="["+o+"]"),u||(t.seen.indexOf(c.value)<0?(u=d(r)?a(t,c.value,null):a(t,c.value,r-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+u.split("\n").map((function(t){return"   "+t})).join("\n")):u=t.stylize("[Circular]","special")),g(s)){if(i&&o.match(/^\d+$/))return u;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+u}function h(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function d(t){return null===t}function y(t){return"number"==typeof t}function v(t){return"string"==typeof t}function g(t){return void 0===t}function m(t){return w(t)&&"[object RegExp]"===O(t)}function w(t){return"object"==typeof t&&null!==t}function b(t){return w(t)&&"[object Date]"===O(t)}function _(t){return w(t)&&("[object Error]"===O(t)||t instanceof Error)}function E(t){return"function"==typeof t}function O(t){return Object.prototype.toString.call(t)}function P(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(g(o)&&(o=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!i[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var r=process.pid;i[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else i[t]=function(){};return i[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=f,e.isNull=d,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=v,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=g,e.isRegExp=m,e.isObject=w,e.isDate=b,e.isError=_,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=$;var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(){var t=new Date,e=[P(t.getHours()),P(t.getMinutes()),P(t.getSeconds())].join(":");return[t.getDate(),k[t.getMonth()],e].join(" ")}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",S(),e.format.apply(e,arguments))},e.inherits=j,e._extend=function(t,e){if(!e||!w(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var x="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function A(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(x&&t[x]){var e;if("function"!=typeof(e=t[x]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,x,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,o)}catch(s){r(s)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),x&&Object.defineProperty(e,x,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=x,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var n=e.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return n.apply(o,arguments)};t.apply(this,e).then((function(t){process.nextTick(i,null,t)}),(function(t){process.nextTick(A,t,i)}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,r(t)),e}}));const x=S.deprecate((()=>{}),"Hook.context is deprecated and will be removed"),A=function(...t){return this.call=this._createCall("sync"),this.call(...t)},T=function(...t){return this.callAsync=this._createCall("async"),this.callAsync(...t)},D=function(...t){return this.promise=this._createCall("promise"),this.promise(...t)};class I{constructor(t=[],e){this._args=t,this.name=e,this.taps=[],this.interceptors=[],this._call=A,this.call=A,this._callAsync=T,this.callAsync=T,this._promise=D,this.promise=D,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}compile(t){throw new Error("Abstract: should be overridden")}_createCall(t){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:t})}_tap(t,e,r){if("string"==typeof e)e={name:e.trim()};else if("object"!=typeof e||null===e)throw new Error("Invalid tap options");if("string"!=typeof e.name||""===e.name)throw new Error("Missing name for tap");void 0!==e.context&&x(),e=Object.assign({type:t,fn:r},e),e=this._runRegisterInterceptors(e),this._insert(e)}tap(t,e){this._tap("sync",t,e)}tapAsync(t,e){this._tap("async",t,e)}tapPromise(t,e){this._tap("promise",t,e)}_runRegisterInterceptors(t){for(const e of this.interceptors)if(e.register){const r=e.register(t);void 0!==r&&(t=r)}return t}withOptions(t){const e=e=>Object.assign({},t,"string"==typeof e?{name:e}:e);return{name:this.name,tap:(t,r)=>this.tap(e(t),r),tapAsync:(t,r)=>this.tapAsync(e(t),r),tapPromise:(t,r)=>this.tapPromise(e(t),r),intercept:t=>this.intercept(t),isUsed:()=>this.isUsed(),withOptions:t=>this.withOptions(e(t))}}isUsed(){return this.taps.length>0||this.interceptors.length>0}intercept(t){if(this._resetCompilation(),this.interceptors.push(Object.assign({},t)),t.register)for(let e=0;e<this.taps.length;e++)this.taps[e]=t.register(this.taps[e])}_resetCompilation(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}_insert(t){let e;this._resetCompilation(),"string"==typeof t.before?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));let r=0;"number"==typeof t.stage&&(r=t.stage);let n=this.taps.length;for(;n>0;){n--;const t=this.taps[n];this.taps[n+1]=t;const o=t.stage||0;if(e){if(e.has(t.name)){e.delete(t.name);continue}if(e.size>0)continue}if(!(o>r)){n++;break}}this.taps[n]=t}}Object.setPrototypeOf(I.prototype,null);var H=I;var C=class{constructor(t){this.config=t,this.options=void 0,this._args=void 0}create(t){let e;switch(this.init(t),this.options.type){case"sync":e=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:t=>`throw ${t};\n`,onResult:t=>`return ${t};\n`,resultReturns:!0,onDone:()=>"",rethrowIfPossible:!0}));break;case"async":e=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:t=>`_callback(${t});\n`,onResult:t=>`_callback(null, ${t});\n`,onDone:()=>"_callback();\n"}));break;case"promise":let t=!1;const r=this.contentWithInterceptors({onError:e=>(t=!0,`_error(${e});\n`),onResult:t=>`_resolve(${t});\n`,onDone:()=>"_resolve();\n"});let n="";n+='"use strict";\n',n+=this.header(),n+="return new Promise((function(_resolve, _reject) {\n",t&&(n+="var _sync = true;\n",n+="function _error(_err) {\n",n+="if(_sync)\n",n+="_resolve(Promise.resolve().then((function() { throw _err; })));\n",n+="else\n",n+="_reject(_err);\n",n+="};\n"),n+=r,t&&(n+="_sync = false;\n"),n+="}));\n",e=new Function(this.args(),n)}return this.deinit(),e}setup(t,e){t._x=e.taps.map((t=>t.fn))}init(t){this.options=t,this._args=t.args.slice()}deinit(){this.options=void 0,this._args=void 0}contentWithInterceptors(t){if(this.options.interceptors.length>0){const e=t.onError,r=t.onResult,n=t.onDone;let o="";for(let t=0;t<this.options.interceptors.length;t++){const e=this.options.interceptors[t];e.call&&(o+=`${this.getInterceptor(t)}.call(${this.args({before:e.context?"_context":void 0})});\n`)}return o+=this.content(Object.assign(t,{onError:e&&(t=>{let r="";for(let e=0;e<this.options.interceptors.length;e++){this.options.interceptors[e].error&&(r+=`${this.getInterceptor(e)}.error(${t});\n`)}return r+=e(t),r}),onResult:r&&(t=>{let e="";for(let r=0;r<this.options.interceptors.length;r++){this.options.interceptors[r].result&&(e+=`${this.getInterceptor(r)}.result(${t});\n`)}return e+=r(t),e}),onDone:n&&(()=>{let t="";for(let e=0;e<this.options.interceptors.length;e++){this.options.interceptors[e].done&&(t+=`${this.getInterceptor(e)}.done();\n`)}return t+=n(),t})})),o}return this.content(t)}header(){let t="";return this.needContext()?t+="var _context = {};\n":t+="var _context;\n",t+="var _x = this._x;\n",this.options.interceptors.length>0&&(t+="var _taps = this.taps;\n",t+="var _interceptors = this.interceptors;\n"),t}needContext(){for(const t of this.options.taps)if(t.context)return!0;return!1}callTap(t,{onError:e,onResult:r,onDone:n,rethrowIfPossible:o}){let i="",s=!1;for(let c=0;c<this.options.interceptors.length;c++){const e=this.options.interceptors[c];e.tap&&(s||(i+=`var _tap${t} = ${this.getTap(t)};\n`,s=!0),i+=`${this.getInterceptor(c)}.tap(${e.context?"_context, ":""}_tap${t});\n`)}i+=`var _fn${t} = ${this.getTapFn(t)};\n`;const u=this.options.taps[t];switch(u.type){case"sync":o||(i+=`var _hasError${t} = false;\n`,i+="try {\n"),i+=r?`var _result${t} = _fn${t}(${this.args({before:u.context?"_context":void 0})});\n`:`_fn${t}(${this.args({before:u.context?"_context":void 0})});\n`,o||(i+="} catch(_err) {\n",i+=`_hasError${t} = true;\n`,i+=e("_err"),i+="}\n",i+=`if(!_hasError${t}) {\n`),r&&(i+=r(`_result${t}`)),n&&(i+=n()),o||(i+="}\n");break;case"async":let s="";s+=r?`(function(_err${t}, _result${t}) {\n`:`(function(_err${t}) {\n`,s+=`if(_err${t}) {\n`,s+=e(`_err${t}`),s+="} else {\n",r&&(s+=r(`_result${t}`)),n&&(s+=n()),s+="}\n",s+="})",i+=`_fn${t}(${this.args({before:u.context?"_context":void 0,after:s})});\n`;break;case"promise":i+=`var _hasResult${t} = false;\n`,i+=`var _promise${t} = _fn${t}(${this.args({before:u.context?"_context":void 0})});\n`,i+=`if (!_promise${t} || !_promise${t}.then)\n`,i+=`  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${t} + ')');\n`,i+=`_promise${t}.then((function(_result${t}) {\n`,i+=`_hasResult${t} = true;\n`,r&&(i+=r(`_result${t}`)),n&&(i+=n()),i+=`}), function(_err${t}) {\n`,i+=`if(_hasResult${t}) throw _err${t};\n`,i+=e(`_err${t}`),i+="});\n"}return i}callTapsSeries({onError:t,onResult:e,resultReturns:r,onDone:n,doneReturns:o,rethrowIfPossible:i}){if(0===this.options.taps.length)return n();const s=this.options.taps.findIndex((t=>"sync"!==t.type)),u=r||o;let c="",a=n,p=0;for(let l=this.options.taps.length-1;l>=0;l--){const r=l;a!==n&&("sync"!==this.options.taps[r].type||p++>20)&&(p=0,c+=`function _next${r}() {\n`,c+=a(),c+="}\n",a=()=>`${u?"return ":""}_next${r}();\n`);const o=a,h=t=>t?"":n(),f=this.callTap(r,{onError:e=>t(r,e,o,h),onResult:e&&(t=>e(r,t,o,h)),onDone:!e&&o,rethrowIfPossible:i&&(s<0||r<s)});a=()=>f}return c+=a(),c}callTapsLooping({onError:t,onDone:e,rethrowIfPossible:r}){if(0===this.options.taps.length)return e();const n=this.options.taps.every((t=>"sync"===t.type));let o="";n||(o+="var _looper = (function() {\n",o+="var _loopAsync = false;\n"),o+="var _loop;\n",o+="do {\n",o+="_loop = false;\n";for(let i=0;i<this.options.interceptors.length;i++){const t=this.options.interceptors[i];t.loop&&(o+=`${this.getInterceptor(i)}.loop(${this.args({before:t.context?"_context":void 0})});\n`)}return o+=this.callTapsSeries({onError:t,onResult:(t,e,r,o)=>{let i="";return i+=`if(${e} !== undefined) {\n`,i+="_loop = true;\n",n||(i+="if(_loopAsync) _looper();\n"),i+=o(!0),i+="} else {\n",i+=r(),i+="}\n",i},onDone:e&&(()=>{let t="";return t+="if(!_loop) {\n",t+=e(),t+="}\n",t}),rethrowIfPossible:r&&n}),o+="} while(_loop);\n",n||(o+="_loopAsync = true;\n",o+="});\n",o+="_looper();\n"),o}callTapsParallel({onError:t,onResult:e,onDone:r,rethrowIfPossible:n,onTap:o=((t,e)=>e())}){if(this.options.taps.length<=1)return this.callTapsSeries({onError:t,onResult:e,onDone:r,rethrowIfPossible:n});let i="";i+="do {\n",i+=`var _counter = ${this.options.taps.length};\n`,r&&(i+="var _done = (function() {\n",i+=r(),i+="});\n");for(let s=0;s<this.options.taps.length;s++){const u=()=>r?"if(--_counter === 0) _done();\n":"--_counter;",c=t=>t||!r?"_counter = 0;\n":"_counter = 0;\n_done();\n";i+="if(_counter <= 0) break;\n",i+=o(s,(()=>this.callTap(s,{onError:e=>{let r="";return r+="if(_counter > 0) {\n",r+=t(s,e,u,c),r+="}\n",r},onResult:e&&(t=>{let r="";return r+="if(_counter > 0) {\n",r+=e(s,t,u,c),r+="}\n",r}),onDone:!e&&(()=>u()),rethrowIfPossible:n})),u,c)}return i+="} while(false);\n",i}args({before:t,after:e}={}){let r=this._args;return t&&(r=[t].concat(r)),e&&(r=r.concat(e)),0===r.length?"":r.join(", ")}getTapFn(t){return`_x[${t}]`}getTap(t){return`_taps[${t}]`}getInterceptor(t){return`_interceptors[${t}]`}};const M=new class extends C{content({onError:t,onDone:e,rethrowIfPossible:r}){return this.callTapsSeries({onError:(e,r)=>t(r),onDone:e,rethrowIfPossible:r})}},q=()=>{throw new Error("tapAsync is not supported on a SyncHook")},z=()=>{throw new Error("tapPromise is not supported on a SyncHook")},U=function(t){return M.setup(this,t),M.create(t)};function N(t=[],e){const r=new H(t,e);return r.constructor=N,r.tapAsync=q,r.tapPromise=z,r.compile=U,r}N.prototype=null;var L=N;const W=new class extends C{content({onError:t,onResult:e,resultReturns:r,onDone:n,rethrowIfPossible:o}){return this.callTapsSeries({onError:(e,r)=>t(r),onResult:(t,r,n)=>`if(${r} !== undefined) {\n${e(r)};\n} else {\n${n()}}\n`,resultReturns:r,onDone:n,rethrowIfPossible:o})}},F=()=>{throw new Error("tapAsync is not supported on a SyncBailHook")},B=()=>{throw new Error("tapPromise is not supported on a SyncBailHook")},J=function(t){return W.setup(this,t),W.create(t)};function G(t=[],e){const r=new H(t,e);return r.constructor=G,r.tapAsync=F,r.tapPromise=B,r.compile=J,r}G.prototype=null;var X=G;const Z=new class extends C{content({onError:t,onResult:e,resultReturns:r,rethrowIfPossible:n}){return this.callTapsSeries({onError:(e,r)=>t(r),onResult:(t,e,r)=>{let n="";return n+=`if(${e} !== undefined) {\n`,n+=`${this._args[0]} = ${e};\n`,n+="}\n",n+=r(),n},onDone:()=>e(this._args[0]),doneReturns:r,rethrowIfPossible:n})}},K=()=>{throw new Error("tapAsync is not supported on a SyncWaterfallHook")},Q=()=>{throw new Error("tapPromise is not supported on a SyncWaterfallHook")},Y=function(t){return Z.setup(this,t),Z.create(t)};function V(t=[],e){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const r=new H(t,e);return r.constructor=V,r.tapAsync=K,r.tapPromise=Q,r.compile=Y,r}V.prototype=null;var tt=V;const et=new class extends C{content({onError:t,onDone:e,rethrowIfPossible:r}){return this.callTapsLooping({onError:(e,r)=>t(r),onDone:e,rethrowIfPossible:r})}},rt=()=>{throw new Error("tapAsync is not supported on a SyncLoopHook")},nt=()=>{throw new Error("tapPromise is not supported on a SyncLoopHook")},ot=function(t){return et.setup(this,t),et.create(t)};function it(t=[],e){const r=new H(t,e);return r.constructor=it,r.tapAsync=rt,r.tapPromise=nt,r.compile=ot,r}it.prototype=null;var st=it;const ut=new class extends C{content({onError:t,onDone:e}){return this.callTapsParallel({onError:(e,r,n,o)=>t(r)+o(!0),onDone:e})}},ct=function(t){return ut.setup(this,t),ut.create(t)};function at(t=[],e){const r=new H(t,e);return r.constructor=at,r.compile=ct,r._call=void 0,r.call=void 0,r}at.prototype=null;var pt=at;const lt=new class extends C{content({onError:t,onResult:e,onDone:r}){let n="";return n+=`var _results = new Array(${this.options.taps.length});\n`,n+="var _checkDone = function() {\n",n+="for(var i = 0; i < _results.length; i++) {\n",n+="var item = _results[i];\n",n+="if(item === undefined) return false;\n",n+="if(item.result !== undefined) {\n",n+=e("item.result"),n+="return true;\n",n+="}\n",n+="if(item.error) {\n",n+=t("item.error"),n+="return true;\n",n+="}\n",n+="}\n",n+="return false;\n",n+="}\n",n+=this.callTapsParallel({onError:(t,e,r,n)=>{let o="";return o+=`if(${t} < _results.length && ((_results.length = ${t+1}), (_results[${t}] = { error: ${e} }), _checkDone())) {\n`,o+=n(!0),o+="} else {\n",o+=r(),o+="}\n",o},onResult:(t,e,r,n)=>{let o="";return o+=`if(${t} < _results.length && (${e} !== undefined && (_results.length = ${t+1}), (_results[${t}] = { result: ${e} }), _checkDone())) {\n`,o+=n(!0),o+="} else {\n",o+=r(),o+="}\n",o},onTap:(t,e,r,n)=>{let o="";return t>0&&(o+=`if(${t} >= _results.length) {\n`,o+=r(),o+="} else {\n"),o+=e(),t>0&&(o+="}\n"),o},onDone:r}),n}},ht=function(t){return lt.setup(this,t),lt.create(t)};function ft(t=[],e){const r=new H(t,e);return r.constructor=ft,r.compile=ht,r._call=void 0,r.call=void 0,r}ft.prototype=null;var dt=ft;const yt=new class extends C{content({onError:t,onDone:e}){return this.callTapsSeries({onError:(e,r,n,o)=>t(r)+o(!0),onDone:e})}},vt=function(t){return yt.setup(this,t),yt.create(t)};function gt(t=[],e){const r=new H(t,e);return r.constructor=gt,r.compile=vt,r._call=void 0,r.call=void 0,r}gt.prototype=null;var mt=gt;const wt=new class extends C{content({onError:t,onResult:e,resultReturns:r,onDone:n}){return this.callTapsSeries({onError:(e,r,n,o)=>t(r)+o(!0),onResult:(t,r,n)=>`if(${r} !== undefined) {\n${e(r)}\n} else {\n${n()}}\n`,resultReturns:r,onDone:n})}},bt=function(t){return wt.setup(this,t),wt.create(t)};function _t(t=[],e){const r=new H(t,e);return r.constructor=_t,r.compile=bt,r._call=void 0,r.call=void 0,r}_t.prototype=null;var Et=_t;const Ot=new class extends C{content({onError:t,onDone:e}){return this.callTapsLooping({onError:(e,r,n,o)=>t(r)+o(!0),onDone:e})}},Pt=function(t){return Ot.setup(this,t),Ot.create(t)};function $t(t=[],e){const r=new H(t,e);return r.constructor=$t,r.compile=Pt,r._call=void 0,r.call=void 0,r}$t.prototype=null;var kt=$t;const St=new class extends C{content({onError:t,onResult:e}){return this.callTapsSeries({onError:(e,r,n,o)=>t(r)+o(!0),onResult:(t,e,r)=>{let n="";return n+=`if(${e} !== undefined) {\n`,n+=`${this._args[0]} = ${e};\n`,n+="}\n",n+=r(),n},onDone:()=>e(this._args[0])})}},jt=function(t){return St.setup(this,t),St.create(t)};function Rt(t=[],e){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const r=new H(t,e);return r.constructor=Rt,r.compile=jt,r._call=void 0,r.call=void 0,r}Rt.prototype=null;var xt=Rt;const At=(t,e)=>e;class Tt{constructor(t,e){this._map=new Map,this.name=e,this._factory=t,this._interceptors=[]}get(t){return this._map.get(t)}for(t){const e=this.get(t);if(void 0!==e)return e;let r=this._factory(t);const n=this._interceptors;for(let o=0;o<n.length;o++)r=n[o].factory(t,r);return this._map.set(t,r),r}intercept(t){this._interceptors.push(Object.assign({factory:At},t))}}Tt.prototype.tap=S.deprecate((function(t,e,r){return this.for(t).tap(e,r)}),"HookMap#tap(key,…) is deprecated. Use HookMap#for(key).tap(…) instead."),Tt.prototype.tapAsync=S.deprecate((function(t,e,r){return this.for(t).tapAsync(e,r)}),"HookMap#tapAsync(key,…) is deprecated. Use HookMap#for(key).tapAsync(…) instead."),Tt.prototype.tapPromise=S.deprecate((function(t,e,r){return this.for(t).tapPromise(e,r)}),"HookMap#tapPromise(key,…) is deprecated. Use HookMap#for(key).tapPromise(…) instead.");var Dt=Tt;class It{constructor(t,e){this.hooks=t,this.name=e}tap(t,e){for(const r of this.hooks)r.tap(t,e)}tapAsync(t,e){for(const r of this.hooks)r.tapAsync(t,e)}tapPromise(t,e){for(const r of this.hooks)r.tapPromise(t,e)}isUsed(){for(const t of this.hooks)if(t.isUsed())return!0;return!1}intercept(t){for(const e of this.hooks)e.intercept(t)}withOptions(t){return new It(this.hooks.map((e=>e.withOptions(t))),this.name)}}var Ht,Ct=It,Mt=P((function(t,e){e.__esModule=!0,e.SyncHook=L,e.SyncBailHook=X,e.SyncWaterfallHook=tt,e.SyncLoopHook=st,e.AsyncParallelHook=pt,e.AsyncParallelBailHook=dt,e.AsyncSeriesHook=mt,e.AsyncSeriesBailHook=Et,e.AsyncSeriesLoopHook=kt,e.AsyncSeriesWaterfallHook=xt,e.HookMap=Dt,e.MultiHook=Ct}));(Ht=Mt)&&Ht.__esModule&&Object.prototype.hasOwnProperty.call(Ht,"default");var qt,zt=Mt.SyncWaterfallHook;t.Method=void 0,(qt=t.Method||(t.Method={})).connect="CONNECT",qt.delete="DELETE",qt.get="GET",qt.head="HEAD",qt.options="OPTIONS",qt.patch="PATCH",qt.post="POST",qt.put="PUT",qt.trace="TRACE";var Ut=function(t){function e(e){var r=t.call(this,"HTTP "+e.status+" Error: "+e.statusText)||this;return r.response=e,r.name="HTTPError",r}return r(e,t),e}(Error),Nt=function(){function t(){}return t.random=function(t){void 0===t&&(t=15);for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*r.length));return e},t.ensureLeft=function(t,e){return!1===t.startsWith(e)?e+t:t},t.ensureRight=function(t,e){return!1===t.endsWith(e)?t+e:t},t.stripLeft=function(t,e){return t.startsWith(e)?t.substr(e.length):t},t.stripRight=function(t,e){return t.endsWith(e)?t.substr(0,t.length-e.length):t},t.ucfirst=function(t){return t[0].toUpperCase()+t.slice(1)},t.lcfirst=function(t){return t[0].toLowerCase()+t.slice(1)},t.parameters=function(t,e){return Object.entries(e).forEach((function(e){var r=e[1];return t=t.replace(new RegExp(":"+e[0],"g"),r)})),t},t}(),Lt=function(){function e(t){this.hooks={createRequest:new zt(["factory"]),request:new zt(["request"]),response:new zt(["response","request"])},this.config=O({headers:{"X-Requested-With":"XMLHttpRequest"},request:{method:"GET",credentials:"include"}},t)}return e.prototype.request=function(t,e,r){return void 0===r&&(r={}),o(this,void 0,void 0,(function(){var n,o;return i(this,(function(i){switch(i.label){case 0:return n=this.createRequest(t,e,r),[4,this.hooks.request.promise(n)];case 1:return n=i.sent(),[4,fetch(n)];case 2:return o=i.sent(),[4,this.hooks.response.promise(o,n)];case 3:if(!(o=i.sent()).ok)throw new Ut(o);return[2,o]}}))}))},e.prototype.createRequest=function(t,e,r){void 0===r&&(r={});var n=this.createRequestFactory(t,e,r);return(n=this.hooks.createRequest.call(n)).make()},e.prototype.createRequestFactory=function(e,r,n){return void 0===n&&(n={}),(n=this.getRequestConfig(n)).method=t.Method[e],function(t,e){void 0===e&&(e=Request);return new Wt(t,e)}(this.config).merge(n)},e.prototype.getRequestConfig=function(t){return void 0===t&&(t={}),O(this.config.request,t,{clone:!0})},e}(),Wt=function(){function t(t,e){return this._clientConfig=t,this._Request=e,this._config={},this._params=new URLSearchParams,this._headers=new Headers,new Proxy(this,{get:function(t,e,r){return Reflect.has(t,e)?Reflect.get(t,e,r):function(r){return t._config[e]=r,t}},set:function(t,e,r,n){return"function"==typeof t[e]?t[e](r):Reflect.set(t,e,r,n)}})}return t.prototype.merge=function(t){var e=this;return Object.entries(t).forEach((function(t){return e[t[0]](t[1])})),this},t.prototype.getConfig=function(){return n(n({},this._config),{headers:this._headers,params:this._params,url:this._config.url?this.getUri(this._config.url):this._config.url})},t.prototype.header=function(t,e){return this._headers.set(t,e),this},t.prototype.param=function(t,e){return this._headers.set(t,e),this},t.prototype.headers=function(t){var e;return e=this._headers,new Headers(t).forEach((function(t,r){return e.set(r,t)})),this},t.prototype.params=function(t){var e;return e=this._params,new URLSearchParams(t).forEach((function(t,r){return e.set(r,t)})),this},t.prototype.data=function(t){return this._headers.set("Content-Type","application/json"),this._config.body=JSON.stringify(t),this},t.prototype.getUri=function(t){var e=this._params.toString();return e.length&&(e="?"+e),Nt.ensureRight(this._clientConfig.baseURL,"/")+Nt.stripLeft(t,"/")+e},t.prototype.basic=function(t,e){return this.authorization("Basic",btoa(t+":"+e))},t.prototype.bearer=function(t){return this.authorization("Bearer",t)},t.prototype.authorization=function(t,e){return this._headers.set("Authorization",t+" "+e),this},t.prototype.make=function(){var t=this.getConfig();return new this._Request(t.url,t)},t}();var Ft=function(t){Object.assign(this,t)},Bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(u),Jt=function(){function t(t){this.streams=t}return Object.defineProperty(t.prototype,"client",{get:function(){return this.streams.client},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.streams.config},enumerable:!1,configurable:!0}),t.prototype.getStreams=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),o(this,void 0,void 0,(function(){return i(this,(function(r){return e.params=t,[2,this.get("/streams",e)]}))}))},t.prototype.postStream=function(t,e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){return i(this,(function(r){return[2,this.post("/streams",t,e)]}))}))},t.prototype.getStream=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),o(this,void 0,void 0,(function(){return i(this,(function(n){return r.params=e,[2,this.get("/streams/"+t,r)]}))}))},t.prototype.patchStream=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),o(this,void 0,void 0,(function(){return i(this,(function(n){return[2,this.patch("/streams/"+t,e,r)]}))}))},t.prototype.putStream=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),o(this,void 0,void 0,(function(){return i(this,(function(n){return[2,this.put("/streams/"+t,e,r)]}))}))},t.prototype.deleteStream=function(t,e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){return i(this,(function(r){return[2,this.delete("/streams/"+t,e)]}))}))},t.prototype.getEntries=function(t,e,r,s){return void 0===e&&(e={}),void 0===r&&(r={}),void 0===s&&(s={}),o(this,void 0,void 0,(function(){return i(this,(function(o){return s.body=e,s.params=r,[2,this.get("/streams/"+t+"/entries",n(n({},s),{headers:{"Content-Type":"application/json"}}))]}))}))},t.prototype.postEntry=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),o(this,void 0,void 0,(function(){return i(this,(function(n){return[2,this.post("/streams/"+t+"/entries",e,r)]}))}))},t.prototype.getEntry=function(t,e,r){return void 0===r&&(r={}),o(this,void 0,void 0,(function(){return i(this,(function(n){return[2,this.get("/streams/"+t+"/entries/"+e,r)]}))}))},t.prototype.patchEntry=function(t,e,r,n){return void 0===r&&(r={}),void 0===n&&(n={}),o(this,void 0,void 0,(function(){return i(this,(function(o){return[2,this.patch("/streams/"+t+"/entries/"+e,r,n)]}))}))},t.prototype.putEntry=function(t,e,r,n){return void 0===r&&(r={}),void 0===n&&(n={}),o(this,void 0,void 0,(function(){return i(this,(function(o){return[2,this.put("/streams/"+t+"/entries/"+e,r,n)]}))}))},t.prototype.deleteEntry=function(t,e,r){return void 0===r&&(r={}),o(this,void 0,void 0,(function(){return i(this,(function(n){return Nt.parameters("/streams/:stream/entries/:entry",{stream:t,entry:e}),[2,this.patch("/streams/"+t+"/entries/"+e,r)]}))}))},t.prototype.get=function(t,e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){return i(this,(function(r){return[2,this.request("get",t,e)]}))}))},t.prototype.delete=function(t,e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){return i(this,(function(r){return[2,this.request("delete",t,e)]}))}))},t.prototype.head=function(t,e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){return i(this,(function(r){return[2,this.request("head",t,e)]}))}))},t.prototype.options=function(t,e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){return i(this,(function(r){return[2,this.request("options",t,e)]}))}))},t.prototype.post=function(t,e,r){return void 0===r&&(r={}),o(this,void 0,void 0,(function(){return i(this,(function(o){return[2,this.request("post",t,n({data:e},r))]}))}))},t.prototype.put=function(t,e,r){return void 0===r&&(r={}),o(this,void 0,void 0,(function(){return i(this,(function(o){return[2,this.request("put",t,n({data:e},r))]}))}))},t.prototype.patch=function(t,e,r){return void 0===r&&(r={}),o(this,void 0,void 0,(function(){return i(this,(function(o){return[2,this.request("patch",t,n({data:e},r))]}))}))},t.prototype.request=function(t,e,r){return o(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.client.request(t,e,r)];case 1:return[2,n.sent()];case 2:throw n.sent();case 3:return[2]}}))}))},t}(),Gt=function(){function t(t){this.stream=t}return Object.defineProperty(t.prototype,"http",{get:function(){return this.stream.streams.http},enumerable:!1,configurable:!0}),t.prototype.all=function(){return o(this,void 0,void 0,(function(){var t,e,r=this;return i(this,(function(n){switch(n.label){case 0:return[4,this.http.getEntries(this.stream.id)];case 1:return t=n.sent(),e=t.data.map((function(t){return new s(r.stream,t,!1)})),[2,new c(e,t.meta,t.links)]}}))}))},t.prototype.find=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2,this.stream.entries().where("id",t).first()]}))}))},t.prototype.findAll=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2,this.stream.entries().where("id","IN",t).get()]}))}))},t.prototype.findBy=function(t,e){return o(this,void 0,void 0,(function(){return i(this,(function(r){return[2,this.stream.entries().where(t,e).first()]}))}))},t.prototype.findAllWhere=function(t,e){return o(this,void 0,void 0,(function(){return i(this,(function(r){return[2,this.stream.entries().where(t,e).get()]}))}))},t.prototype.create=function(t){return o(this,void 0,void 0,(function(){var e;return i(this,(function(r){switch(r.label){case 0:return[4,(e=this.newCriteria().newInstance(t)).save()];case 1:return r.sent(),[2,e]}}))}))},t.prototype.save=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,t.save()];case 1:return[2,e.sent()]}}))}))},t.prototype.delete=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.http.deleteEntry(this.stream.id,t.id)];case 1:return e.sent(),[2,!0]}}))}))},t.prototype.truncate=function(){return this},t.prototype.newInstance=function(t){return this.newCriteria().newInstance(t)},t.prototype.newCriteria=function(){return new d(this.stream)},t}(),Xt=function(){function t(t,e,r,n){this.streams=t,this.meta=r,this.links=n,e.fields&&(this.fields=new Map(Object.entries(e.fields).map((function(t){return[t[0],new Ft(t[1])]}))),delete e.fields),Object.assign(this,e)}return Object.defineProperty(t.prototype,"repository",{get:function(){return this._repository||(this._repository=new Gt(this)),this._repository},enumerable:!1,configurable:!0}),t.prototype.entries=function(){return this.repository.newCriteria()},t}(),Zt=function(){function t(t){this.config=t,this.client=new Lt(this.config),this.http=new Jt(this)}return t.prototype.all=function(){return o(this,void 0,void 0,(function(){var t=this;return i(this,(function(e){switch(e.label){case 0:return[4,this.http.getStreams()];case 1:return[2,e.sent().data.map((function(e){return new Xt(t,e)}))]}}))}))},t.prototype.make=function(t){return o(this,void 0,void 0,(function(){var e;return i(this,(function(r){switch(r.label){case 0:return[4,this.http.getStream(t)];case 1:return e=r.sent(),[2,new Xt(this,e.data,e.meta,e.links)]}}))}))},t.prototype.create=function(t,e){return o(this,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:return[4,this.http.postStream(n({id:t,name:t},e))];case 1:return r=o.sent(),[2,new Xt(this,r.data,r.meta,r.links)]}}))}))},t.prototype.entries=function(t){return o(this,void 0,void 0,(function(){var e;return i(this,(function(r){switch(r.label){case 0:return[4,this.make(t)];case 1:return e=r.sent(),[2,new d(e)]}}))}))},t.prototype.repository=function(t){return o(this,void 0,void 0,(function(){var e;return i(this,(function(r){switch(r.label){case 0:return[4,this.make(t)];case 1:return e=r.sent(),[2,new Gt(e)]}}))}))},t.prototype.collection=function(){},t}();return t.Client=Lt,t.Collection=u,t.Criteria=d,t.Entry=s,t.EntryCollection=c,t.Field=Ft,t.FieldCollection=Bt,t.Http=Jt,t.PaginatedEntryCollection=a,t.Repository=Gt,t.RequestFactory=Wt,t.Stream=Xt,t.Streams=Zt,t.comparisonOperators=p,t.logicalOperators=l,t.operators=h,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
